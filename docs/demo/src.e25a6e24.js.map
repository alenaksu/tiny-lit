{"version":3,"sources":["../node_modules/@tiny-lit/element/src/withProps.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/utils.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/types.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/scheduler.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/expressions.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/linker.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/parser.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/template.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/index.ts","../node_modules/@tiny-lit/element/src/withElement.ts","../node_modules/@tiny-lit/element/src/Element.ts","../node_modules/@tiny-lit/element/src/index.ts","../node_modules/@tiny-lit/core/dist/utils.js","../node_modules/@tiny-lit/core/dist/scheduler.js","../node_modules/@tiny-lit/core/dist/expressions.js","../node_modules/@tiny-lit/core/dist/linker.js","../node_modules/@tiny-lit/core/dist/parser.js","../node_modules/@tiny-lit/core/dist/template.js","../node_modules/@tiny-lit/core/dist/index.js","../src/todo/style.js","../node_modules/secchiojs/lib/index.js","../src/todo/index.js","../src/scheduler/Dot.js","../src/scheduler/Triangle.js","../src/scheduler/index.js","../node_modules/@tiny-lit/store/src/types.ts","../node_modules/@tiny-lit/store/src/events.ts","../node_modules/@tiny-lit/store/src/store.ts","../node_modules/@tiny-lit/store/src/withStore.ts","../node_modules/@tiny-lit/store/src/StoreProvider.ts","../node_modules/@tiny-lit/store/src/index.ts","../src/store/index.js","../src/svg/index.js","../node_modules/@tiny-lit/router/src/history/hash.ts","../node_modules/@tiny-lit/router/src/history/path.ts","../node_modules/@tiny-lit/router/src/history/index.ts","../node_modules/@tiny-lit/router/src/router.ts","../node_modules/@tiny-lit/router/src/types.ts","../node_modules/@tiny-lit/router/src/events.ts","../node_modules/@tiny-lit/router/src/RouteElement.ts","../node_modules/@tiny-lit/router/src/RouterProvider.ts","../node_modules/@tiny-lit/router/src/index.ts","../src/index.js"],"names":["comment","data","document","createComment","text","createTextNode","isNode","obj","type","nodeType","isPrimitive","val","Object","replaceRange","newNode","range","startNode","endNode","concat","parentNode","nextSibling","removeNodes","replaceChild","parent","nextNode","removeChild","moveTemplate","template","after","before","node","insertBefore","getNodeIndex","index","previousSibling","getNodePath","path","unshift","getNodeByPath","i","l","length","childNodes","TemplateSymbol","Symbol","isSameTemplate","t1","t2","isTemplate","strings","MARKER_PREFIX","Math","random","toString","slice","MARKER_RE","RegExp","TEXT_ELEMENT","markerNumber","value","m","exec","lastIndex","Number","jobsQueue","jobsQueueLow","JOB_WINDOW","JOB_MAX_WAIT","raf","window","requestAnimationFrame","flushPending","queueAge","enabled","flushQueue","queue","timeout","Date","now","job","task","args","undefined","scheduled","splice","flush","ceil","push","setEnabled","enqueueJob","priority","firstRun","AttributeExpression","constructor","element","name","namespaceURI","requestUpdate","newValue","setAttributeNS","setAttribute","hasAttribute","removeAttribute","update","NodeExpression","updateText","Array","isArray","updateArray","updateTemplate","values","replaceWith","placeholder","items","templates","Map","currentNode","keys","Set","item","key","String","get","create","set","add","forEach","map","has","delete","clear","Node","TEXT_NODE","textContent","treeWalkerFilter","NodeFilter","FILTER_ACCEPT","linkAttributes","linkedExpressions","attrs","attributes","nodePath","linkComment","nodeValue","linkTexts","keyNode","splitText","deleteData","linkExpressions","root","treeWalker","createTreeWalker","SHOW_ELEMENT","SHOW_COMMENT","ELEMENT_NODE","test","tagName","childNode","resolve","fragment","symbols","symbol","acceptNode","TemplateCache","WeakMap","createCacheEntry","html","context","createElement","innerHTML","content","createRange","selectNodeContents","firstChild","extractContents","expressions","toHTML","NODE_RE","isAttribute","marker","match","parseTemplate","cacheEntry","importNode","_a","Template","withKey","appendChild","render","container","instances","svg","defer","requestIdleCallback","isExpired","entry","expire","timestamp","isSameVersion","version","setItem","storage","JSON","stringify","getItem","options","cached","parse","removeItem","getBucket","assign","localStorage","defaultValue","prevented","f","e","stopPropagation","preventDefault","getTodos","setTodos","todos","filter","shuffle","array","counter","floor","temp","TodoMVC","Element","state","attachShadow","mode","is","setState","nextState","setFilter","completed","handleAddTodo","target","elements","id","substr","reset","handleDeleteTodo","remove","todo","switchCompleted","handleClearCompleted","connectedCallback","console","time","firstUpdated","timeEnd","style","customElements","define","SierpinskiDot","properties","x","y","size","hover","Boolean","addEventListener","s","targetSize","SierpinskiTriangle","seconds","renderTemplate","performance","rafInterval","fn","running","run","SchedulerDemo","elapsed","rendered","start","timerInterval","setInterval","tick","bind","renderInterval","disconnectedCallback","clearInterval","getTransform","t","JSONObject","Items","title","category","price","ElementWithStore","MyStore","StoreProvider","config","initialState","getAttribute","cart","count","plugins","store","subscribe","log","actions","addToCart","commit","removeFromCart","removeAllFromCart","mutations","addItem","removeItemByIndex","a","updateCount","Basket","toggleCart","open","onStateChange","handleRemove","dispatch","handleRemoveAll","Item","handleClick","StoreDemo","c","Svg","radius","maxRadius","onChange","interval","abs","sin","RouterProvider","RouteElement"],"mappings":"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","file":"src.e25a6e24.js","sourceRoot":"../../packages/demo/public","sourcesContent":["import {\n    Constructor,\n    PropertyDescriptor,\n    ElementProperties,\n    AttributeMap\n} from './types';\n\nfunction createChangeCallback(name) {\n    const defaultName = `on${name.charAt(0).toUpperCase()}${name.slice(\n        1\n    )}Changed`;\n\n    return function (this: any, ...args) {\n        this[defaultName] && this[defaultName](...args);\n    };\n}\n\nfunction normalizeDescriptor(name, descriptor) {\n    return {\n        type: descriptor.call ? descriptor : descriptor.type,\n        onChange:\n            descriptor.onChange === true\n                ? createChangeCallback(name)\n                : descriptor.onChange\n    };\n}\n\nfunction defineProp(\n    prototype,\n    name: string,\n    propertyDescriptor: PropertyDescriptor\n) {\n    Object.defineProperty(prototype, name, {\n        get(): any {\n            return this.__props[name];\n        },\n        set(newValue: any) {\n            const oldValue = this[name];\n\n            this.__props[name] = newValue;\n            if (this.rendered && oldValue !== newValue) {\n                if (propertyDescriptor.onChange)\n                    propertyDescriptor.onChange.call(this, newValue, oldValue);\n\n                this.update();\n            }\n        }\n    });\n}\n\nfunction defineProps(constructor: any): string[] {\n    if (!constructor.__attrs) {\n        const properties: ElementProperties<PropertyDescriptor> =\n            constructor.properties || {};\n        const attrsMap: AttributeMap = Object.create(null);\n        const props = Object.create(null);\n        const proto = constructor.prototype;\n\n        for (const propertyName in properties) {\n            const propertyDescriptor = normalizeDescriptor(\n                propertyName,\n                properties[propertyName]\n            );\n\n            const attrName = propertyName\n                .replace(/([a-z])([A-Z])/g, '$1-$2')\n                .toLowerCase();\n\n            attrsMap[attrName] = propertyName;\n            props[propertyName] = propertyDescriptor;\n\n            defineProp(proto, propertyName, propertyDescriptor);\n        }\n\n        constructor.__attrs = attrsMap;\n        constructor.__props = props;\n    }\n\n    return Object.keys(constructor.__attrs);\n}\n\nexport function withProps<T extends Constructor>(Base: T) {\n    return class extends Base {\n        __props: object = Object.create(null);\n        [name: string]: any;\n\n        static get observedAttributes(): string[] {\n            return defineProps(this);\n        }\n\n        attributeChangedCallback(name: string, _: string, newValue: string) {\n            const { __attrs: attributes, __props: properties } = <any>(\n                this.constructor\n            );\n            if (properties && attributes && name in properties) {\n                const propName = attributes[name];\n\n                this[propName] = properties[propName].type(newValue);\n            }\n        }\n    };\n}\n","import { TemplateInterface } from './types';\n\nexport function comment(data: string = ''): Comment {\n    return document.createComment(data);\n}\n\nexport function text(data: string = ''): Text {\n    return document.createTextNode(data);\n}\n\nexport function isNode(obj: any, type?: number): boolean {\n    return (\n        !!obj &&\n        !!(<Node>obj).nodeType &&\n        (!type || (<Node>obj).nodeType === type)\n    );\n}\n\nexport function isPrimitive(val: any) {\n    return val !== Object(val);\n}\n\nexport function replaceRange(newNode: Node, range: any) {\n    const [startNode, endNode] = <any>[].concat(range);\n\n    if (!startNode.parentNode) return;\n\n    if (endNode && startNode.nextSibling !== endNode) {\n        removeNodes(startNode.nextSibling!, endNode);\n    }\n\n    startNode.parentNode!.replaceChild(newNode, startNode);\n}\n\nexport function removeNodes(\n    startNode: Node,\n    endNode: Node | null = null,\n    parent: Node | null = startNode.parentNode!\n): void {\n    if (!parent) return;\n\n    while (startNode !== endNode) {\n        const nextNode = startNode.nextSibling!;\n        parent.removeChild(startNode);\n        startNode = nextNode;\n    }\n}\n\nexport function moveTemplate(\n    template: TemplateInterface,\n    after: Node,\n    parent: Node = after.parentNode!\n): void {\n    const [startNode, endNode] = template.range!;\n    const before = after.nextSibling!;\n\n    let node = startNode;\n    do {\n        const nextNode = node!.nextSibling!;\n        parent.insertBefore(node, before as Node);\n        node = nextNode;\n    } while (node !== endNode);\n    parent.insertBefore(endNode, before as Node);\n}\n\nexport function getNodeIndex(node: Node): number {\n    let index = 0;\n    while ((node = node.previousSibling!)) index++;\n    return index;\n}\n\nexport function getNodePath(node: Node): Array<number> {\n    const path: number[] = [];\n    while (node.parentNode) {\n        path.unshift(getNodeIndex(node));\n        node = node.parentNode;\n    }\n    return path;\n}\n\nexport function getNodeByPath(node: Node, path: Array<number>): Node {\n    for (let i = 0, l = path.length; i < l; i++)\n        node = node.childNodes[path[i]];\n\n    return node;\n}\n\nexport const TemplateSymbol = Symbol();\n\nexport function isSameTemplate(\n    t1: TemplateInterface,\n    t2: TemplateInterface\n): boolean {\n    return isTemplate(t1) && isTemplate(t2) && t1.strings === t2.strings;\n}\n\nexport function isTemplate(obj: any): boolean {\n    return obj && obj[TemplateSymbol];\n}\n\nexport const MARKER_PREFIX = `__${Math.random().toString().slice(2)}_`;\nexport const MARKER_RE = new RegExp(\n    `<!--${MARKER_PREFIX}(\\\\d+)-->|${MARKER_PREFIX}(\\\\d+)`\n);\n\nexport const TEXT_ELEMENT = /^(?:style|textarea)$/i;\n\nexport function markerNumber(value) {\n    const m = MARKER_RE.exec(value);\n    MARKER_RE.lastIndex = 0;\n\n    return m ? Number(m[1] || m[2]) : -1;\n}\n","export interface Expression {\n    update(value: any): void;\n    clear?(): void;\n}\n\nexport interface TemplateInterface {\n    update(values: any[]): void;\n    create(): DocumentFragment;\n    delete(): void;\n    range?: [Node, Node];\n    expressions?: Expression[];\n    values: any[];\n    strings?: TemplateStringsArray;\n    context?: string;\n    key?: string;\n    withKey(key: string): TemplateInterface;\n}\n\nexport type LinkSymbol = {\n    type: new (...args: any[]) => void;\n    name?: string;\n    namespaceURI?: string | null;\n    nodePath: Array<number>;\n};\n\nexport type CacheEntry = {\n    expressions: Array<LinkSymbol>;\n    content: DocumentFragment;\n};\n\nexport type TemplateArray = Map<string, TemplateInterface>;\n\nexport type SchedulerJob = {\n    task: Function;\n    args: any[];\n    scheduled?: boolean;\n    firstRun?: boolean;\n};\n\nexport type SchedulerQueue = Array<SchedulerJob>;\n\nexport const enum JobPriority {\n    Low = 0,\n    Normal,\n    High,\n    Callback\n}\n","import { SchedulerQueue, SchedulerJob, JobPriority } from './types';\n\nconst jobsQueue: SchedulerQueue = [];\nconst jobsQueueLow: SchedulerQueue = [];\nconst jobsQueueCallback: SchedulerQueue = [];\n\nconst JOB_WINDOW = 10;\nconst JOB_MAX_WAIT = 100;\nconst raf = window.requestAnimationFrame;\n\nlet flushPending = false;\nlet queueAge = 0;\nlet enabled = true;\n\nfunction flushQueue(queue, timeout: number): void {\n    let i = 0;\n    const l = queue.length;\n\n    while (Date.now() < timeout && i < l) {\n        const job = queue[i++];\n        job.task!(...job.args);\n\n        job.args = undefined;\n        job.scheduled = false;\n    }\n\n    queue.splice(0, i);\n}\n\nfunction flush() {\n    queueAge++;\n\n    const now = Date.now();\n    const timeSlice = JOB_WINDOW * Math.ceil(queueAge * (1.0 / JOB_MAX_WAIT));\n    const timeout = now + timeSlice;\n\n    flushQueue(jobsQueue, timeout);\n    flushQueue(jobsQueueLow, timeout);\n\n    if (jobsQueue.length > 0) {\n        jobsQueueLow.push(...jobsQueue);\n        jobsQueue.length = 0;\n    }\n\n    if (jobsQueueLow.length > 0) raf(flush);\n    else {\n        flushQueue(jobsQueueCallback, Number.MAX_SAFE_INTEGER);\n        flushPending = false;\n        queueAge = 0;\n    }\n}\n\nexport function setEnabled(value: boolean) {\n    enabled = value;\n}\n\nexport function enqueueJob(job: SchedulerJob, priority: JobPriority) {\n    job.scheduled = true;\n\n    if (priority === JobPriority.Normal) jobsQueue.push(job);\n    else if (priority === JobPriority.Low) jobsQueueLow.push(job);\n    else if (priority === JobPriority.Callback) jobsQueueCallback.push(job);\n\n    if (!flushPending) {\n        flushPending = true;\n        raf(flush);\n    }\n}\n\nexport function scheduled(\n    task: Function,\n    priority: JobPriority = JobPriority.Normal\n) {\n    const job: SchedulerJob = {\n        task,\n        args: [],\n        scheduled: false,\n        firstRun: true\n    };\n\n    return (...args) => {\n        if (job.firstRun || !enabled) {\n            job.firstRun = false;\n            task(...args);\n        } else {\n            job.args = args;\n            if (!job.scheduled) enqueueJob(job, priority);\n        }\n    };\n}\n","import { Expression, TemplateInterface, TemplateArray } from './types';\nimport {\n    isNode,\n    replaceRange,\n    isTemplate,\n    isSameTemplate,\n    moveTemplate,\n    text,\n    isPrimitive\n} from './utils';\nimport { scheduled } from './scheduler';\n\nexport class AttributeExpression implements Expression {\n    value?: any;\n\n    constructor(\n        public element: Element,\n        public name: string,\n        public namespaceURI: string | null\n    ) {}\n\n    update(newValue: any): void {\n        if (newValue === this.value) return;\n\n        this.requestUpdate(newValue);\n    }\n\n    requestUpdate = scheduled((newValue: any): void => {\n        const { name, element, namespaceURI } = this;\n\n        if ('ownerSVGElement' in <SVGElement>element) {\n            element.setAttributeNS(namespaceURI, name, newValue);\n        } else if (name in element) {\n            (element as any)[name] = newValue;\n        } else if (typeof newValue !== 'undefined') {\n            element.setAttribute(name, newValue);\n        } else {\n            element.hasAttribute(name) && element.removeAttribute(name);\n        }\n\n        this.value = newValue;\n    });\n}\n\nexport class NodeExpression implements Expression {\n    element: Node | TemplateInterface;\n    placeholder: Node;\n    value?: Node | TemplateInterface | TemplateArray;\n\n    constructor(element: Node) {\n        this.element = this.placeholder = element;\n    }\n\n    updateArray(items: TemplateInterface[]) {\n        this.replaceWith(this.placeholder);\n\n        const templates = this.value instanceof Map ? this.value : new Map();\n\n        let currentNode: Node = <Node>this.element;\n        const keys = new Set();\n        for (let i = 0, l = items.length; i < l; i++) {\n            const item = items[i];\n\n            const key: string = String(item.key || i);\n            let template = templates.get(key)!;\n\n            if (!template) {\n                const node: Node = item.create();\n                currentNode.parentNode!.insertBefore(\n                    node,\n                    currentNode.nextSibling\n                );\n\n                templates.set(key, (template = item));\n            } else if (!isSameTemplate(template, item)) {\n                replaceRange(item.create(), template.range);\n                templates.set(key, (template = item));\n            } else {\n                template.update(item.values);\n            }\n\n            if (currentNode.nextSibling !== template.range[0]) {\n                moveTemplate(template, currentNode);\n            }\n            currentNode = template.range[1];\n\n            keys.add(key);\n        }\n\n        templates.forEach((template, key, map) => {\n            if (!keys.has(key)) {\n                template.delete();\n                map.delete(key);\n            }\n        });\n\n        return templates;\n    }\n\n    replaceWith(newValue: Node | TemplateInterface | TemplateArray) {\n        const { element, value, placeholder } = this;\n\n        if (newValue == null) newValue = placeholder;\n\n        if (element !== newValue) {\n            if (value instanceof Map) {\n                value.forEach((template) => template.delete());\n                value.clear();\n            }\n\n            this.element = <any>newValue;\n\n            replaceRange(\n                isTemplate(newValue)\n                    ? (<TemplateInterface>newValue).create()\n                    : <Node>newValue,\n                isTemplate(element)\n                    ? (<TemplateInterface>element).range!\n                    : <Node>element\n            );\n        }\n    }\n\n    updateText(value: any) {\n        if (!isNode(this.element, Node.TEXT_NODE)) {\n            this.replaceWith(text());\n        }\n        (<Text>this.element).textContent = value;\n    }\n\n    updateTemplate(values: any[]) {\n        (<TemplateInterface>this.element).update(values);\n    }\n\n    update(newValue: any): void {\n        if (newValue === this.value) return;\n\n        this.requestUpdate(newValue);\n    }\n\n    requestUpdate = scheduled((newValue: any): void => {\n        if (isPrimitive(newValue)) {\n            this.updateText(newValue);\n        } else if (Array.isArray(newValue)) {\n            newValue = this.updateArray(newValue);\n        } else if (isSameTemplate(newValue, <TemplateInterface>this.element)) {\n            this.updateTemplate(newValue.values);\n        } else {\n            this.replaceWith(newValue);\n        }\n\n        this.value = newValue;\n    });\n}\n","import { LinkSymbol, Expression } from './types';\nimport { AttributeExpression, NodeExpression } from './expressions';\nimport {\n    getNodePath,\n    getNodeByPath,\n    text,\n    TEXT_ELEMENT,\n    MARKER_RE,\n    markerNumber,\n    isNode\n} from './utils';\n\nfunction treeWalkerFilter() {\n    return NodeFilter.FILTER_ACCEPT;\n}\n// fix(IE11): expect filter to be a function and not an object\n(<any>treeWalkerFilter).acceptNode = treeWalkerFilter;\n\nexport function linkAttributes(\n    element: Element,\n    linkedExpressions: LinkSymbol[]\n): void {\n    const attrs = element.attributes;\n    let i = attrs.length;\n\n    while (i--) {\n        const { name, value, namespaceURI } = attrs.item(i) as Attr;\n        const m = markerNumber(value);\n\n        if (~m) {\n            element.removeAttribute(name);\n            linkedExpressions[m] = {\n                type: AttributeExpression,\n                name,\n                namespaceURI,\n                nodePath: getNodePath(element)\n            };\n        }\n    }\n}\n\nexport function linkComment(node: Comment, linkedExpressions: LinkSymbol[]) {\n    const m = markerNumber(node.data);\n\n    if (~m) {\n        linkedExpressions[m] = {\n            type: NodeExpression,\n            nodePath: getNodePath(node)\n        };\n        node.nodeValue = '';\n    }\n}\n\nexport function linkTexts(\n    node: CharacterData,\n    linkedExpressions: LinkSymbol[]\n): void {\n    let m: RegExpExecArray | null;\n    while ((m = MARKER_RE.exec(node.data)) !== null) {\n        const keyNode: Text = text();\n        node = (<Text>node).splitText(m.index);\n        node.deleteData(0, m[0].length);\n\n        node.parentNode!.insertBefore(keyNode, node);\n\n        linkedExpressions[Number(m[1] || m[2])] = {\n            type: NodeExpression,\n            nodePath: getNodePath(keyNode)\n        };\n    }\n}\n\nexport function linkExpressions(root: DocumentFragment) {\n    const treeWalker = document.createTreeWalker(\n        root,\n        NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT,\n        treeWalkerFilter as any,\n        false\n    );\n\n    const linkedExpressions: Array<LinkSymbol> = [];\n\n    while (treeWalker.nextNode()) {\n        const node: any = treeWalker.currentNode;\n\n        if (isNode(node, Node.ELEMENT_NODE)) {\n            linkAttributes(node, linkedExpressions);\n            if (TEXT_ELEMENT.test(node.tagName)) {\n                for (const childNode of node.childNodes) {\n                    linkTexts(childNode, linkedExpressions);\n                }\n            }\n        } else linkComment(node, linkedExpressions);\n    }\n\n    return linkedExpressions;\n}\n\nexport function resolve(fragment: Node, symbols: LinkSymbol[]): Expression[] {\n    return symbols.map(\n        (symbol) =>\n            new symbol.type(\n                getNodeByPath(fragment, symbol.nodePath),\n                symbol.name,\n                symbol.namespaceURI\n            )\n    ) as any;\n}\n","import { Expression, CacheEntry } from './types';\nimport { linkExpressions, resolve } from './linker';\nimport { MARKER_PREFIX } from './utils';\n// import { TEXT_ELEMENT } from './utils';\n\nconst TemplateCache: WeakMap<TemplateStringsArray, CacheEntry> = new WeakMap();\n\nfunction createCacheEntry(html: string, context?: string): CacheEntry {\n    const template = document.createElement('template');\n    template.innerHTML = context ? `<${context}>${html}</${context}>` : html;\n\n    let content = template.content;\n    if (context) {\n        const range = document.createRange();\n        range.selectNodeContents(content.firstChild!);\n        content = range.extractContents();\n    }\n\n    return {\n        content,\n        expressions: linkExpressions(content)\n    };\n}\n\nfunction toHTML(strings: TemplateStringsArray) {\n    /**\n     * Use this regex to choose the right marker\n     * 1. ...<tag...\n     * 2. ...<tag...>\n     * 3. ...>...\n     * 4. ......\n     */\n    const tagName = `[0-9a-z-]+`,\n        attributeName = `[^<\\\\s\\\\0\"'>\\\\/=]+`,\n        attributeValue = `(?:\"[^\"]*\"?|'[^']*'?|[^\\\\s'\">]*)`,\n        attribute = `\\\\s*${attributeName}(?:\\\\s*=\\\\s*${attributeValue})?`,\n        tagOpen = `<(${tagName})(?:${attribute})*\\\\s*(>?)`;\n    const NODE_RE = new RegExp(`^[^]*${tagOpen}|[^]*(>)[^]*|[^]*$`, 'i');\n    const enum MatchType {\n        TagName = 1,\n        ClosedTag = 2,\n        EndTag = 3\n    }\n\n    let isAttribute = false;\n\n    let html = strings[0];\n    for (let i = 0, l = strings.length; i < l - 1; i++) {\n        const marker = `${MARKER_PREFIX}${i}`;\n        const match = strings[i].match(NODE_RE)!;\n\n        if (match[MatchType.TagName]) {\n            isAttribute = !match[MatchType.ClosedTag];\n        } else if (match[MatchType.EndTag]) {\n            isAttribute = false;\n        }\n\n        html += (isAttribute ? marker : `<!--${marker}-->`) + strings[i + 1];\n    }\n\n    return html;\n}\n\nexport function parseTemplate(\n    strings: TemplateStringsArray,\n    context?: string\n): { fragment: DocumentFragment; expressions: Expression[] } {\n    /**\n     * https://tc39.github.io/ecma262/#sec-gettemplateobject\n     * [...]The template objects are frozen and the same template object is\n     * used each time a specific tagged Template is evaluated[...]\n     */\n    let cacheEntry: CacheEntry = TemplateCache.get(strings)!;\n\n    if (!cacheEntry) {\n        TemplateCache.set(\n            strings,\n            (cacheEntry = createCacheEntry(toHTML(strings), context))\n        );\n    }\n\n    const fragment = document.importNode(cacheEntry.content, true);\n    const expressions = resolve(fragment, cacheEntry.expressions);\n\n    return {\n        fragment,\n        expressions\n    };\n}\n","import { TemplateInterface, Expression } from './types';\nimport { parseTemplate } from './parser';\nimport { TemplateSymbol, removeNodes, text } from './utils';\n\nexport class Template implements TemplateInterface {\n    [TemplateSymbol] = true;\n    values: any[];\n    strings: TemplateStringsArray;\n    range?: [Node, Node];\n    expressions?: Expression[];\n    context?: string;\n    key?: any;\n\n    constructor(\n        strings: TemplateStringsArray,\n        values: any[],\n        context?: string\n    ) {\n        this.values = values;\n        this.strings = strings;\n        this.context = context;\n    }\n\n    withKey(key: any) {\n        this.key = key;\n        return this;\n    }\n\n    update(values: any[]) {\n        for (let i = 0; i < values.length; i++) {\n            if (this.expressions![i])\n                this.expressions![i].update(values[i]);\n        }\n    }\n\n    delete() {\n        removeNodes(this.range![0], this.range![1].nextSibling);\n        this.range = undefined;\n        this.expressions = undefined;\n    }\n\n    create(): DocumentFragment {\n        const { fragment, expressions } = parseTemplate(\n            this.strings,\n            this.context\n        );\n        this.expressions = expressions;\n        this.range = [\n            fragment.insertBefore(text(), fragment.firstChild),\n            fragment.appendChild(text())\n        ];\n\n        this.update(this.values);\n\n        return fragment;\n    }\n}\n","export { Template } from './template';\nexport { scheduled } from './scheduler';\nexport * from './types';\n\nimport { TemplateInterface } from './types';\nimport { Template } from './template';\nimport { removeNodes } from './utils';\n\nexport function render(template: TemplateInterface, container: HTMLElement) {\n    if (!render.instances.has(container)) {\n        render.instances.set(container, template);\n        removeNodes(container.firstChild!, null, container);\n\n        container.appendChild(template.create());\n    }\n    return render.instances.get(container)!.update(template.values);\n}\nrender.instances = new WeakMap<HTMLElement, TemplateInterface>();\n\nexport function html(strings: any, ...values: any[]): Template {\n    return new Template(strings, values);\n}\n\nexport function svg(strings: any, ...values: any[]): Template {\n    return new Template(strings, values, 'svg');\n}\n","import { render, Template, scheduled, JobPriority } from '@tiny-lit/core';\nimport {\n    Constructor,\n    Element as ElementInterface,\n} from './types';\n\nexport function withElement<T extends Constructor<HTMLElement>>(Base: T) {\n    return class extends Base implements ElementInterface {\n        state: any = {};\n        rendered: boolean = false;\n        renderCallbacks: Array<Function> = [];\n        renderRoot: HTMLElement | ShadowRoot = this;\n\n        attachShadow(shadowRootInitDict: ShadowRootInit) {\n            return (this.renderRoot = super.attachShadow.call(\n                this,\n                shadowRootInitDict\n            ));\n        }\n\n        connectedCallback() {\n            this.update();\n        }\n\n        setState(nextState: object | Function, callback?: Function): void {\n            const state: any = this.state;\n\n            this.state = {\n                ...state,\n                ...(typeof nextState === 'function'\n                    ? nextState(state, this)\n                    : nextState)\n            };\n\n            callback && this.renderCallbacks.push(callback);\n\n            this.update();\n        }\n\n        render(): Template | null {\n            return null;\n        }\n\n        firstUpdated(){}\n\n        beforeUpdate(){}\n\n        updated() {}\n\n        _onUpdated = scheduled(() => {\n            while (this.renderCallbacks.length) this.renderCallbacks.shift()!();\n\n            this.rendered ? this.updated() : this.firstUpdated();\n            this.rendered = true;\n        }, JobPriority.Callback)\n\n        update() {\n            this.beforeUpdate();\n\n            const template = this.render();\n            template && render(template, this.renderRoot as any);\n\n            this._onUpdated();\n        };\n    };\n}\n","import { withProps } from './withProps';\nimport { withElement } from './withElement';\n\nexport const Element = withProps(withElement(HTMLElement));\n","export { Element } from './Element';\nexport { withProps } from './withProps';\nexport { withElement } from './withElement';\n\nexport * from '@tiny-lit/core';","export function comment(data = '') {\n    return document.createComment(data);\n}\nexport function text(data = '') {\n    return document.createTextNode(data);\n}\nexport function isNode(obj, type) {\n    return (!!obj &&\n        !!obj.nodeType &&\n        (!type || obj.nodeType === type));\n}\nexport function isPrimitive(val) {\n    return val !== Object(val);\n}\nexport function replaceRange(newNode, range) {\n    const [startNode, endNode] = [].concat(range);\n    if (!startNode.parentNode)\n        return;\n    if (endNode && startNode.nextSibling !== endNode) {\n        removeNodes(startNode.nextSibling, endNode);\n    }\n    startNode.parentNode.replaceChild(newNode, startNode);\n}\nexport function removeNodes(startNode, endNode = null, parent = startNode.parentNode) {\n    if (!parent)\n        return;\n    while (startNode !== endNode) {\n        const nextNode = startNode.nextSibling;\n        parent.removeChild(startNode);\n        startNode = nextNode;\n    }\n}\nexport function moveTemplate(template, after, parent = after.parentNode) {\n    const [startNode, endNode] = template.range;\n    const before = after.nextSibling;\n    let node = startNode;\n    do {\n        const nextNode = node.nextSibling;\n        parent.insertBefore(node, before);\n        node = nextNode;\n    } while (node !== endNode);\n    parent.insertBefore(endNode, before);\n}\nexport function getNodeIndex(node) {\n    let index = 0;\n    while ((node = node.previousSibling))\n        index++;\n    return index;\n}\nexport function getNodePath(node) {\n    const path = [];\n    while (node.parentNode) {\n        path.unshift(getNodeIndex(node));\n        node = node.parentNode;\n    }\n    return path;\n}\nexport function getNodeByPath(node, path) {\n    for (let i = 0, l = path.length; i < l; i++)\n        node = node.childNodes[path[i]];\n    return node;\n}\nexport const TemplateSymbol = Symbol();\nexport function isSameTemplate(t1, t2) {\n    return isTemplate(t1) && isTemplate(t2) && t1.strings === t2.strings;\n}\nexport function isTemplate(obj) {\n    return obj && obj[TemplateSymbol];\n}\nexport const MARKER_PREFIX = `__${Math.random().toString().slice(2)}_`;\nexport const MARKER_RE = new RegExp(`<!--${MARKER_PREFIX}(\\\\d+)-->|${MARKER_PREFIX}(\\\\d+)`);\nexport const TEXT_ELEMENT = /^(?:style|textarea)$/i;\nexport function markerNumber(value) {\n    const m = MARKER_RE.exec(value);\n    MARKER_RE.lastIndex = 0;\n    return m ? Number(m[1] || m[2]) : -1;\n}\n","const jobsQueue = [];\nconst jobsQueueLow = [];\nconst JOB_WINDOW = 10;\nconst JOB_MAX_WAIT = 100;\nconst raf = window.requestAnimationFrame;\nlet flushPending = false;\nlet queueAge = 0;\nlet enabled = true;\nfunction flushQueue(queue, timeout) {\n    let i = 0;\n    const l = queue.length;\n    while (Date.now() < timeout && i < l) {\n        const job = queue[i++];\n        job.task(...job.args);\n        job.args = undefined;\n        job.scheduled = false;\n    }\n    queue.splice(0, i);\n}\nfunction flush() {\n    queueAge++;\n    const now = Date.now();\n    const timeSlice = JOB_WINDOW * Math.ceil(queueAge * (1.0 / JOB_MAX_WAIT));\n    const timeout = now + timeSlice;\n    flushQueue(jobsQueue, timeout);\n    flushQueue(jobsQueueLow, timeout);\n    if (jobsQueue.length > 0) {\n        jobsQueueLow.push(...jobsQueue);\n        jobsQueue.length = 0;\n    }\n    if (jobsQueueLow.length > 0)\n        raf(flush);\n    else {\n        flushPending = false;\n        queueAge = 0;\n    }\n}\nexport function setEnabled(value) {\n    enabled = value;\n}\nexport function enqueueJob(job, priority) {\n    job.scheduled = true;\n    if (priority === 1)\n        jobsQueue.push(job);\n    else if (priority === 0)\n        jobsQueueLow.push(job);\n    if (!flushPending) {\n        flushPending = true;\n        raf(flush);\n    }\n}\nexport function scheduled(task, priority = 1) {\n    const job = {\n        task,\n        args: [],\n        scheduled: false,\n        firstRun: true\n    };\n    return (...args) => {\n        if (job.firstRun || !enabled) {\n            job.firstRun = false;\n            task(...args);\n        }\n        else {\n            job.args = args;\n            if (!job.scheduled)\n                enqueueJob(job, priority);\n        }\n    };\n}\n","import { isNode, replaceRange, isTemplate, isSameTemplate, moveTemplate, text, isPrimitive } from './utils';\nimport { scheduled } from './scheduler';\nexport class AttributeExpression {\n    constructor(element, name, namespaceURI) {\n        this.element = element;\n        this.name = name;\n        this.namespaceURI = namespaceURI;\n        this.requestUpdate = scheduled((newValue) => {\n            const { name, element, namespaceURI } = this;\n            if ('ownerSVGElement' in element) {\n                element.setAttributeNS(namespaceURI, name, newValue);\n            }\n            else if (name in element) {\n                element[name] = newValue;\n            }\n            else if (typeof newValue !== 'undefined') {\n                element.setAttribute(name, newValue);\n            }\n            else {\n                element.hasAttribute(name) && element.removeAttribute(name);\n            }\n            this.value = newValue;\n        });\n    }\n    update(newValue) {\n        if (newValue === this.value)\n            return;\n        this.requestUpdate(newValue);\n    }\n}\nexport class NodeExpression {\n    constructor(element) {\n        this.requestUpdate = scheduled((newValue) => {\n            if (isPrimitive(newValue)) {\n                this.updateText(newValue);\n            }\n            else if (Array.isArray(newValue)) {\n                newValue = this.updateArray(newValue);\n            }\n            else if (isSameTemplate(newValue, this.element)) {\n                this.updateTemplate(newValue.values);\n            }\n            else {\n                this.replaceWith(newValue);\n            }\n            this.value = newValue;\n        });\n        this.element = this.placeholder = element;\n    }\n    updateArray(items) {\n        this.replaceWith(this.placeholder);\n        const templates = this.value instanceof Map ? this.value : new Map();\n        let currentNode = this.element;\n        const keys = new Set();\n        for (let i = 0, l = items.length; i < l; i++) {\n            const item = items[i];\n            const key = String(item.key || i);\n            let template = templates.get(key);\n            if (!template) {\n                const node = item.create();\n                currentNode.parentNode.insertBefore(node, currentNode.nextSibling);\n                templates.set(key, (template = item));\n            }\n            else if (!isSameTemplate(template, item)) {\n                replaceRange(item.create(), template.range);\n                templates.set(key, (template = item));\n            }\n            else {\n                template.update(item.values);\n            }\n            if (currentNode.nextSibling !== template.range[0]) {\n                moveTemplate(template, currentNode);\n            }\n            currentNode = template.range[1];\n            keys.add(key);\n        }\n        templates.forEach((template, key, map) => {\n            if (!keys.has(key)) {\n                template.delete();\n                map.delete(key);\n            }\n        });\n        return templates;\n    }\n    replaceWith(newValue) {\n        const { element, value, placeholder } = this;\n        if (newValue == null)\n            newValue = placeholder;\n        if (element !== newValue) {\n            if (value instanceof Map) {\n                value.forEach((template) => template.delete());\n                value.clear();\n            }\n            this.element = newValue;\n            replaceRange(isTemplate(newValue)\n                ? newValue.create()\n                : newValue, isTemplate(element)\n                ? element.range\n                : element);\n        }\n    }\n    updateText(value) {\n        if (!isNode(this.element, Node.TEXT_NODE)) {\n            this.replaceWith(text());\n        }\n        this.element.textContent = value;\n    }\n    updateTemplate(values) {\n        this.element.update(values);\n    }\n    update(newValue) {\n        if (newValue === this.value)\n            return;\n        this.requestUpdate(newValue);\n    }\n}\n","import { AttributeExpression, NodeExpression } from './expressions';\nimport { getNodePath, getNodeByPath, text, TEXT_ELEMENT, MARKER_RE, markerNumber, isNode } from './utils';\nfunction treeWalkerFilter() {\n    return NodeFilter.FILTER_ACCEPT;\n}\ntreeWalkerFilter.acceptNode = treeWalkerFilter;\nexport function linkAttributes(element, linkedExpressions) {\n    const attrs = element.attributes;\n    let i = attrs.length;\n    while (i--) {\n        const { name, value, namespaceURI } = attrs.item(i);\n        const m = markerNumber(value);\n        if (~m) {\n            element.removeAttribute(name);\n            linkedExpressions[m] = {\n                type: AttributeExpression,\n                name,\n                namespaceURI,\n                nodePath: getNodePath(element)\n            };\n        }\n    }\n}\nexport function linkComment(node, linkedExpressions) {\n    const m = markerNumber(node.data);\n    if (~m) {\n        linkedExpressions[m] = {\n            type: NodeExpression,\n            nodePath: getNodePath(node)\n        };\n        node.nodeValue = '';\n    }\n}\nexport function linkTexts(node, linkedExpressions) {\n    let m;\n    while ((m = MARKER_RE.exec(node.data)) !== null) {\n        const keyNode = text();\n        node = node.splitText(m.index);\n        node.deleteData(0, m[0].length);\n        node.parentNode.insertBefore(keyNode, node);\n        linkedExpressions[Number(m[1] || m[2])] = {\n            type: NodeExpression,\n            nodePath: getNodePath(keyNode)\n        };\n    }\n}\nexport function linkExpressions(root) {\n    const treeWalker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT, treeWalkerFilter, false);\n    const linkedExpressions = [];\n    while (treeWalker.nextNode()) {\n        const node = treeWalker.currentNode;\n        if (isNode(node, Node.ELEMENT_NODE)) {\n            linkAttributes(node, linkedExpressions);\n            if (TEXT_ELEMENT.test(node.tagName)) {\n                for (const childNode of node.childNodes) {\n                    linkTexts(childNode, linkedExpressions);\n                }\n            }\n        }\n        else\n            linkComment(node, linkedExpressions);\n    }\n    return linkedExpressions;\n}\nexport function resolve(fragment, symbols) {\n    return symbols.map((symbol) => new symbol.type(getNodeByPath(fragment, symbol.nodePath), symbol.name, symbol.namespaceURI));\n}\n","import { linkExpressions, resolve } from './linker';\nimport { MARKER_PREFIX } from './utils';\nconst TemplateCache = new WeakMap();\nfunction createCacheEntry(html, context) {\n    const template = document.createElement('template');\n    template.innerHTML = context ? `<${context}>${html}</${context}>` : html;\n    let content = template.content;\n    if (context) {\n        const range = document.createRange();\n        range.selectNodeContents(content.firstChild);\n        content = range.extractContents();\n    }\n    return {\n        content,\n        expressions: linkExpressions(content)\n    };\n}\nfunction toHTML(strings) {\n    const tagName = `[0-9a-z-]+`, attributeName = `[^<\\\\s\\\\0\"'>\\\\/=]+`, attributeValue = `(?:\"[^\"]*\"?|'[^']*'?|[^\\\\s'\">]*)`, attribute = `\\\\s*${attributeName}(?:\\\\s*=\\\\s*${attributeValue})?`, tagOpen = `<(${tagName})(?:${attribute})*\\\\s*(>?)`;\n    const NODE_RE = new RegExp(`^[^]*${tagOpen}|[^]*(>)[^]*|[^]*$`, 'i');\n    let isAttribute = false;\n    let html = strings[0];\n    for (let i = 0, l = strings.length; i < l - 1; i++) {\n        const marker = `${MARKER_PREFIX}${i}`;\n        const match = strings[i].match(NODE_RE);\n        if (match[1]) {\n            isAttribute = !match[2];\n        }\n        else if (match[3]) {\n            isAttribute = false;\n        }\n        html += (isAttribute ? marker : `<!--${marker}-->`) + strings[i + 1];\n    }\n    return html;\n}\nexport function parseTemplate(strings, context) {\n    let cacheEntry = TemplateCache.get(strings);\n    if (!cacheEntry) {\n        TemplateCache.set(strings, (cacheEntry = createCacheEntry(toHTML(strings), context)));\n    }\n    const fragment = document.importNode(cacheEntry.content, true);\n    const expressions = resolve(fragment, cacheEntry.expressions);\n    return {\n        fragment,\n        expressions\n    };\n}\n","var _a;\nimport { parseTemplate } from './parser';\nimport { TemplateSymbol, removeNodes, text } from './utils';\nexport class Template {\n    constructor(strings, values, context) {\n        this[_a] = true;\n        this.values = values;\n        this.strings = strings;\n        this.context = context;\n    }\n    withKey(key) {\n        this.key = key;\n        return this;\n    }\n    update(values) {\n        for (let i = 0; i < values.length; i++) {\n            if (this.expressions[i])\n                this.expressions[i].update(values[i]);\n        }\n    }\n    delete() {\n        removeNodes(this.range[0], this.range[1].nextSibling);\n        this.range = undefined;\n        this.expressions = undefined;\n    }\n    create() {\n        const { fragment, expressions } = parseTemplate(this.strings, this.context);\n        this.expressions = expressions;\n        this.range = [\n            fragment.insertBefore(text(), fragment.firstChild),\n            fragment.appendChild(text())\n        ];\n        this.update(this.values);\n        return fragment;\n    }\n}\n_a = TemplateSymbol;\n","export { Template } from './template';\nexport { scheduled } from './scheduler';\nimport { Template } from './template';\nimport { removeNodes } from './utils';\nexport function render(template, container) {\n    if (!render.instances.has(container)) {\n        render.instances.set(container, template);\n        removeNodes(container.firstChild, null, container);\n        container.appendChild(template.create());\n    }\n    else {\n        render.instances.get(container).update(template.values);\n    }\n}\nrender.instances = new WeakMap();\nexport function html(strings, ...values) {\n    return new Template(strings, values);\n}\nexport function svg(strings, ...values) {\n    return new Template(strings, values, 'svg');\n}\n","import { html } from '@tiny-lit/core';\n\nexport default html`\n<style>\n    button {\n        margin: 0;\n        padding: 0;\n        border: 0;\n        background: none;\n        font-size: 100%;\n        vertical-align: baseline;\n        font-family: inherit;\n        font-weight: inherit;\n        color: inherit;\n        -webkit-appearance: none;\n        appearance: none;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n\n    .todoapp {\n        font: 14px 'Helvetica Neue', Helvetica, Arial, sans-serif;\n        line-height: 1.4em;\n        background: #f5f5f5;\n        color: #4d4d4d;\n        min-width: 230px;\n        max-width: 550px;\n        margin: 0 auto;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        font-weight: 300;\n    }\n\n    :focus {\n        outline: 0;\n    }\n\n    .hidden {\n        display: none;\n    }\n\n    .todoapp {\n        background: #fff;\n        margin: 130px auto;\n        position: relative;\n        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2),\n                    0 25px 50px 0 rgba(0, 0, 0, 0.1);\n    }\n\n    .todoapp input::-webkit-input-placeholder {\n        font-style: italic;\n        font-weight: 300;\n        color: #e6e6e6;\n    }\n\n    .todoapp input::-moz-placeholder {\n        font-style: italic;\n        font-weight: 300;\n        color: #e6e6e6;\n    }\n\n    .todoapp input::input-placeholder {\n        font-style: italic;\n        font-weight: 300;\n        color: #e6e6e6;\n    }\n\n    .todoapp h1 {\n        position: absolute;\n        top: -155px;\n        width: 100%;\n        font-size: 100px;\n        font-weight: 100;\n        text-align: center;\n        color: rgb(var(--primary));\n        -webkit-text-rendering: optimizeLegibility;\n        -moz-text-rendering: optimizeLegibility;\n        text-rendering: optimizeLegibility;\n    }\n\n    .new-todo,\n    .edit {\n        position: relative;\n        margin: 0;\n        width: 100%;\n        font-size: 24px;\n        font-family: inherit;\n        font-weight: inherit;\n        line-height: 1.4em;\n        border: 0;\n        color: inherit;\n        padding: 6px;\n        border: 1px solid #999;\n        box-shadow: inset 0 -1px 5px 0 rgba(0, 0, 0, 0.2);\n        box-sizing: border-box;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n\n    .new-todo {\n        padding: 16px 16px 16px 60px;\n        border: none;\n        background: rgba(0, 0, 0, 0.003);\n        box-shadow: inset 0 -2px 1px rgba(0,0,0,0.03);\n    }\n\n    .main {\n        position: relative;\n        z-index: 2;\n        border-top: 1px solid #e6e6e6;\n    }\n\n    .toggle-all {\n        text-align: center;\n        border: none; /* Mobile Safari */\n        opacity: 0;\n        position: absolute;\n    }\n\n    .toggle-all + label {\n        width: 60px;\n        height: 34px;\n        font-size: 0;\n        position: absolute;\n        top: -52px;\n        left: -13px;\n        -webkit-transform: rotate(90deg);\n        transform: rotate(90deg);\n    }\n\n    .toggle-all + label:before {\n        content: '';\n        font-size: 22px;\n        color: #e6e6e6;\n        padding: 10px 27px 10px 27px;\n    }\n\n    .toggle-all:checked + label:before {\n        color: #737373;\n    }\n\n    .todo-list {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n    }\n\n    .todo-list li {\n        position: relative;\n        font-size: 24px;\n        border-bottom: 1px solid #ededed;\n    }\n\n    .todo-list li:last-child {\n        border-bottom: none;\n    }\n\n    .todo-list li.editing {\n        border-bottom: none;\n        padding: 0;\n    }\n\n    .todo-list li.editing .edit {\n        display: block;\n        width: 506px;\n        padding: 12px 16px;\n        margin: 0 0 0 43px;\n    }\n\n    .todo-list li.editing .view {\n        display: none;\n    }\n\n    .todo-list li .toggle {\n        text-align: center;\n        width: 40px;\n        /* auto, since non-WebKit browsers doesn't support input styling */\n        height: auto;\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        margin: auto 0;\n        border: none; /* Mobile Safari */\n        -webkit-appearance: none;\n        appearance: none;\n    }\n\n    .todo-list li .toggle {\n        opacity: 0;\n    }\n\n    .todo-list li .toggle + label {\n        /*\n            Firefox requires '#' to be escaped - https://bugzilla.mozilla.org/show_bug.cgi?id=922433\n            IE and Edge requires *everything* to be escaped to render, so we do that instead of just the '#' - https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/7157459/\n        */\n        background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23ededed%22%20stroke-width%3D%223%22/%3E%3C/svg%3E');\n        background-repeat: no-repeat;\n        background-position: center left;\n    }\n\n    .todo-list li .toggle:checked + label {\n        background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23bddad5%22%20stroke-width%3D%223%22/%3E%3Cpath%20fill%3D%22%235dc2af%22%20d%3D%22M72%2025L42%2071%2027%2056l-4%204%2020%2020%2034-52z%22/%3E%3C/svg%3E');\n    }\n\n    .todo-list li label {\n        word-break: break-all;\n        padding: 15px 15px 15px 60px;\n        display: block;\n        line-height: 1.2;\n        transition: color 0.4s;\n    }\n\n    .todo-list li.completed label {\n        color: #d9d9d9;\n        text-decoration: line-through;\n    }\n\n    .todo-list li .destroy {\n        display: none;\n        position: absolute;\n        top: 0;\n        right: 10px;\n        bottom: 0;\n        width: 40px;\n        height: 40px;\n        margin: auto 0;\n        font-size: 30px;\n        color: #cc9a9a;\n        margin-bottom: 11px;\n        transition: color 0.2s ease-out;\n    }\n\n    .todo-list li .destroy:hover {\n        color: #af5b5e;\n    }\n\n    .todo-list li .destroy:after {\n        content: '';\n    }\n\n    .todo-list li:hover .destroy {\n        display: block;\n    }\n\n    .todo-list li .edit {\n        display: none;\n    }\n\n    .todo-list li.editing:last-child {\n        margin-bottom: -1px;\n    }\n\n    .footer {\n        color: #777;\n        padding: 10px 15px;\n        height: 20px;\n        text-align: center;\n        border-top: 1px solid #e6e6e6;\n    }\n\n    .footer:before {\n        content: '';\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        height: 50px;\n        overflow: hidden;\n        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2),\n                    0 8px 0 -3px #f6f6f6,\n                    0 9px 1px -3px rgba(0, 0, 0, 0.2),\n                    0 16px 0 -6px #f6f6f6,\n                    0 17px 2px -6px rgba(0, 0, 0, 0.2);\n    }\n\n    .todo-count {\n        float: left;\n        text-align: left;\n    }\n\n    .todo-count strong {\n        font-weight: 300;\n    }\n\n    .filters {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n        position: absolute;\n        right: 0;\n        left: 0;\n    }\n\n    .filters li {\n        display: inline;\n    }\n\n    .filters li a {\n        color: inherit;\n        margin: 3px;\n        padding: 3px 7px;\n        text-decoration: none;\n        border: 1px solid transparent;\n        border-radius: 3px;\n    }\n\n    .filters li a:hover {\n        border-color: rgba(175, 47, 47, 0.1);\n    }\n\n    .filters li a.selected {\n        border-color: rgba(175, 47, 47, 0.2);\n    }\n\n    .clear-completed,\n    html .clear-completed:active {\n        float: right;\n        position: relative;\n        line-height: 20px;\n        text-decoration: none;\n        cursor: pointer;\n    }\n\n    .clear-completed:hover {\n        text-decoration: underline;\n    }\n\n    .shuffle {\n        margin-right: 5px;\n    }\n\n    .info {\n        margin: 65px auto 0;\n        color: #bfbfbf;\n        font-size: 10px;\n        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);\n        text-align: center;\n    }\n\n    .info p {\n        line-height: 1;\n    }\n\n    .info a {\n        color: inherit;\n        text-decoration: none;\n        font-weight: 400;\n    }\n\n    .info a:hover {\n        text-decoration: underline;\n    }\n\n    /*\n        Hack to remove background from Mobile Safari.\n        Can't use it globally since it destroys checkboxes in Firefox\n    */\n    @media screen and (-webkit-min-device-pixel-ratio:0) {\n        .toggle-all,\n        .todo-list li .toggle {\n            background: none;\n        }\n\n        .todo-list li .toggle {\n            height: 40px;\n        }\n    }\n\n    @media (max-width: 430px) {\n        .footer {\n            height: 50px;\n        }\n\n        .filters {\n            bottom: 10px;\n        }\n    }\n</style>\n`;\n","const defer = window.requestIdleCallback || window.requestAnimationFrame;\nconst isExpired = (entry, expire = 0) => !!expire && entry.timestamp + expire < Date.now();\nconst isSameVersion = (entry, version) => entry.version === version;\nconst setItem = (key, data, { version, storage }) => {\n    const entry = {\n        timestamp: Date.now(),\n        data,\n        version,\n    };\n    defer(() => storage.setItem(key, JSON.stringify(entry)));\n    return entry;\n};\nconst getItem = (key, options, cached) => {\n    const { storage, version, expire } = options;\n    const entry = !cached ? JSON.parse(storage.getItem(key)) : cached;\n    if (!entry || isExpired(entry, expire) || !isSameVersion(entry, version)) {\n        removeItem(key, options);\n        return null;\n    }\n    return entry;\n};\nconst removeItem = (key, { storage }) => {\n    defer(() => storage.removeItem(key));\n};\nexport function getBucket(name, options) {\n    options = Object.assign({ storage: localStorage }, options);\n    let cached = null;\n    return [\n        () => {\n            cached = getItem(name, options, cached);\n            return cached ? cached.data : options.defaultValue;\n        },\n        (value) => {\n            cached = setItem(name, value, options);\n        },\n        () => {\n            removeItem(name, options);\n            cached = null;\n        },\n    ];\n}\n","import { Element, html } from '@tiny-lit/element';\nimport style from './style.js';\nimport { getBucket } from 'secchiojs';\n\nfunction prevented(f) {\n    return (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        f(e);\n    };\n}\n\nconst [getTodos, setTodos] = getBucket('todoMvc', {\n    version: 1,\n    defaultValue: {\n        todos: [],\n        filter: null\n    }\n});\n\nfunction shuffle(array) {\n    let counter = array.length;\n\n    // While there are elements in the array\n    while (counter > 0) {\n        // Pick a random index\n        let index = Math.floor(Math.random() * counter);\n\n        // Decrease counter by 1\n        counter--;\n\n        // And swap the last element with it\n        let temp = array[counter];\n        array[counter] = array[index];\n        array[index] = temp;\n    }\n\n    return array;\n}\n\nclass TodoMVC extends Element {\n    constructor() {\n        super();\n        this.state = getTodos();\n        this.attachShadow({ mode: 'open' });\n    }\n\n    static get is() {\n        return 'todo-mvc';\n    }\n\n    setState(nextState) {\n        super.setState(nextState);\n        setTodos(this.state);\n    }\n\n    setFilter(completed) {\n        this.setState({ filter: completed });\n    }\n\n    handleAddTodo(e) {\n        this.setState({\n            todos: [\n                ...this.state.todos,\n                {\n                    text: e.target.elements[0].value,\n                    completed: false,\n                    id: Math.random().toString().substr(2)\n                }\n            ]\n        });\n        e.target.reset();\n    }\n\n    handleDeleteTodo(remove) {\n        this.setState({\n            todos: [...this.state.todos.filter((todo) => todo !== remove)]\n        });\n    }\n\n    switchCompleted(index) {\n        return prevented(() => {\n            const todos = this.state.todos;\n\n            todos[index].completed = !todos[index].completed;\n            this.setState({\n                todos: [...todos]\n            });\n        });\n    }\n\n    handleClearCompleted() {\n        this.setState({\n            todos: [...this.state.todos.filter((todo) => !todo.completed)]\n        });\n    }\n\n    connectedCallback() {\n        console.time('render');\n        this.update();\n    }\n\n    firstUpdated() {\n        console.timeEnd('render');\n    }\n\n    render() {\n        const { filter, todos } = this.state;\n\n        return html`\n            ${style}\n            <section class=\"todoapp body\">\n                <header class=\"header\">\n                    <h1>todos</h1>\n                    <form onSubmit=${prevented((e) => this.handleAddTodo(e))}>\n                        <input\n                            class=\"new-todo\"\n                            placeholder=\"What needs to be done?\"\n                            autofocus\n                        />\n                    </form>\n                </header>\n                <!-- This section should be hidden by default and shown when there are todos -->\n                <section class=\"main\">\n                    <input id=\"toggle-all\" class=\"toggle-all\" type=\"checkbox\" />\n                    <label for=\"toggle-all\">Mark all as complete</label>\n                    <ul class=\"todo-list\">\n                        <!-- These are here just to show the structure of the list items -->\n                        <!-- List items should get the class \\`editing\\` when editing and \\`completed\\` when marked as completed -->\n                        ${todos\n                            .map((todo, index) => ((todo.index = index), todo))\n                            .filter(\n                                (todo) =>\n                                    filter === null || todo.completed === filter\n                            )\n                            .map((todo) =>\n                                html`\n                                    <li\n                                        class=${todo.completed\n                                            ? 'completed'\n                                            : ''}\n                                    >\n                                        <div class=\"view\">\n                                            <input\n                                                class=\"toggle\"\n                                                type=\"checkbox\"\n                                                checked=${todo.completed}\n                                                onClick=${this.switchCompleted(\n                                                    todo.index\n                                                )}\n                                            />\n                                            <label\n                                                onClick=${this.switchCompleted(\n                                                    todo.index\n                                                )}\n                                                >${todo.text}</label\n                                            >\n                                            <button\n                                                class=\"destroy\"\n                                                onClick=${prevented(() =>\n                                                    this.handleDeleteTodo(todo)\n                                                )}\n                                            ></button>\n                                        </div>\n                                        <input\n                                            class=\"edit\"\n                                            value=${todo.text}\n                                        />\n                                    </li>\n                                `.withKey(todo.id)\n                            )}\n                    </ul>\n                </section>\n                <!-- This footer should hidden by default and shown when there are todos -->\n                <footer class=\"footer\">\n                    <!-- This should be \\`0 items left\\` by default -->\n                    <span class=\"todo-count\">\n                        <strong\n                            >${todos.filter((todo) => !todo.completed).length}\n                        </strong>\n                        item left\n                    </span>\n\n                    <ul class=\"filters\">\n                        <li>\n                            <a\n                                class=${filter === null && 'selected'}\n                                href=\"#/\"\n                                onClick=${prevented(() => this.setFilter(null))}\n                            >\n                                All\n                            </a>\n                        </li>\n                        <li>\n                            <a\n                                class=${filter === false && 'selected'}\n                                href=\"#/active\"\n                                onClick=${prevented(() =>\n                                    this.setFilter(false)\n                                )}\n                            >\n                                Active\n                            </a>\n                        </li>\n                        <li>\n                            <a\n                                class=${filter && 'selected'}\n                                href=\"#/completed\"\n                                onClick=${prevented(() => this.setFilter(true))}\n                            >\n                                Completed\n                            </a>\n                        </li>\n                    </ul>\n                    <!-- Hidden if no completed items are left  -->\n                    <button\n                        class=\"clear-completed\"\n                        onClick=${prevented(() => this.handleClearCompleted())}\n                    >\n                        Clear completed\n                    </button>\n                    <button\n                        class=\"clear-completed shuffle\"\n                        onClick=${prevented(() =>\n                            this.setState({ todos: shuffle(this.state.todos) })\n                        )}\n                    >\n                        Shuffle\n                    </button>\n                </footer>\n            </section>\n            <footer class=\"info\">\n                <p>Double-click to edit a todo</p>\n                <!-- Change this out with your name and url  -->\n                <p>Created by <a href=\"http://todomvc.com\">you</a></p>\n                <p>Part of <a href=\"http://todomvc.com\">TodoMVC</a></p>\n            </footer>\n        `;\n    }\n}\n\ncustomElements.define(TodoMVC.is, TodoMVC);\n","import { html, Element } from '@tiny-lit/element';\n\nclass SierpinskiDot extends Element {\n    static get is() {\n        return 'sierpinski-dot';\n    }\n\n    static get properties() {\n        return {\n            x: Number,\n            y: Number,\n            size: Number,\n            text: String,\n            hover: Boolean\n        };\n    }\n\n    x = 0;\n    y = 0;\n    size = 0;\n    text = '';\n    hover = false;\n\n    constructor() {\n        super();\n\n        // this.addEventListener('mouseover', () => this.setState({ hover: true }));\n        // this.addEventListener('mouseleave', () => this.setState({ hover: false }));\n        this.addEventListener('mouseover', () => (this.hover = true));\n        this.addEventListener('mouseleave', () => (this.hover = false));\n\n        this.attachShadow({ mode: 'closed' });\n    }\n\n    get style() {\n        const { x, y, size } = this;\n        const s = size * 1.3;\n\n        return `\n            span {\n                position: absolute;\n                font: normal 15px sans-serif;\n                text-align: center;\n                cursor: pointer;\n                color: black;\n                width: ${s}px;\n                height: ${s}px;\n                transform: translate(${x}px, ${y}px);\n                border-radius: ${s / 2}px;\n                line-height: ${s}px;\n            }\n        `;\n    }\n\n    render() {\n        const { hover, text } = this;\n\n        return html`\n            <style>\n                ${this.style}\n            </style>\n\n            <span style=${`background: ${hover ? '#ff0' : '#61dafb'}`}>\n                ${hover ? '**' + text + '**' : text}\n            </span>\n        `;\n    }\n}\n\ncustomElements.define(SierpinskiDot.is, SierpinskiDot);\n","import { Element, html } from '@tiny-lit/element';\n\nconst targetSize = 25;\n\nclass SierpinskiTriangle extends Element {\n    static get is() {\n        return 'sierpinski-triangle';\n    }\n\n    static get properties() {\n        return {\n            x: Number,\n            y: Number,\n            s: Number,\n            seconds: Number\n        };\n    }\n\n    x = 0;\n    y = 0;\n    s = 0;\n    seconds = 0;\n\n    constructor() {\n        super();\n\n        this.attachShadow({ mode: 'open' });\n    }\n\n    renderTemplate() {\n        let { s, seconds, x, y } = this;\n\n        if (s <= targetSize) {\n            return html`\n                <sierpinski-dot\n                    x=${x - targetSize / 2}\n                    y=${y - targetSize / 2}\n                    size=${targetSize}\n                    text=${seconds}\n                />\n            `;\n        }\n\n        s = s / 2;\n\n        let slowDown = true;\n        if (slowDown) {\n            let e = performance.now() + 0.8;\n            while (performance.now() < e) {\n                // Artificially long execution time.\n            }\n        }\n\n        return html`\n            <sierpinski-triangle\n                x=${x}\n                y=${y - s / 2}\n                s=${s}\n                seconds=${seconds}\n            ></sierpinski-triangle>\n            <sierpinski-triangle\n                x=${x - s}\n                y=${y + s / 2}\n                s=${s}\n                seconds=${seconds}\n            ></sierpinski-triangle>\n            <sierpinski-triangle\n                x=${x + s}\n                y=${y + s / 2}\n                s=${s}\n                seconds=${seconds}\n            ></sierpinski-triangle>\n        `;\n    }\n\n    render() {\n        return html`${this.renderTemplate()}`\n    }\n}\n\ncustomElements.define(SierpinskiTriangle.is, SierpinskiTriangle);\n","import { Element, html } from '@tiny-lit/element';\nimport './Dot';\nimport './Triangle';\n\nfunction rafInterval(fn) {\n    let running = true;\n\n    function run() {\n        fn();\n        running && requestAnimationFrame(run);\n    }\n\n    requestAnimationFrame(run);\n\n    return () => (running = false);\n}\n\nclass SchedulerDemo extends Element {\n    static get is() {\n        return 'scheduler-demo';\n    }\n\n    constructor() {\n        super();\n\n        this.attachShadow({ mode: 'open' });\n    }\n\n    static get properties() {\n        return {\n            elapsed: Number\n        };\n    }\n\n    connectedCallback() {\n        const rendered = this.rendered;\n\n        console.time('render');\n\n        this.start = Date.now();\n        this.timerInterval = setInterval(this.tick.bind(this), 1000);\n        this.renderInterval = rafInterval(() => {\n            this.elapsed = Date.now() - this.start;\n        });\n        this.setState({\n            seconds: 0\n        });\n    }\n\n    disconnectedCallback() {\n        this.renderInterval();\n        clearInterval(this.timerInterval);\n    }\n\n    tick() {\n        this.setState({\n            seconds: (this.state.seconds % 10) + 1\n        });\n    }\n\n    getTransform() {\n        const elapsed = this.elapsed;\n        const t = (elapsed / 1000) % 10;\n        const scale = 1 + (t > 5 ? 10 - t : t) / 10;\n\n        return `\n            transform: scale(${scale / 2.1}, 0.7) translateX(50%) translateZ(0);\n        `;\n    }\n\n    firstUpdated() {\n        console.timeEnd('render');\n    }\n\n    render() {\n        const { seconds } = this.state;\n\n        return html`\n            <style>\n                :host {\n                    color: black;\n                }\n\n                .container {\n                    position: absolute;\n                    transform-origin: 0 0;\n                    width: 10px;\n                    height: 10px;\n                    left: 50%;\n                    top: 50%;\n                    will-change: transform;\n                }\n            </style>\n            <div class=\"container\" style=${this.getTransform()}>\n                <sierpinski-triangle\n                    x=${0}\n                    y=${0}\n                    s=${1000}\n                    seconds=${seconds}\n                />\n            </div>\n        `;\n    }\n}\n\ncustomElements.define(SchedulerDemo.is, SchedulerDemo);\n","export interface CustomElement {\n    connectedCallback?(): void;\n    disconnectedCallback?(): void;\n    adoptedCallback?(): void;\n    attributeChangedCallback?(\n        name: string,\n        oldValue: string,\n        newValue: string\n    ): void;\n    observedAttributes?: Array<string>;\n}\nexport type Constructor<T = {}> = new (...args: any[]) => T;\nexport interface StoreEvent {\n    type: string;\n    data: any;\n}\n\nexport type Action = StoreEvent;\nexport type Mutation = StoreEvent;\n\nexport type SubcribeCallback = (state: any, mutation?: Mutation) => void;\n\nexport interface UpdateEvent extends CustomEvent {\n    detail: {\n        mutation?: Mutation;\n        state: any;\n    };\n}\n\nexport interface DispatchEvent extends CustomEvent {\n    detail: Action;\n}\n\nexport interface StoreProviderInterface extends HTMLElement{\n    getStore(): StoreInterface;\n    config: StoreConfig;\n}\nexport interface StoreConnectedElement {\n    unsubscribe?: Function;\n    onStateChange?(state: any, mutation?: Mutation);\n    onStoreConnect?(unsubscribe: Function);\n}\n\nexport interface StoreInterface {\n    state: any;\n    mutations: Map<string, MutationHandler>;\n    actions: Map<string, ActionHandler>;\n    dispatch(action: string | Action, payload?: any);\n    subscribe(callback: Function);\n    commit(mutation: string);\n}\n\nexport type MutationHandler = (state?: any, data?: any) => object;\nexport type ActionHandler = (store: StoreInterface, payload: any) => void;\nexport type PluginHandler = (store: StoreInterface) => void;\n\nexport type StoreConfig = {\n    actions?: { [name: string]: ActionHandler };\n    mutations?: { [name: string]: MutationHandler };\n    initialState?: any;\n    plugins?: Array<PluginHandler>;\n};\n\nexport enum StoreEvents {\n    Request = 'store::request',\n    Dispatch = 'store::dispatch',\n    Update = 'store::update',\n}\n\nexport type RequestStoreEvent = CustomEvent<{ store?: StoreProviderInterface }>;","import {\n    StoreEvents,\n    StoreEvent,\n    Mutation,\n    UpdateEvent,\n    DispatchEvent,\n    RequestStoreEvent,\n    StoreProviderInterface,\n} from './types';\n\nexport function normalizeEvent(fn) {\n    return (event: string | StoreEvent, data?: any) => {\n        if (typeof event === 'string') event = { type: event, data };\n\n        return fn(event);\n    };\n}\n\nexport function requestStore(el: HTMLElement): StoreProviderInterface | undefined {\n    const event = new CustomEvent(StoreEvents.Request, { detail: {} }) as RequestStoreEvent;\n    el.dispatchEvent(event);\n\n    return event.detail.store;\n}\n\nexport function createUpdateEvent(\n    state: any,\n    mutation?: Mutation\n): UpdateEvent {\n    return new CustomEvent(StoreEvents.Update, {\n        detail: {\n            state,\n            mutation,\n        },\n    });\n}\n\nexport function createDispatchEvent(type: string, data?: any): DispatchEvent {\n    return new CustomEvent(StoreEvents.Dispatch, {\n        detail: {\n            type,\n            data,\n        },\n    });\n}\n","import {\n    Action,\n    StoreConfig,\n    StoreInterface,\n    Mutation,\n    SubcribeCallback,\n    MutationHandler,\n    ActionHandler\n} from './types';\n\nimport { normalizeEvent } from './events';\n\nconst StateProp = Symbol();\n\nconst objToMap = (obj: any, map: Map<any, any>) => {\n    for (const key in obj) map.set(key, obj[key]);\n};\n\nexport class Store<S> implements StoreInterface {\n    [StateProp]: S = {} as S;\n    readonly mutations: Map<string, MutationHandler> = new Map();\n    readonly actions: Map<string, ActionHandler> = new Map();\n    private listeners: Set<Function> = new Set();\n\n    constructor(config: StoreConfig = {}) {\n        objToMap(config.mutations, this.mutations);\n        objToMap(config.actions, this.actions);\n\n        this[StateProp] = { ...config.initialState };\n\n        if (config.plugins)\n            config.plugins!.forEach(plugin => plugin(this));\n    }\n\n    dispatch = normalizeEvent((action: Action) => {\n        const actions = this.actions;\n        if (actions.has(action.type)) actions.get(action.type)!(this, action.data);\n    });\n\n    get state(): S {\n        return this[StateProp];\n    }\n\n    subscribe(callback: SubcribeCallback) {\n        const { listeners } = this;\n\n        const handler = (mutation?: Mutation) => callback(this.state, mutation);\n\n        listeners.add(handler);\n        callback(this.state);\n\n        return () => listeners.delete(handler);\n    }\n\n    commit = normalizeEvent((mutation: Mutation) => {\n        const mutations = this.mutations;\n        if (mutations.has(mutation.type)) {\n            this[StateProp] = <any>mutations.get(mutation.type)!(this.state, mutation.data);\n        }\n\n        this.listeners.forEach(listener => listener(mutation));\n    });\n}\n\nexport const createStore = (store: StoreConfig) => {\n    return new Store(store);\n};\n","import {\n    Constructor,\n    CustomElement,\n    StoreConnectedElement,\n    StoreEvents,\n    UpdateEvent,\n    Mutation\n} from './types';\nimport { requestStore, createDispatchEvent } from './events';\n\nexport function withStore<T extends Constructor<CustomElement & HTMLElement>>(\n    Base: T\n) {\n    return class extends Base implements StoreConnectedElement {\n        unsubscribe?: Function;\n\n        connectedCallback() {\n            if (super.connectedCallback) super.connectedCallback();\n\n            let store;\n            if (store = requestStore(this)) {\n                const handler = e =>\n                    this.onStateChange!(\n                        (<UpdateEvent>e).detail.state,\n                        (<UpdateEvent>e).detail.mutation\n                    );\n                store.addEventListener(StoreEvents.Update, handler, true);\n                this.unsubscribe = store.removeEventListener.bind(\n                    this,\n                    StoreEvents.Update,\n                    handler,\n                    true\n                );\n\n                this.onStateChange(store.getStore().state);\n            }\n        }\n\n        disconnectedCallback() {\n            if (super.disconnectedCallback) super.disconnectedCallback();\n\n            this.unsubscribe!();\n        }\n\n        onStoreConnect() { }\n\n        onStateChange(_: any, __?: Mutation) { }\n\n        dispatch(type: string, data?: any) {\n            this.dispatchEvent(createDispatchEvent(type, data));\n        }\n    };\n}\n","import {\n    StoreEvents,\n    StoreInterface,\n    StoreProviderInterface,\n    Mutation,\n    StoreConfig,\n    RequestStoreEvent,\n} from './types';\nimport { createUpdateEvent } from './events';\nimport { createStore } from './store';\n\nexport abstract class StoreProvider extends HTMLElement\n    implements StoreProviderInterface {\n    store?: StoreInterface = undefined;\n    listeners: WeakMap<object, Function> = new WeakMap();\n\n    constructor() {\n        super();\n\n        this.addEventListener(StoreEvents.Request, <any>this.onStoreRequest, true);\n        this.addEventListener(StoreEvents.Dispatch, this.onStoreDispatch, true);\n\n        this.store = createStore(this.config);\n        this.store.subscribe(this.onStateChange);\n    }\n\n    get config(): StoreConfig {\n        return {};\n    }\n\n    getStore(): StoreInterface {\n        return this.store!;\n    }\n\n    onStateChange = (state: any, mutation?: Mutation) =>\n        this.dispatchEvent(createUpdateEvent(state, mutation))\n\n    onStoreRequest = (event: RequestStoreEvent) => {\n        event.stopPropagation();\n        event.detail.store = this;\n    }\n\n    onStoreDispatch = (event: Event) => {\n        this.getStore().dispatch((<CustomEvent>event).detail);\n    }\n}\n","export * from './store';\nexport * from './withStore';\nexport * from './StoreProvider';\nexport * from './types';","import { StoreProvider, withStore, createStore } from '@tiny-lit/store';\nimport { html, Element } from '@tiny-lit/element';\n\nconst JSONObject = value => {\n    if (typeof value === 'string') {\n        try {\n            value = JSON.parse(value);\n        } catch (e) {}\n    }\n    return value;\n};\n\nconst Items = [\n    {\n        name: 'Men+s+Tech+Shell+Full-Zip',\n        title: \"Men's Tech Shell Full-Zip\",\n        category: 'mens_outerwear',\n        price: 50.2\n    },\n    {\n        name: 'Anvil+L+S+Crew+Neck+-+Grey',\n        title: 'Anvil L/S Crew Neck - Grey',\n        category: 'mens_outerwear',\n        price: 22.15\n    },\n    {\n        name: 'Green+Flex+Fleece+Zip+Hoodie',\n        title: 'Green Flex Fleece Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 45.65\n    },\n    {\n        name: 'Android+Nylon+Packable+Jacket',\n        title: 'Android Nylon Packable Jacket',\n        category: 'mens_outerwear',\n        price: 33.6\n    },\n    {\n        name: 'YouTube+Ultimate+Hooded+Sweatshirt',\n        title: 'YouTube Ultimate Hooded Sweatshirt',\n        category: 'mens_outerwear',\n        price: 32.35\n    },\n    {\n        name: 'Grey+Heather+Fleece+Zip+Hoodie',\n        title: 'Grey Heather Fleece Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 38.85\n    },\n    {\n        name: 'Vastrm+Hoodie',\n        title: 'Vastrm Hoodie',\n        category: 'mens_outerwear',\n        price: 200.0\n    },\n    {\n        name: 'Recycled+Plastic+Bottle+Hoodie+-+Green',\n        title: 'Recycled Plastic Bottle Hoodie - Green',\n        category: 'mens_outerwear',\n        price: 60.95\n    },\n    {\n        name: 'Rowan+Pullover+Hood',\n        title: 'Rowan Pullover Hood',\n        category: 'mens_outerwear',\n        price: 60.85\n    },\n    {\n        name: 'Men+s+Voyage+Fleece+Jacket',\n        title: \"Men's Voyage Fleece Jacket\",\n        category: 'mens_outerwear',\n        price: 48.0\n    },\n    {\n        name: 'Eco-Jersey+Chrome+Zip+Up+Hoodie',\n        title: 'Eco-Jersey Chrome Zip Up Hoodie',\n        category: 'mens_outerwear',\n        price: 37.75\n    },\n    {\n        name: 'Android+Colorblock+Hooded+Pullover',\n        title: 'Android Colorblock Hooded Pullover',\n        category: 'mens_outerwear',\n        price: 50.2\n    },\n    {\n        name: 'Tri-blend+Full-Zip+Hoodie',\n        title: 'Tri-blend Full-Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 52.2\n    },\n    {\n        name: 'Fleece+Full-Zip+Hoodie',\n        title: 'Fleece Full-Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 45.65\n    },\n    {\n        name: 'Jacquard-Knit+Full-Zip+Fleece',\n        title: 'Jacquard-Knit Full-Zip Fleece',\n        category: 'mens_outerwear',\n        price: 74.9\n    },\n    {\n        name: 'YouTube+Unisex+Flex+Fleece+Zip+Hoodie',\n        title: 'YouTube Unisex Flex Fleece Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 45.25\n    }\n];\n\nconst ElementWithStore = withStore(Element);\n\nclass MyStore extends StoreProvider {\n    static get is() {\n        return 'my-store';\n    }\n\n    get config() {\n        return {\n            initialState: {\n                ...JSON.parse(this.getAttribute('initial-state')),\n                cart: [],\n                count: 0\n            },\n            plugins: [store => store.subscribe(console.log)],\n            actions: {\n                addToCart({ commit }, item) {\n                    commit('addItem', item);\n                    commit('updateCount');\n                },\n                removeFromCart({ commit }, item) {\n                    commit('removeItemByIndex', item);\n                    commit('updateCount');\n                },\n                removeAllFromCart({ commit, state }) {\n                    let items = state.cart;\n\n                    items.forEach(item => commit('removeItem', item));\n\n                    commit('updateCount');\n                }\n            },\n            mutations: {\n                addItem(state, data) {\n                    return{\n                        ...state,\n                        cart: [\n                            ...state.cart,\n                            data\n                        ]\n                    };\n                },\n                removeItemByIndex(state, data) {\n                    return{\n                        ...state,\n                        cart: state.cart.filter((a, i) => i !== data)\n                    };\n                },\n                removeItem(state, item) {\n                    return {\n                        ...state,\n                        cart: state.cart.filter(i => i !== item)\n                    };\n                },\n                updateCount(state) {\n                    return {\n                        ...state,\n                        count: state.cart.length\n                    };\n                }\n            }\n        };\n    }\n}\ncustomElements.define(MyStore.is, MyStore);\n\nclass Basket extends ElementWithStore {\n    constructor() {\n        super();\n        this.count = 0;\n        this.items = [];\n        this.state = {\n            open: false\n        };\n    }\n\n    static get properties() {\n        return {\n            count: Number,\n            items: Object\n        };\n    }\n\n    onStateChange(state) {\n        this.count = state.count;\n        this.items = state.cart;\n    }\n\n    static get is() {\n        return 'shop-basket';\n    }\n\n    handleRemove(index) {\n        this.dispatch('removeFromCart', index);\n    }\n\n    handleRemoveAll() {\n        this.dispatch('removeAllFromCart');\n    }\n\n    toggleCart = () => {\n        this.setState({\n            open: !this.state.open\n        })\n    }\n\n    render() {\n        return html`\n            <style>\n                .basket {\n                    position: fixed;\n                    bottom: 0;\n                    right: 10px;\n                    color: white;\n                    z-index: 100;\n                }\n\n                .basket__list {\n                    z-index: 100;\n                    overflow-y: scroll;\n                    max-height: 150px;\n                    margin: 0;\n                }\n\n                .basket__listItem  {\n                    margin-bottom: 5px;\n                }\n\n                .basket__listItemButton {\n                    padding: 3px 5px;\n                }\n\n                .basket__dropdown {\n                    position: absolute;\n                    bottom: calc(100% + 10px);\n                    background-color: rgb(var(--background));\n                    width: 300px;\n                    right: 0;\n                    padding: 10px;\n                    border: 1px solid rgb(var(--primary));\n                }\n\n                .basket__toggle {\n                    position: relative;\n                }\n\n                .basket__badge {\n                    background: rgb(var(--primary));\n                    border-radius: 50%;\n                    padding: 2px;\n                    color: rgb(var(--background));\n                    position: absolute;\n                    top: 0;\n                    right: 0;\n                    width: 15px;\n                    height: 15px;\n                    font-size: 12px;\n                    line-height: 15px;\n                    margin: 5px 10px 0;\n                }\n\n                .basket__clear {\n                    float:right;\n                    margin-top: 20px;\n                }\n            </style>\n            <div class=\"basket\">\n                <button class=\"basket__toggle\" onClick=${this.toggleCart}>\n                    <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        viewBox=\"0 0 576 512\"\n                        width=\"24\"\n                    >\n                        <path\n                            fill=\"currentColor\"\n                            d=\"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z\"\n                        ></path>\n                    </svg>\n                    <span class=\"basket__badge\">${this.count}</span>\n                </button>\n                <div class=\"basket__dropdown\" hidden=${!this.state.open}>\n                    <span>Total: ${this.count}${html`<span>items</span>`}</span>\n\n\n                    <table class=\"basket__list\">\n                        <thead>\n                            <tr>\n                                <th>Item</th>\n                                <th>Qty</th>\n                                <th></th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${this.items.map(\n                                (item, index) => html`\n                                <tr>\n                                    <td>${item.title}</td>\n                                    <td>1</td>\n                                    <td>\n                                        <button\n                                            class=\"basket__listItemButton\"\n                                            onCLick=${() => this.handleRemove(index)}\n                                        >\n                                            X\n                                        </button>\n                                    </td>\n                                </tr>\n                            `)}\n                        </tbody>\n                    </table>\n\n                    ${\n                        this.items.length\n                            ? html`<button class=\"basket__clear\" onClick=${() =>\n                                this.handleRemoveAll()}>remove all</button>`\n                            : null\n                    }\n                </div>\n            </div>\n        `;\n    }\n}\ncustomElements.define(Basket.is, Basket);\n\nclass Item extends ElementWithStore {\n    item = {};\n\n    static get is() {\n        return 'shop-item';\n    }\n\n    static get properties() {\n        return {\n            item: JSONObject\n        };\n    }\n\n    handleClick = () => {\n        this.dispatch('addToCart', this.item);\n    };\n\n    render() {\n        return html`\n            <div class=\"detail\" has-content=\"\">\n                <img\n                    src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw\"\n                    width=\"300\"\n                    height=\"300\"\n                    class=\"image\"\n                />\n                <h1>${this.item.title}</h1>\n                <div class=\"price\">${this.item.price}$</div>\n                <button\n                    onClick=${this.handleClick}\n                    class=\"button\"\n                    aria-label=\"Add this item to cart\"\n                >\n                    Add to Cart\n                </button>\n            </div>\n        `;\n    }\n}\ncustomElements.define(Item.is, Item);\n\nclass StoreDemo extends Element {\n    static get is() {\n        return 'store-demo';\n    }\n\n    render() {\n        return html`\n            <style>\n                h1 {\n                    font-size: 13px;\n                    font-weight: 500;\n                    line-height: 28px;\n                    margin: 0;\n                }\n                .detail {\n                    text-align:center;\n                    margin: 0 28px 48px;\n                }\n                .price {\n                    margin: 0px 0 10px;\n                    font-size: 13px;\n                }\n                .image {\n                    max-width: 100%;\n                    background: rgb(117, 117, 117);\n                }\n                my-store {\n                    display: flex;\n                    flex-wrap: wrap;\n                    position: relative;\n                }\n                shop-item {\n                    flex: 1 1;\n                    flex-basis: 33%;\n                    max-width: 33%;\n                }\n                @media (max-width: 767px) {\n                    shop-item {\n                        flex-basis: 100%;\n                        max-width: 100%;\n                    }\n                }\n            </style>\n            <my-store>\n                <shop-basket></shop-basket>\n                ${Items.map(item => html`<shop-item item=${item}></shop-item>`)}\n            </my-store>\n        `;\n    }\n}\n\ncustomElements.define(StoreDemo.is, StoreDemo);\n","import { Element, html } from '@tiny-lit/element';\n\nconst t = (c) => html` <div>${c}</div> `;\n\nclass Svg extends Element {\n    static get is() {\n        return 'test-svg';\n    }\n\n    static get properties() {\n        return {\n            radius: Number\n        };\n    }\n\n    maxRadius = 50;\n\n    constructor() {\n        super();\n        this.attachShadow({ mode: 'open' });\n    }\n\n    onChange = ({ target }) => {\n        this.maxRadius = Number(target.value);\n        this.update();\n    };\n\n    connectedCallback() {\n        super.connectedCallback();\n\n        this.interval = setInterval(() => {\n            this.radius = Math.abs(\n                Math.sin(Date.now() / 1000) * this.maxRadius\n            );\n        }, 10);\n    }\n\n    disconnectedCallback() {\n        clearInterval(this.interval);\n    }\n\n    get radius() {\n        console.log(\"get\");\n    }\n\n    set radius(value) {\n        console.log(\"set\", value);\n    }\n\n    render() {\n        return html`\n            <style>\n                :host {\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-between;\n                    flex-direction: column;\n                    height: 50vh;\n                }\n            </style>\n            <div>\n                <p>Max size</p>\n                <input\n                    type=\"range\"\n                    min=\"10\"\n                    max=\"100\"\n                    onChange=${this.onChange}\n                />\n            </div>\n            <svg height=${this.maxRadius * 2} width=${this.maxRadius * 2}>\n                <circle\n                    cx=${this.maxRadius}\n                    cy=${this.maxRadius}\n                    r=\"${this.radius}\"\n                    stroke=\"black\"\n                    stroke-width=\"3\"\n                    fill=\"red\"\n                />\n                Sorry, your browser does not support inline SVG.\n            </svg>\n        `;\n    }\n}\ncustomElements.define(Svg.is, Svg);\n","import { HistoryInterface } from '../types';\n\nexport default (): HistoryInterface => ({\n    path() {\n        return location.hash ? location.hash.substring(1) : '/';\n    },\n    go(path: string) {\n        location.hash = `#${path}`;\n    },\n    listen(callback) {\n        addEventListener('hashchange', <any>callback);\n\n        return removeEventListener.bind(window, 'hashchange', callback);\n    }\n});\n","import { HistoryInterface } from '../types';\n\nexport default (): HistoryInterface => ({\n    path() {\n        return location.pathname;\n    },\n    go(path: string) {\n        history.pushState(null, document.title, path);\n        dispatchEvent(new Event('pushstate'));\n    },\n    listen(callback) {\n        addEventListener('popstate', <any>callback);\n        addEventListener('pushstate', <any>callback);\n\n        return removeEventListener.bind(window, 'popstate', callback);\n    }\n});","export { default as createHashHistory } from './hash';\nexport { default as createPathHistory } from './path';","import {\n    RouteCallbacks,\n    Route,\n    Router as RouterInterface,\n    HistoryInterface\n} from './types';\nimport { RouterOptions } from './types';\nimport { createPathHistory, createHashHistory } from './history';\n\n/**\n * Valid paths:\n * Required\n * /:param\n *\n * Optional\n * /:param?\n *\n * Required matching list\n * /:param{test1,test2}\n *\n * Optional matching list\n * /:param{test1,test2}?\n * @param {*} path\n */\nconst ParamsRegex: RegExp = /\\/:([\\w]+)(?:{([\\w,]+)})?(\\?)?/g;\n\nfunction parsePath(path: string) {\n    let m,\n        params: Array<string> = [],\n        pattern = path;\n\n    if (path === '*') {\n        return {\n            regex: /.*/,\n            params: []\n        };\n    }\n\n    while ((m = ParamsRegex.exec(path))) {\n        const paramRegex = m[2] ? `${m[2].split(',').join('|')}` : '[^/]+';\n\n        params.push(m[1]);\n        pattern = pattern.replace(\n            m[0],\n            `(?:\\\\/(${paramRegex}))${m[3] ? '?' : ''}`\n        );\n    }\n\n    return {\n        regex: new RegExp(`^${pattern}\\\\/?$`),\n        params\n    }\n}\n\nexport class Router implements RouterInterface {\n    history: HistoryInterface;\n    routes: Array<Route> = [];\n    current?: Route;\n\n    constructor({ interceptLocals, useHash }: RouterOptions) {\n        if (useHash) this.history = createHashHistory();\n        else this.history = createPathHistory();\n\n        this.history.listen(this.resolve);\n\n        if (interceptLocals)\n            document.addEventListener('click', this.handleLocalClick);\n    }\n\n    handleLocalClick = e => {\n        const target = e.target;\n        if (\n            target.nodeName === 'A' &&\n            target.href.indexOf(location.origin) === 0\n        ) {\n            e.preventDefault();\n\n            this.goTo(target.getAttribute('href'));\n        }\n    }\n\n    on(path: string, callbacks: RouteCallbacks = {}) {\n        const route = {\n            path,\n            callbacks,\n            ...parsePath(path)\n        };\n        this.routes.push(route);\n\n        return () => (this.routes = this.routes.filter(r => r !== route));\n    }\n\n    resolve = () => {\n        const path = this.history.path();\n        const current = this.current;\n\n        this.routes.some((route: Route) => {\n            let match: any = path.match(route.regex);\n            const { onEnter, onUpdate } = route.callbacks;\n\n            if (match) {\n                match = match\n                    .filter(m => m !== undefined)\n                    .reduce((map, m, i) => {\n                        if (i) map[route.params[i - 1]] = m;\n                        return map;\n                    }, {});\n\n                if (current !== route) {\n                    this.current = route;\n\n                    if (current)\n                        current.callbacks.onLeave!(match);\n\n                    onEnter!(match);\n                } else {\n                    onUpdate!(match);\n                }\n            }\n\n            return match;\n        });\n    }\n\n    goTo(path) {\n        this.history.go(path);\n    }\n}\n","export interface RouteCallbacks {\n    onEnter?(matches: any);\n    onLeave?(matches: any);\n    onUpdate?(matches: any);\n}\n\nexport const enum RouteComponentCallbacks {\n    onRouteUpdate = 'onRouteUpdate',\n    onRouteEnter = 'onRouteEnter',\n    onRouteLeave = 'onRouteLeave'\n}\n\nexport interface RouteComponent extends HTMLElement {\n    [RouteComponentCallbacks.onRouteEnter]?(matches: any);\n    [RouteComponentCallbacks.onRouteUpdate]?(matches: any);\n    [RouteComponentCallbacks.onRouteLeave]?();\n}\n\nexport type Route = {\n    regex: RegExp;\n    params: Array<string>;\n    callbacks: RouteCallbacks;\n    path: string\n};\n\nexport enum RouterEvents {\n    Request = 'router::request',\n    Change = 'router::change'\n}\n\nexport interface Router {\n    routes: Array<Route>;\n    current?: Route;\n    on(path: string, callbacks: RouteCallbacks): Function;\n    resolve();\n    goTo(path);\n}\n\nexport type RequestRouterEvent = CustomEvent<{ router?: Router }>;\n\nexport type RouterOptions = {\n    interceptLocals?: boolean;\n    useHash?: Boolean;\n};\n\nexport type HistoryInterface = {\n    path(): string;\n    go(path: string): void;\n    listen(callback: () => void): Function;\n};\n","import { RouterEvents, RequestRouterEvent, Router } from './types';\n\nexport function requestRouter(el: HTMLElement): Router | undefined {\n    const event: RequestRouterEvent = new CustomEvent(RouterEvents.Request, { detail: {} });\n    el.dispatchEvent(event);\n\n    return event.detail.router;\n}","import { Router, RouteComponent } from './types';\nimport { requestRouter } from './events';\n\nconst importedModules = new Set();\nconst importModule = url =>\n    new Promise(resolve => {\n        if (!url || importedModules.has(url)) return resolve();\n        else {\n            const script = document.createElement('script');\n            script.onload = resolve;\n            script.src = url;\n\n            document.head.appendChild(script);\n\n            importedModules.add(url);\n        }\n    });\n\nconst waitComponent = (route: RouteElement, component: HTMLElement) =>\n    importModule(route.getAttribute('module')!)\n        // TODO check element upgrade\n        .then(() => customElements.whenDefined(component.localName));\n\nexport class RouteElement extends HTMLElement {\n    router?: Router;\n    dispose?: Function;\n\n    connectedCallback() {\n        const path = this.getAttribute('path'),\n            componentName = this.getAttribute('component');\n\n        if (!path || !componentName) return;\n\n        if ((this.router = requestRouter(this))) {\n            const component: RouteComponent = document.createElement(\n                componentName\n            );\n\n            this.dispose = this.router.on(path, {\n                onEnter: params => {\n                    waitComponent(this, component)\n                        .then(() => this.appendChild(component))\n                        .then(\n                            () =>\n                                component.onRouteEnter &&\n                                component.onRouteEnter(params)\n                        );\n                },\n                onUpdate: params => {\n                    waitComponent(this, component).then(\n                        () =>\n                            component.onRouteUpdate &&\n                            component.onRouteUpdate(params)\n                    );\n                },\n                onLeave: () => {\n                    waitComponent(this, component)\n                        .then(\n                            () =>\n                                component.onRouteLeave &&\n                                component.onRouteLeave()\n                        )\n                        .then(() => this.removeChild(component));\n                }\n            });\n        }\n    }\n\n    disconnectedCallback() {\n        if (this.dispose) this.dispose();\n    }\n}\n","import { Router } from './router';\nimport { RouterEvents, RequestRouterEvent } from './types';\n\nexport class RouterProvider extends HTMLElement {\n    router?: Router;\n\n    onRouterRequest = (e: RequestRouterEvent) => {\n        e.detail.router = this.router;\n    }\n\n    connectedCallback() {\n        document.body.addEventListener(RouterEvents.Request, <any>this.onRouterRequest, true);\n\n        if (!this.router) {\n            this.router = new Router({\n                interceptLocals: this.hasAttribute('intercept-locals'),\n                useHash: this.hasAttribute('use-hash')\n             });\n        }\n\n        Promise.resolve().then(this.router!.resolve);\n    }\n\n    disconnectedCallback() {\n        document.body.removeEventListener(RouterEvents.Request, <any>this.onRouterRequest, true);\n    }\n}\n","export { Router } from './router';\nexport { RouteElement } from './RouteElement';\nexport { RouterProvider } from './RouterProvider';","import './todo/index.js';\nimport './scheduler/index.js';\nimport './store/index.js';\nimport './svg/index.js';\n\nimport { RouterProvider, RouteElement } from '@tiny-lit/router';\n\ncustomElements.define('demo-router', RouterProvider);\ncustomElements.define('demo-route', RouteElement);\n"]}