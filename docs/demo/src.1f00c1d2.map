{"version":3,"sources":["../src/template.ts","../src/utils.ts","../src/expressions.ts","../src/linker.ts","../src/parser.ts","../src/index.ts","../src/withElement.ts","../src/withProps.ts","../src/Scheduler.ts","../src/Element.ts","src/todo/style.js","src/todo/index.js","src/karpinsky/Dot.js","src/karpinsky/Triangle.js","src/karpinsky/index.js","../src/withStore.ts","../src/types.ts","../src/events.ts","../src/store.ts","../src/StoreProvider.ts","src/store/index.js","src/svg/index.js","../src/RouteElement.ts","../src/history/hash.ts","../src/router.ts","../src/history/path.ts","../src/RouterProvider.ts","src/index.js"],"names":["withKey","text","data","document","createTextNode","replaceRange","newNode","range","concat","startNode","parentNode","endNode","nextSibling","removeNodes","replaceChild","parent","nextNode","removeChild","getNodeIndex","node","index","previousSibling","getNodePath","path","unshift","const","TemplateSymbol","Symbol","isTemplateEqual","t1","t2","isTemplate","strings","obj","MARKER_RE","MARKER_NUMBER_RE","TEXT_ELEMENT","markerNumber","marker","Number","replace","SVG_NAMESPACES","xlink","xml","xmlns","AttributeExpression","constructor","element","name","update","value","this","setAttributeNS","split","setAttribute","hasAttribute","removeAttribute","NodeExpression","placeholder","treeWalkerFilter","NodeFilter","FILTER_ACCEPT","linkAttributes","markers","linkedExpressions","attrs","attributes","i","length","item","has","type","nodePath","linkComment","nodeValue","linkTexts","match","forEach","key","keyNode","splitText","indexOf","deleteData","insertBefore","linkExpressions","root","treeWalker","createTreeWalker","SHOW_ELEMENT","SHOW_COMMENT","Array","size","currentNode","nodeType","Node","ELEMENT_NODE","test","tagName","call","childNodes","resolve","fragment","symbols","map","symbol","let","l","updateArray","items","templates","Map","keys","reduce","String","template","get","values","create","set","after","before","push","delete","replaceWith","newValue","clear","TEXT_NODE","textContent","isArray","COMMENT_NODE","acceptNode","TemplateCache","WeakMap","NODE_RE","RegExp","createElement","cacheEntry","lastElement","markersMap","isAttribute","html","innerHTML","normalize","content","firstChild","appendChild","expressions","importNode","lastChild","Template","render","container","instances","undefined","withProps","Base","Object","observedAttributes","__attrsMap","props","properties","attrsMap","toLowerCase","defineProperty","prototype","__props","oldValue","rendered","__observedProps","attributeChangedCallback","_","requestIdleCallback","window","handler","start","Date","now","setTimeout","didTimeout","timeRemaining","Math","max","Scheduler","deadline","tasks","fn","shift","_scheduled","running","process","defer","_priority","sort","a","b","withElement","scheduler","renderRoot","renderCallbacks","attachShadow","shadowRootInitDict","super","connectedCallback","setState","nextState","callback","state","Element","HTMLElement","prevented","f","e","stopPropagation","preventDefault","loadStorage","defaultValue","s","localStorage","getItem","JSON","parse","saveStorage","requestAnimationFrame","setItem","stringify","shuffle","array","counter","floor","random","temp","TodoMVC","todos","filter","mode","completed","target","elements","id","toString","substr","reset","remove","todo","console","time","timeEnd","style","handleAddTodo","switchCompleted","handleDeleteTodo","setFilter","handleClearCompleted","customElements","define","is","KarpinskyDot","x","y","hover","addEventListener","Boolean","targetSize","KarpinskyTriangle","seconds","performance","slowDown","rafInterval","run","KarpinskyDemo","timerInterval","setInterval","tick","bind","renderInterval","clearInterval","elapsed","t","scale","getStyle","StoreEvents","normalizeEvent","event","StateProp","objToMap","Store","config","Set","action","actions","mutation","mutations","listeners","listener","initialState","plugins","plugin","prototypeAccessors","subscribe","add","createStore","store","withStore","CustomEvent","Request","detail","dispatchEvent","onStateChange","Update","unsubscribe","removeEventListener","getStore","disconnectedCallback","onStoreConnect","__","dispatch","Dispatch","StoreProvider","onStoreRequest","onStoreDispatch","JSONObject","object","Items","title","category","price","ElementWithStore","MyStore","getAttribute","cart","count","log","addToCart","commit","removeFromCart","removeAllFromCart","addItem","removeItemByIndex","removeItem","updateCount","Basket","toggleCart","open","handleRemove","handleRemoveAll","Item","handleClick","c","StoreDemo","Svg","maxRadius","radius","onChange","interval","abs","sin","RouterEvents","ParamsRegex","Router","ref","nodeName","href","location","origin","goTo","history","current","routes","some","route","regex","callbacks","m","params","onLeave","onEnter","onUpdate","useHash","hash","substring","go","listen","pathname","pushState","Event","interceptLocals","handleLocalClick","on","pattern","exec","paramRegex","join","r","importedModules","waitComponent","component","url","Promise","script","onload","src","then","whenDefined","localName","RouteElement","el","componentName","router","dispose","onRouteEnter","onRouteUpdate","onRouteLeave","RouterProvider","body","onRouterRequest"],"mappings":"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","file":"src.1f00c1d2.map","sourceRoot":"../../packages/demo","sourcesContent":["import { TemplateInterface, Expression, } from './types';\nimport { createElement } from './parser';\nimport { TemplateSymbol, removeNodes } from './utils';\n\nexport class Template implements TemplateInterface {\n    [TemplateSymbol] = true;\n    values: any[];\n    strings: TemplateStringsArray;\n    range?: [Node, Node];\n    expressions?: Expression[];\n    key?: any;\n\n    constructor(strings: TemplateStringsArray, values: any[]) {\n        this.values = values;\n        this.strings = strings;\n    }\n\n    withKey(key: any) {\n        this.key = key;\n        return this;\n    }\n\n    update(values: any[]) {\n        for (let i = 0; i < values.length; i++) {\n            if (this.expressions![i] !== undefined)\n                this.expressions![i].update(values[i]);\n        }\n    }\n\n    delete() {\n        removeNodes(...this.range!);\n        this.range = undefined;\n        this.expressions = undefined;\n    }\n\n    create(): DocumentFragment {\n        const { fragment, expressions } = createElement(\n            this.strings,\n            this.values\n        );\n        this.expressions = expressions;\n        this.range = [fragment.firstChild!, fragment.lastChild!];\n\n        this.update(this.values);\n\n        return fragment;\n    }\n}\n","import { TemplateInterface } from './types';\n\nexport function comment(data: string = ''): Comment {\n    return document.createComment(data);\n}\n\nexport function text(data: string = ''): Text {\n    return document.createTextNode(data);\n}\n\nexport function isNode(obj: any): boolean {\n    return !!obj && !!(<Node>obj).nodeType;\n}\n\nexport function replaceRange(newNode: Node, range: any) {\n    const [startNode, endNode] = <any>[].concat(range);\n\n    if (!startNode.parentNode) return;\n\n    if (endNode && startNode.nextSibling !== endNode) {\n        removeNodes(startNode.nextSibling!, endNode);\n    }\n\n    startNode.parentNode!.replaceChild(newNode, startNode);\n}\n\nexport function removeNodes(\n    startNode: Node,\n    endNode: Node,\n    parent: Node = startNode.parentNode!\n): void {\n    if (!parent) return;\n\n    while (startNode !== endNode) {\n        const nextNode = startNode.nextSibling!;\n        parent.removeChild(startNode);\n        startNode = nextNode;\n    }\n}\n\nexport function moveTemplate(\n    template: TemplateInterface,\n    after: Node,\n    parent: Node = after.parentNode!\n): void {\n    const [startNode, endNode] = template.range!;\n    const before = after.nextSibling!;\n\n    let node = startNode;\n    do {\n        const nextNode = node!.nextSibling!;\n        parent.insertBefore(node, before as Node);\n        node = nextNode;\n    } while (node !== endNode);\n    parent.insertBefore(endNode, before as Node);\n}\n\nexport function getNodeIndex(node: Node): number {\n    let index = 0;\n    while ((node = node.previousSibling!)) index++;\n    return index;\n}\n\nexport function getNodePath(node: Node): Array<number> {\n    const path: number[] = [];\n    while (node.parentNode) {\n        path.unshift(getNodeIndex(node));\n        node = node.parentNode;\n    }\n    return path;\n}\n\nexport function getNodeByPath(node: Node, path: Array<number>): Node {\n    for (let i = 0, l = path.length; i < l; i++)\n        node = node.childNodes[path[i]];\n\n    return node;\n}\n\nexport const TemplateSymbol = Symbol();\n\nexport function isTemplateEqual(\n    t1: TemplateInterface,\n    t2: TemplateInterface\n): boolean {\n    return isTemplate(t1) && isTemplate(t2) && t1.strings === t2.strings;\n}\n\nexport function isTemplate(obj: any): boolean {\n    return obj && obj[TemplateSymbol];\n}\n\nexport const MARKER_RE = /__(\\d+)__/g;\nexport const MARKER_NUMBER_RE = /\\D+/g;\nexport const TEXT_ELEMENT = /^(?:style|textarea)$/i;\n\nexport function markerNumber(marker: string): number {\n    return Number(marker.replace(MARKER_NUMBER_RE, ''));\n}\n\nconst SVG_NAMESPACES = {\n    xlink: 'http://www.w3.org/1999/xlink',\n    xml: 'http://www.w3.org/XML/1998/namespace',\n    xmlns: 'http://www.w3.org/2000/xmlns/'\n};\n\nexport function getSVGNamespace(attributeName): string {\n    return SVG_NAMESPACES[attributeName.split(':')[0]];\n}\n","import { Expression, TemplateInterface, TemplateArray } from './types';\nimport {\n    isNode,\n    replaceRange,\n    isTemplate,\n    isTemplateEqual,\n    moveTemplate,\n    text,\n    getSVGNamespace\n} from './utils';\n\nexport class AttributeExpression implements Expression {\n    name: string;\n    value?: any;\n    element: Element;\n\n    constructor(element: Element, name: string) {\n        this.name = name;\n        this.element = element;\n    }\n\n    update(value: any): void {\n        if (this.value === value) return;\n\n        const { name, element } = this;\n\n        if ('ownerSVGElement' in <SVGAElement>element) {\n            element.setAttributeNS(getSVGNamespace(name), name, value);\n        } else if (name in element) {\n            (element as any)[name] = value;\n        } else if (typeof value !== 'undefined') {\n            element.setAttribute(name, value);\n        } else {\n            element.hasAttribute(name) && element.removeAttribute(name);\n        }\n\n        this.value = value;\n    }\n}\n\nexport class NodeExpression implements Expression {\n    element: Node | TemplateInterface;\n    placeholder: Node;\n    value?: Node | TemplateInterface | TemplateArray;\n\n    constructor(element: Node) {\n        this.element = this.placeholder = element;\n    }\n\n    updateArray(items: TemplateInterface[]) {\n        const templates = this.value instanceof Map ? this.value : new Map();\n\n        const { element: rootNode } = this;\n\n        let currentNode: Node = <Node>rootNode;\n        const keys: string[] = items.reduce(\n            (keys, item, i) => {\n                const key: string = String(item.key || i);\n                let template = templates.get(key)!;\n\n                if (!template) {\n                    const node: Node = item.create();\n                    currentNode.parentNode!.insertBefore(\n                        node,\n                        currentNode.nextSibling\n                    );\n\n                    templates.set(key, (template = item));\n                } else if (!isTemplateEqual(template, item)) {\n                    replaceRange(item.create(), template.range);\n                    templates.set(key, (template = item));\n                } else {\n                    template.update(item.values);\n                }\n\n                if (currentNode.nextSibling !== template.range[0]) {\n                    moveTemplate(template, currentNode);\n                }\n                currentNode = template.range[1];\n\n                keys.push(key);\n\n                return keys;\n            },\n            [] as string[]\n        );\n\n        templates.forEach((template, key, map) => {\n            if (keys.indexOf(key) === -1) {\n                template.delete();\n                map.delete(key);\n            }\n        });\n\n        return templates;\n    }\n\n    replaceWith(newValue: Node | TemplateInterface | TemplateArray) {\n        const { element, value } = this;\n\n        if (value instanceof Map) {\n            value.forEach(template => template.delete());\n            value.clear();\n        }\n\n        if (element !== newValue) {\n            this.element = newValue = isTemplate(newValue)\n                ? <TemplateInterface>newValue\n                : isNode(newValue)\n                    ? <Node>newValue\n                    : text(<any>newValue);\n\n            replaceRange(\n                isTemplate(newValue)\n                    ? (<TemplateInterface>newValue).create()\n                    : <Node>newValue,\n                isTemplate(element)\n                    ? (<TemplateInterface>element).range!\n                    : <Node>element\n            );\n        }\n    }\n\n    update(value: any): void {\n        if (value === this.value) return;\n\n        const { element, placeholder } = this;\n\n        if (\n            typeof value !== 'object' &&\n            (<Node>element).nodeType === Node.TEXT_NODE\n        ) {\n            (<Node>element).textContent = value;\n        } else if (isTemplateEqual(value, <TemplateInterface>element)) {\n            (element as TemplateInterface).update(value.values);\n        } else if (Array.isArray(value)) {\n            if (\n                !(this.value instanceof Map) &&\n                (<Node>element).nodeType !== Node.COMMENT_NODE\n            ) {\n                this.replaceWith(placeholder);\n            }\n            value = this.updateArray(value);\n        } else {\n            this.replaceWith(value == null ? placeholder : value);\n        }\n\n        this.value = value;\n    }\n}\n","import { MarkerMap, LinkSymbol, Expression } from './types';\nimport { AttributeExpression, NodeExpression } from './expressions';\nimport {\n    getNodePath,\n    getNodeByPath,\n    text,\n    markerNumber,\n    MARKER_RE,\n    TEXT_ELEMENT\n} from './utils';\n\nfunction treeWalkerFilter() {\n    return NodeFilter.FILTER_ACCEPT;\n}\n// fix(IE11): expect filter to be a function and not an object\n(<any>treeWalkerFilter).acceptNode = treeWalkerFilter;\n\nexport function linkAttributes(\n    element: Element,\n    markers: MarkerMap,\n    linkedExpressions: LinkSymbol[]\n): void {\n    const attrs = element.attributes;\n    let i = attrs.length;\n\n    while (i--) {\n        const { name, value } = attrs.item(i) as Attr;\n\n        if (markers.has(value)) {\n            element.removeAttribute(name);\n            linkedExpressions[markerNumber(value)] = {\n                type: AttributeExpression,\n                name,\n                nodePath: getNodePath(element)\n            };\n        }\n    }\n}\n\nexport function linkComment(\n    node: Comment,\n    markers: MarkerMap,\n    linkedExpressions: LinkSymbol[]\n) {\n    if (markers.has(node.data)) {\n        linkedExpressions[markerNumber(node.data)] = {\n            type: NodeExpression,\n            nodePath: getNodePath(node)\n        };\n        node.nodeValue = '';\n    }\n}\n\nexport function linkTexts(\n    node: CharacterData,\n    linkedExpressions: LinkSymbol[]\n): void {\n    const keys = node.data.match(MARKER_RE) || [];\n\n    keys.forEach((key: string) => {\n        const keyNode: Text = text();\n        node = (<Text>node).splitText(node.data.indexOf(key));\n        node.deleteData(0, key.length);\n\n        node.parentNode!.insertBefore(keyNode, node);\n\n        linkedExpressions[markerNumber(key)] = {\n            type: NodeExpression,\n            nodePath: getNodePath(keyNode)\n        };\n    });\n}\n\nexport function linkExpressions(\n    root: DocumentFragment,\n    markers: MarkerMap\n) {\n    const treeWalker = document.createTreeWalker(\n        root,\n        NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT,\n        treeWalkerFilter as any,\n        false\n    );\n\n    const linkedExpressions: Array<LinkSymbol> = Array(markers.size);\n\n    while (treeWalker.nextNode()) {\n        const node: any = treeWalker.currentNode;\n\n        if (node.nodeType === Node.ELEMENT_NODE) {\n            linkAttributes(node, markers, linkedExpressions);\n            if (TEXT_ELEMENT.test(node.tagName)) {\n                [].forEach.call(node.childNodes, node =>\n                    linkTexts(node, linkedExpressions)\n                );\n            }\n        } else linkComment(node, markers, linkedExpressions);\n    }\n\n    return linkedExpressions;\n}\n\nexport function resolve(fragment: Node, symbols: LinkSymbol[]): Expression[] {\n    return symbols.map(\n        symbol =>\n            new symbol.type(\n                getNodeByPath(fragment, symbol.nodePath),\n                symbol.name\n            )\n    ) as any;\n}\n","import { Expression, CacheEntry, MarkerMap } from './types';\nimport { linkExpressions, resolve } from './linker';\nimport { text, TEXT_ELEMENT } from './utils';\n\nconst TemplateCache: WeakMap<TemplateStringsArray, CacheEntry> = new WeakMap();\n\nfunction createCacheEntry(html: string, markersMap: MarkerMap): CacheEntry {\n    const template = document.createElement('template');\n    template.innerHTML = html;\n    template.normalize();\n\n    // HACK ie11 doesn't import empty text node\n    const content = template.content;\n    content.insertBefore(text(' '), content.firstChild);\n    content.appendChild(text(' '));\n\n    return {\n        template,\n        expressions: linkExpressions(content, markersMap)\n    };\n}\n\n/**\n * Use this regex to choose the right marker\n * 1. ...<tag...\n * 2. ...<tag...>\n * 3. ...>...\n * 4. ......\n */\nconst tagName = `[0-9a-zA-Z]+`,\n    attributeName = `[^<\\\\s\\0\"'>\\\\/=]+`,\n    attributeValue = `(?:\"[^\"]*\"?|'[^']*'?|[^\\\\s'\">]*)`,\n    attribute = `\\\\s*${attributeName}(?:\\\\s*=\\\\s*${attributeValue})?`,\n    tagOpen = `<(${tagName})(?:${attribute})*\\\\s*(>?)`;\nconst NODE_RE = new RegExp(`^[^]*${tagOpen}|[^]*(>)[^]*|[^]*$`, 'i');\nconst enum MatchType {\n    TagName = 1,\n    ClosedTag = 2,\n    EndTag = 3\n}\n\nexport function createElement(\n    strings: TemplateStringsArray,\n    values: any[]\n): { fragment: DocumentFragment; expressions: Expression[] } {\n    /**\n     * https://tc39.github.io/ecma262/#sec-gettemplateobject\n     * [...]The template objects are frozen and the same template object is\n     * used each time a specific tagged Template is evaluated[...]\n     */\n    let cacheEntry: CacheEntry = TemplateCache.get(strings)!;\n\n    if (!cacheEntry) {\n        const markersMap: any = new Map();\n        let isAttribute = false;\n        let lastElement;\n\n        const html = values.reduce((html: string, value: any, i: number) => {\n            const marker = `__${i}__`;\n            const match = strings[i].match(NODE_RE)!;\n\n            markersMap.set(marker, value);\n\n            if (match[MatchType.TagName]) {\n                lastElement = match[MatchType.TagName];\n                isAttribute = !match[MatchType.ClosedTag];\n            }\n\n            if (match[MatchType.ClosedTag] || match[MatchType.EndTag]) {\n                isAttribute = TEXT_ELEMENT.test(lastElement);\n            }\n\n            html += (isAttribute ? marker : `<!--${marker}-->`) + strings[i + 1];\n\n            return html;\n        }, strings[0]);\n\n        TemplateCache.set(strings, cacheEntry = createCacheEntry(html, markersMap));\n    }\n\n    const fragment = document.importNode(cacheEntry.template.content, true);\n    fragment.firstChild!.nodeValue = fragment.lastChild!.nodeValue = '';\n\n    return {\n        fragment,\n        expressions: resolve(fragment, cacheEntry.expressions)\n    };\n}\n","export { Template } from './template';\n\nimport { TemplateInterface } from './types';\nimport { Template } from './template';\nimport { removeNodes } from './utils';\n\nexport function render(template: TemplateInterface, container: HTMLElement) {\n    if (!render.instances.has(container)) {\n        render.instances.set(container, template);\n        removeNodes(container.firstChild!, container.lastChild!, container);\n\n        container.appendChild(template.create());\n    } else {\n        render.instances.get(container)!.update(template.values);\n    }\n}\nrender.instances = new WeakMap<HTMLElement, TemplateInterface>();\n\nexport function html(strings: any, ...values: any[]): Template {\n    return new Template(strings, values);\n}\n","import { render, Template } from '@tiny-lit/core';\nimport Scheduler from './Scheduler';\nimport {\n    Constructor,\n    Element as ElementInterface,\n    Scheduler as SchedulerInterface\n} from './types';\n\nexport function withElement<T extends Constructor<HTMLElement>>(Base: T) {\n    return class extends Base implements ElementInterface {\n        state: any = {};\n        rendered: boolean = false;\n        renderCallbacks: Array<Function> = [];\n        renderRoot: HTMLElement | ShadowRoot = this;\n\n        attachShadow(shadowRootInitDict: ShadowRootInit) {\n            return (this.renderRoot = super.attachShadow.call(\n                this,\n                shadowRootInitDict\n            ));\n        }\n\n        get scheduler(): SchedulerInterface {\n            return Scheduler;\n        }\n\n        connectedCallback() {\n            this.update();\n        }\n\n        setState(nextState: object | Function, callback?: Function): void {\n            const state: any = this.state;\n\n            this.state = {\n                ...state,\n                ...(typeof nextState === 'function'\n                    ? nextState(state, this)\n                    : nextState)\n            };\n\n            callback && this.renderCallbacks.push(callback);\n\n            this.update();\n        }\n\n        render(): Template | null {\n            return null;\n        }\n\n        update = this.scheduler.defer(() => {\n            this.rendered = true;\n\n            const template = this.render();\n            template && render(template, this.renderRoot as any);\n\n            while (this.renderCallbacks.length) this.renderCallbacks.shift()!();\n        });\n    };\n}\n","import { Constructor } from './types';\n\nfunction defineProps(constructor: any): string[] {\n    if (!constructor.__attrsMap) {\n        const props: { [key: string]: Function } = constructor.properties;\n        const attrsMap: { [key: string]: string } = Object.create(null);\n\n        if (props) {\n            for (const name in props) {\n                attrsMap[\n                    name.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase()\n                ] = name;\n\n                Object.defineProperty(constructor.prototype, name, {\n                    get(): any {\n                        return (<any>this).__props[name];\n                    },\n                    set(newValue: any) {\n                        const oldValue = (<any>this).__props[name];\n                        (<any>this).__props[name] = props[name](newValue);\n\n                        (<any>this).rendered &&\n                            oldValue !== newValue &&\n                            this.update();\n                    }\n                });\n            }\n        }\n\n        constructor.__attrsMap = attrsMap;\n        constructor.__observedProps = Object.keys(attrsMap);\n    }\n\n    return constructor.__observedProps;\n}\n\nexport function withProps<T extends Constructor>(Base: T) {\n    return class extends Base {\n        __props: object = Object.create(null);\n        [propName: string]: any;\n\n        static get observedAttributes(): string[] {\n            return defineProps(this);\n        }\n\n        attributeChangedCallback(name: string, _: string, newValue: string) {\n            this[(<any>this.constructor).__attrsMap[name]] = newValue;\n        }\n    };\n}\n","import {\n    ScheduledFunction,\n    IdleDeadline,\n    Scheduler as SchedulerInterface,\n} from './types';\n\nconst requestIdleCallback =\n    (window as any).requestIdleCallback ||\n    function(handler: Function) {\n        const start = Date.now();\n        return setTimeout(\n            () =>\n                handler({\n                    didTimeout: false,\n                    timeRemaining: () => {\n                        return Math.max(\n                            0,\n                            50 - (Date.now() - start)\n                        );\n                    },\n                }),\n            1\n        );\n    };\n\nexport class Scheduler implements SchedulerInterface {\n    tasks: ScheduledFunction[] = [];\n    private running: boolean = false;\n\n    private process = (deadline: IdleDeadline): void => {\n        const tasks = this.tasks;\n\n        while (\n            (deadline.timeRemaining() > 0 || deadline.didTimeout) &&\n            tasks.length > 0\n        ) {\n            const fn = tasks.shift();\n            (fn as any)._scheduled = false;\n            fn!();\n        }\n\n        if (tasks.length > 0) {\n            this.start();\n        } else {\n            this.running = false;\n        }\n    }\n\n    private start() {\n        requestIdleCallback(this.process, {\n            timeout: 50,\n        });\n        this.running = true;\n    }\n\n    defer(fn: ScheduledFunction): () => void {\n        return () => {\n            if (fn._scheduled === undefined) {\n                const useTask = false;\n\n                // Force first rendering\n                if (!useTask) {\n                    fn._scheduled = false;\n                    fn();\n                } else {\n                    fn._scheduled = true;\n                    Promise.resolve().then(() => {\n                        fn();\n                        fn._scheduled = false;\n                    });\n                }\n            } else if (!fn._scheduled) {\n                this.tasks.push(fn);\n                fn._scheduled = true;\n                fn._priority = 0;\n            } else {\n                fn._priority!++;\n                this.tasks.sort(\n                    (a, b) => (b as any)._priority - (a as any)._priority\n                );\n            }\n\n            if (this.tasks.length && !this.running) {\n                this.start();\n            }\n        };\n    }\n}\n\nexport default new Scheduler();\n","import { withProps } from './withProps';\nimport { withElement } from './withElement';\n\nexport const Element = withProps(withElement(HTMLElement));\n","import { html } from '@tiny-lit/core';\n\nexport default html`\n<style>\n    button {\n        margin: 0;\n        padding: 0;\n        border: 0;\n        background: none;\n        font-size: 100%;\n        vertical-align: baseline;\n        font-family: inherit;\n        font-weight: inherit;\n        color: inherit;\n        -webkit-appearance: none;\n        appearance: none;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n\n    .todoapp {\n        font: 14px 'Helvetica Neue', Helvetica, Arial, sans-serif;\n        line-height: 1.4em;\n        background: #f5f5f5;\n        color: #4d4d4d;\n        min-width: 230px;\n        max-width: 550px;\n        margin: 0 auto;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        font-weight: 300;\n    }\n\n    :focus {\n        outline: 0;\n    }\n\n    .hidden {\n        display: none;\n    }\n\n    .todoapp {\n        background: #fff;\n        margin: 130px auto;\n        position: relative;\n        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2),\n                    0 25px 50px 0 rgba(0, 0, 0, 0.1);\n    }\n\n    .todoapp input::-webkit-input-placeholder {\n        font-style: italic;\n        font-weight: 300;\n        color: #e6e6e6;\n    }\n\n    .todoapp input::-moz-placeholder {\n        font-style: italic;\n        font-weight: 300;\n        color: #e6e6e6;\n    }\n\n    .todoapp input::input-placeholder {\n        font-style: italic;\n        font-weight: 300;\n        color: #e6e6e6;\n    }\n\n    .todoapp h1 {\n        position: absolute;\n        top: -155px;\n        width: 100%;\n        font-size: 100px;\n        font-weight: 100;\n        text-align: center;\n        color: rgb(var(--primary));\n        -webkit-text-rendering: optimizeLegibility;\n        -moz-text-rendering: optimizeLegibility;\n        text-rendering: optimizeLegibility;\n    }\n\n    .new-todo,\n    .edit {\n        position: relative;\n        margin: 0;\n        width: 100%;\n        font-size: 24px;\n        font-family: inherit;\n        font-weight: inherit;\n        line-height: 1.4em;\n        border: 0;\n        color: inherit;\n        padding: 6px;\n        border: 1px solid #999;\n        box-shadow: inset 0 -1px 5px 0 rgba(0, 0, 0, 0.2);\n        box-sizing: border-box;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n\n    .new-todo {\n        padding: 16px 16px 16px 60px;\n        border: none;\n        background: rgba(0, 0, 0, 0.003);\n        box-shadow: inset 0 -2px 1px rgba(0,0,0,0.03);\n    }\n\n    .main {\n        position: relative;\n        z-index: 2;\n        border-top: 1px solid #e6e6e6;\n    }\n\n    .toggle-all {\n        text-align: center;\n        border: none; /* Mobile Safari */\n        opacity: 0;\n        position: absolute;\n    }\n\n    .toggle-all + label {\n        width: 60px;\n        height: 34px;\n        font-size: 0;\n        position: absolute;\n        top: -52px;\n        left: -13px;\n        -webkit-transform: rotate(90deg);\n        transform: rotate(90deg);\n    }\n\n    .toggle-all + label:before {\n        content: '';\n        font-size: 22px;\n        color: #e6e6e6;\n        padding: 10px 27px 10px 27px;\n    }\n\n    .toggle-all:checked + label:before {\n        color: #737373;\n    }\n\n    .todo-list {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n    }\n\n    .todo-list li {\n        position: relative;\n        font-size: 24px;\n        border-bottom: 1px solid #ededed;\n    }\n\n    .todo-list li:last-child {\n        border-bottom: none;\n    }\n\n    .todo-list li.editing {\n        border-bottom: none;\n        padding: 0;\n    }\n\n    .todo-list li.editing .edit {\n        display: block;\n        width: 506px;\n        padding: 12px 16px;\n        margin: 0 0 0 43px;\n    }\n\n    .todo-list li.editing .view {\n        display: none;\n    }\n\n    .todo-list li .toggle {\n        text-align: center;\n        width: 40px;\n        /* auto, since non-WebKit browsers doesn't support input styling */\n        height: auto;\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        margin: auto 0;\n        border: none; /* Mobile Safari */\n        -webkit-appearance: none;\n        appearance: none;\n    }\n\n    .todo-list li .toggle {\n        opacity: 0;\n    }\n\n    .todo-list li .toggle + label {\n        /*\n            Firefox requires '#' to be escaped - https://bugzilla.mozilla.org/show_bug.cgi?id=922433\n            IE and Edge requires *everything* to be escaped to render, so we do that instead of just the '#' - https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/7157459/\n        */\n        background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23ededed%22%20stroke-width%3D%223%22/%3E%3C/svg%3E');\n        background-repeat: no-repeat;\n        background-position: center left;\n    }\n\n    .todo-list li .toggle:checked + label {\n        background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23bddad5%22%20stroke-width%3D%223%22/%3E%3Cpath%20fill%3D%22%235dc2af%22%20d%3D%22M72%2025L42%2071%2027%2056l-4%204%2020%2020%2034-52z%22/%3E%3C/svg%3E');\n    }\n\n    .todo-list li label {\n        word-break: break-all;\n        padding: 15px 15px 15px 60px;\n        display: block;\n        line-height: 1.2;\n        transition: color 0.4s;\n    }\n\n    .todo-list li.completed label {\n        color: #d9d9d9;\n        text-decoration: line-through;\n    }\n\n    .todo-list li .destroy {\n        display: none;\n        position: absolute;\n        top: 0;\n        right: 10px;\n        bottom: 0;\n        width: 40px;\n        height: 40px;\n        margin: auto 0;\n        font-size: 30px;\n        color: #cc9a9a;\n        margin-bottom: 11px;\n        transition: color 0.2s ease-out;\n    }\n\n    .todo-list li .destroy:hover {\n        color: #af5b5e;\n    }\n\n    .todo-list li .destroy:after {\n        content: '';\n    }\n\n    .todo-list li:hover .destroy {\n        display: block;\n    }\n\n    .todo-list li .edit {\n        display: none;\n    }\n\n    .todo-list li.editing:last-child {\n        margin-bottom: -1px;\n    }\n\n    .footer {\n        color: #777;\n        padding: 10px 15px;\n        height: 20px;\n        text-align: center;\n        border-top: 1px solid #e6e6e6;\n    }\n\n    .footer:before {\n        content: '';\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        height: 50px;\n        overflow: hidden;\n        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2),\n                    0 8px 0 -3px #f6f6f6,\n                    0 9px 1px -3px rgba(0, 0, 0, 0.2),\n                    0 16px 0 -6px #f6f6f6,\n                    0 17px 2px -6px rgba(0, 0, 0, 0.2);\n    }\n\n    .todo-count {\n        float: left;\n        text-align: left;\n    }\n\n    .todo-count strong {\n        font-weight: 300;\n    }\n\n    .filters {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n        position: absolute;\n        right: 0;\n        left: 0;\n    }\n\n    .filters li {\n        display: inline;\n    }\n\n    .filters li a {\n        color: inherit;\n        margin: 3px;\n        padding: 3px 7px;\n        text-decoration: none;\n        border: 1px solid transparent;\n        border-radius: 3px;\n    }\n\n    .filters li a:hover {\n        border-color: rgba(175, 47, 47, 0.1);\n    }\n\n    .filters li a.selected {\n        border-color: rgba(175, 47, 47, 0.2);\n    }\n\n    .clear-completed,\n    html .clear-completed:active {\n        float: right;\n        position: relative;\n        line-height: 20px;\n        text-decoration: none;\n        cursor: pointer;\n    }\n\n    .clear-completed:hover {\n        text-decoration: underline;\n    }\n\n    .shuffle {\n        margin-right: 5px;\n    }\n\n    .info {\n        margin: 65px auto 0;\n        color: #bfbfbf;\n        font-size: 10px;\n        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);\n        text-align: center;\n    }\n\n    .info p {\n        line-height: 1;\n    }\n\n    .info a {\n        color: inherit;\n        text-decoration: none;\n        font-weight: 400;\n    }\n\n    .info a:hover {\n        text-decoration: underline;\n    }\n\n    /*\n        Hack to remove background from Mobile Safari.\n        Can't use it globally since it destroys checkboxes in Firefox\n    */\n    @media screen and (-webkit-min-device-pixel-ratio:0) {\n        .toggle-all,\n        .todo-list li .toggle {\n            background: none;\n        }\n\n        .todo-list li .toggle {\n            height: 40px;\n        }\n    }\n\n    @media (max-width: 430px) {\n        .footer {\n            height: 50px;\n        }\n\n        .filters {\n            bottom: 10px;\n        }\n    }\n</style>\n`;\n","import { html } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\nimport style from './style.js';\n\nfunction prevented(f) {\n    return e => {\n        e.stopPropagation();\n        e.preventDefault();\n        f(e);\n    };\n}\n\nfunction loadStorage(defaultValue) {\n    const s = localStorage.getItem('todoMvc');\n    return s ? JSON.parse(s) : defaultValue;\n}\n\nfunction saveStorage(value) {\n    window.requestAnimationFrame(() =>\n        localStorage.setItem('todoMvc', JSON.stringify(value))\n    );\n}\n\nfunction shuffle(array) {\n    let counter = array.length;\n\n    // While there are elements in the array\n    while (counter > 0) {\n        // Pick a random index\n        let index = Math.floor(Math.random() * counter);\n\n        // Decrease counter by 1\n        counter--;\n\n        // And swap the last element with it\n        let temp = array[counter];\n        array[counter] = array[index];\n        array[index] = temp;\n    }\n\n    return array;\n}\n\nclass TodoMVC extends Element {\n    constructor() {\n        super();\n        this.state = loadStorage({\n            todos: [],\n            filter: null,\n        });\n\n        this.attachShadow({ mode: 'open' });\n    }\n\n    static get is() {\n        return 'todo-mvc';\n    }\n\n    setState(nextState) {\n        super.setState(nextState);\n        saveStorage(this.state);\n    }\n\n    setFilter(completed) {\n        this.setState({ filter: completed });\n    }\n\n    handleAddTodo(e) {\n        this.setState({\n            todos: [\n                ...this.state.todos,\n                {\n                    text: e.target.elements[0].value,\n                    completed: false,\n                    id: Math.random()\n                        .toString()\n                        .substr(2),\n                },\n            ],\n        });\n        e.target.reset();\n    }\n\n    handleDeleteTodo(remove) {\n        this.setState({\n            todos: [...this.state.todos.filter(todo => todo !== remove)],\n        });\n    }\n\n    switchCompleted(index) {\n        return prevented(() => {\n            const todos = this.state.todos;\n\n            todos[index].completed = !todos[index].completed;\n            this.setState({\n                todos: [...todos],\n            });\n        });\n    }\n\n    handleClearCompleted() {\n        this.setState({\n            todos: [...this.state.todos.filter(todo => !todo.completed)],\n        });\n    }\n\n    connectedCallback() {\n        const rendered = this.rendered;\n\n        if (!rendered) console.time('render');\n        this.update();\n        if (!rendered) console.timeEnd('render');\n    }\n\n    render() {\n        const { filter, todos } = this.state;\n\n        return html`\n            ${style}\n            <section class=\"todoapp body\">\n                <header class=\"header\">\n                    <h1>todos</h1>\n                    <form onSubmit=${prevented(e => this.handleAddTodo(e))}>\n                        <input\n                            class=\"new-todo\"\n                            placeholder=\"What needs to be done?\"\n                            autofocus\n                        />\n                    </form>\n                </header>\n                <!-- This section should be hidden by default and shown when there are todos -->\n                <section class=\"main\">\n                    <input id=\"toggle-all\" class=\"toggle-all\" type=\"checkbox\" />\n                    <label for=\"toggle-all\">Mark all as complete</label>\n                    <ul class=\"todo-list\">\n                        <!-- These are here just to show the structure of the list items -->\n                        <!-- List items should get the class \\`editing\\` when editing and \\`completed\\` when marked as completed -->\n                        ${todos\n                                .map(\n                                    (todo, index) => (\n                                        (todo.index = index), todo\n                                    )\n                                )\n                                .filter(\n                                    todo =>\n                                        filter === null ||\n                                        todo.completed === filter\n                                ).map(\n                            todo =>\n                                html`\n                            <li class=${todo.completed ? 'completed' : ''}>\n                                <div\n                                    class=\"view\"\n                                >\n                                    <input\n                                        class=\"toggle\"\n                                        type=\"checkbox\"\n                                        checked=${todo.completed}\n                                        onClick=${this.switchCompleted(todo.index)}\n                                    />\n                                    <label onClick=${this.switchCompleted(todo.index)}>${todo.text}</label>\n                                    <button class=\"destroy\" onClick=${prevented(\n                                        () => this.handleDeleteTodo(todo)\n                                    )}></button>\n                                </div>\n                                <input class=\"edit\" value=${todo.text} />\n                            </li>\n                        `.withKey(todo.id)\n                        )}\n                    </ul>\n                </section>\n                <!-- This footer should hidden by default and shown when there are todos -->\n                <footer class=\"footer\">\n                    <!-- This should be \\`0 items left\\` by default -->\n                    <span class=\"todo-count\">\n                        <strong>${todos.filter(todo => !todo.completed).length}\n                        </strong> item left\n                    </span>\n\n                    <ul class=\"filters\">\n                        <li>\n                            <a\n                                class=${filter === null && 'selected'}\n                                href=\"#/\"\n                                onClick=${prevented(() => this.setFilter(null))}\n                            >\n                                All\n                            </a>\n                        </li>\n                        <li>\n                            <a\n                                class=${filter === false && 'selected'}\n                                href=\"#/active\"\n                                onClick=${prevented(() =>\n                                    this.setFilter(false)\n                                )}\n                            >\n                                Active\n                            </a>\n                        </li>\n                        <li>\n                            <a\n                                class=${filter && 'selected'}\n                                href=\"#/completed\"\n                                onClick=${prevented(() => this.setFilter(true))}\n                            >\n                                Completed\n                            </a>\n                        </li>\n                    </ul>\n                    <!-- Hidden if no completed items are left  -->\n                    <button class=\"clear-completed\" onClick=${prevented(() =>\n                        this.handleClearCompleted()\n                    )}>Clear completed</button>\n                    <button class=\"clear-completed shuffle\" onClick=${prevented(\n                        () =>\n                            this.setState({ todos: shuffle(this.state.todos) })\n                    )}>Shuffle</button>\n                </footer>\n            </section>\n            <footer class=\"info\">\n                <p>Double-click to edit a todo</p>\n                <!-- Change this out with your name and url  -->\n                <p>Created by <a href=\"http://todomvc.com\">you</a></p>\n                <p>Part of <a href=\"http://todomvc.com\">TodoMVC</a></p>\n            </footer>\n        `;\n    }\n}\n\ncustomElements.define(TodoMVC.is, TodoMVC);\n","import { html } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\n\nclass KarpinskyDot extends Element {\n    static get is() {\n        return 'karpinsky-dot';\n    }\n\n    static get properties() {\n        return {\n            x: Number,\n            y: Number,\n            size: Number,\n            text: String,\n            hover: Boolean,\n        };\n    }\n\n    x = 0;\n    y = 0;\n    size = 0;\n    text = '';\n    hover = false;\n\n    constructor() {\n        super();\n\n        // this.addEventListener('mouseover', () => this.setState({ hover: true }));\n        // this.addEventListener('mouseleave', () => this.setState({ hover: false }));\n        this.addEventListener('mouseover', () => (this.hover = true));\n        this.addEventListener('mouseleave', () => (this.hover = false));\n\n        this.attachShadow({ mode: 'closed' });\n    }\n\n    render() {\n        const { hover, text, x, y, size } = this;\n        const s = size * 1.3;\n\n        return html`\n            <style>\n                span {\n                    position: absolute;\n                    font: normal 15px sans-serif;\n                    text-align: center;\n                    cursor: pointer;\n                    color: black;\n                    width: ${s}px;\n                    height: ${s}px;\n                    left: ${x}px;\n                    top: ${y}px;\n                    border-radius: ${s / 2}px;\n                    line-height: ${s}px;\n                    background: ${hover ? '#ff0' : '#61dafb'};\n                }\n            </style>\n            <span>\n                ${hover ? '**' + text + '**' : text}\n            </span>\n        `;\n    }\n}\n\ncustomElements.define(KarpinskyDot.is, KarpinskyDot);","import { html } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\n\nconst targetSize = 25;\n\nclass KarpinskyTriangle extends Element {\n    static get is() {\n        return 'karpinsky-triangle';\n    }\n\n    static get properties() {\n        return {\n            x: Number,\n            y: Number,\n            s: Number,\n            seconds: Number,\n        };\n    }\n    x = 0;\n    y = 0;\n    s = 0;\n    seconds = 0;\n\n    constructor() {\n        super();\n\n        //this.attachShadow({ mode: 'open' });\n    }\n\n    render() {\n        let { s, seconds, x, y } = this;\n\n        if (s <= targetSize) {\n            return html`\n                <karpinsky-dot x=${x - targetSize / 2} y=${y -\n                targetSize / 2} size=${targetSize} text=${seconds} />\n            `;\n        }\n\n        s = s / 2;\n\n        let slowDown = true;\n        if (slowDown) {\n            let e = performance.now() + 0.8;\n            while (performance.now() < e) {\n                // Artificially long execution time.\n            }\n        }\n\n        return html`\n            <karpinsky-triangle x=${x} y=${y -\n            s / 2} s=${s} seconds=${seconds}></karpinsky-triangle>\n            <karpinsky-triangle x=${x - s} y=${y +\n            s / 2} s=${s} seconds=${seconds}></karpinsky-triangle>\n            <karpinsky-triangle x=${x + s} y=${y +\n            s / 2} s=${s} seconds=${seconds}></karpinsky-triangle>\n        `;\n    }\n}\n\ncustomElements.define(KarpinskyTriangle.is, KarpinskyTriangle);","import { html } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\nimport './Dot';\nimport './Triangle';\n\nfunction rafInterval(fn) {\n    let running = true;\n\n    function run() {\n        fn();\n        running && requestAnimationFrame(run);\n    }\n\n    requestAnimationFrame(run);\n\n    return () => (running = false);\n}\n\n\nclass KarpinskyDemo extends Element {\n    static get is() {\n        return 'karpinsky-demo';\n    }\n\n    constructor() {\n        super();\n\n        // this.attachShadow({ mode: 'closed' });\n    }\n\n    connectedCallback() {\n        const rendered = this.rendered;\n\n        if (!rendered) console.time('render');\n\n        this.start = Date.now();\n        this.timerInterval = setInterval(this.tick.bind(this), 1000);\n        this.renderInterval = rafInterval(this.update);\n        this.setState({\n            seconds: 0,\n        });\n\n        if (!rendered) console.timeEnd('render');\n    }\n\n    disconnectedCallback() {\n        this.renderInterval();\n        clearInterval(this.timerInterval);\n    }\n\n    tick() {\n        this.setState({\n            seconds: (this.state.seconds % 10) + 1,\n        });\n    }\n\n    getStyle() {\n        const elapsed = Date.now() - this.start;\n        const t = (elapsed / 1000) % 10;\n        const scale = 1 + (t > 5 ? 10 - t : t) / 10;\n\n        return `\n            position: absolute;\n            transform-origin: 0 0;\n            width: 10px;\n            height: 10px;\n            left: 50%;\n            top: 50%;\n            transform: scaleX(${scale / 2.1}) scaleY(0.7) translateZ(0.1px) translateX(50%)\n        `;\n    }\n\n    render() {\n        const { seconds } = this.state;\n\n        return html`\n            <style>\n                :host {\n                    color: black;\n                }\n            </style>\n            <div style=${this.getStyle()}>\n                <karpinsky-triangle x=${0} y=${0} s=${1000} seconds=${seconds} />\n            </div>\n        `;\n    }\n}\n\ncustomElements.define(KarpinskyDemo.is, KarpinskyDemo);\n","import {\n    Constructor,\n    CustomElement,\n    StoreConnectedElement,\n    StoreEvents,\n    UpdateEvent,\n    Mutation\n} from './types';\nimport { requestStore, createDispatchEvent } from './events';\n\nexport function withStore<T extends Constructor<CustomElement & HTMLElement>>(\n    Base: T\n) {\n    return class extends Base implements StoreConnectedElement {\n        unsubscribe?: Function;\n\n        connectedCallback() {\n            if (super.connectedCallback) super.connectedCallback();\n\n            let store;\n            if (store = requestStore(this)) {\n                const handler = e =>\n                    this.onStateChange!(\n                        (<UpdateEvent>e).detail.state,\n                        (<UpdateEvent>e).detail.mutation\n                    );\n                store.addEventListener(StoreEvents.Update, handler, true);\n                this.unsubscribe = store.removeEventListener.bind(\n                    this,\n                    StoreEvents.Update,\n                    handler,\n                    true\n                );\n\n                this.onStateChange(store.getStore().state);\n            }\n        }\n\n        disconnectedCallback() {\n            if (super.disconnectedCallback) super.disconnectedCallback();\n\n            this.unsubscribe!();\n        }\n\n        onStoreConnect() { }\n\n        onStateChange(_: any, __?: Mutation) { }\n\n        dispatch(type: string, data?: any) {\n            this.dispatchEvent(createDispatchEvent(type, data));\n        }\n    };\n}\n","export interface CustomElement {\n    connectedCallback?(): void;\n    disconnectedCallback?(): void;\n    adoptedCallback?(): void;\n    attributeChangedCallback?(\n        name: string,\n        oldValue: string,\n        newValue: string\n    ): void;\n    observedAttributes?: Array<string>;\n}\nexport type Constructor<T = {}> = new (...args: any[]) => T;\nexport interface StoreEvent {\n    type: string;\n    data: any;\n}\n\nexport type Action = StoreEvent;\nexport type Mutation = StoreEvent;\n\nexport type SubcribeCallback = (state: any, mutation?: Mutation) => void;\n\nexport interface UpdateEvent extends CustomEvent {\n    detail: {\n        mutation?: Mutation;\n        state: any;\n    };\n}\n\nexport interface DispatchEvent extends CustomEvent {\n    detail: Action;\n}\n\nexport interface StoreProviderInterface extends HTMLElement{\n    getStore(): StoreInterface;\n    config: StoreConfig;\n}\nexport interface StoreConnectedElement {\n    unsubscribe?: Function;\n    onStateChange?(state: any, mutation?: Mutation);\n    onStoreConnect?(unsubscribe: Function);\n}\n\nexport interface StoreInterface {\n    state: any;\n    mutations: Map<string, MutationHandler>;\n    actions: Map<string, ActionHandler>;\n    dispatch(action: string | Action, payload?: any);\n    subscribe(callback: Function);\n    commit(mutation: string);\n}\n\nexport type MutationHandler = (state?: any, data?: any) => object;\nexport type ActionHandler = (store: StoreInterface, payload: any) => void;\nexport type PluginHandler = (store: StoreInterface) => void;\n\nexport type StoreConfig = {\n    actions?: { [name: string]: ActionHandler };\n    mutations?: { [name: string]: MutationHandler };\n    initialState?: any;\n    plugins?: Array<PluginHandler>;\n};\n\nexport enum StoreEvents {\n    Request = 'store::request',\n    Dispatch = 'store::dispatch',\n    Update = 'store::update',\n}\n\nexport type RequestStoreEvent = CustomEvent<{ store?: StoreProviderInterface }>;","import {\n    StoreEvents,\n    StoreEvent,\n    Mutation,\n    UpdateEvent,\n    DispatchEvent,\n    RequestStoreEvent,\n    StoreProviderInterface,\n} from './types';\n\nexport function normalizeEvent(fn) {\n    return (event: string | StoreEvent, data?: any) => {\n        if (typeof event === 'string') event = { type: event, data };\n\n        return fn(event);\n    };\n}\n\nexport function requestStore(el: HTMLElement): StoreProviderInterface | undefined {\n    const event = new CustomEvent(StoreEvents.Request, { detail: {} }) as RequestStoreEvent;\n    el.dispatchEvent(event);\n\n    return event.detail.store;\n}\n\nexport function createUpdateEvent(\n    state: any,\n    mutation?: Mutation\n): UpdateEvent {\n    return new CustomEvent(StoreEvents.Update, {\n        detail: {\n            state,\n            mutation,\n        },\n    });\n}\n\nexport function createDispatchEvent(type: string, data?: any): DispatchEvent {\n    return new CustomEvent(StoreEvents.Dispatch, {\n        detail: {\n            type,\n            data,\n        },\n    });\n}\n","import {\n    Action,\n    StoreConfig,\n    StoreInterface,\n    Mutation,\n    SubcribeCallback,\n    MutationHandler,\n    ActionHandler\n} from './types';\n\nimport { normalizeEvent } from './events';\n\nconst StateProp = Symbol();\n\nconst objToMap = (obj: any, map: Map<any, any>) => {\n    for (const key in obj) map.set(key, obj[key]);\n};\n\nexport class Store<S> implements StoreInterface {\n    [StateProp]: S = {} as S;\n    readonly mutations: Map<string, MutationHandler> = new Map();\n    readonly actions: Map<string, ActionHandler> = new Map();\n    private listeners: Set<Function> = new Set();\n\n    constructor(config: StoreConfig = {}) {\n        objToMap(config.mutations, this.mutations);\n        objToMap(config.actions, this.actions);\n\n        this[StateProp] = { ...config.initialState };\n\n        if (config.plugins)\n            config.plugins!.forEach(plugin => plugin(this));\n    }\n\n    dispatch = normalizeEvent((action: Action) => {\n        const actions = this.actions;\n        if (actions.has(action.type)) actions.get(action.type)!(this, action.data);\n    });\n\n    get state(): S {\n        return this[StateProp];\n    }\n\n    subscribe(callback: SubcribeCallback) {\n        const { listeners } = this;\n\n        const handler = (mutation?: Mutation) => callback(this.state, mutation);\n\n        listeners.add(handler);\n        callback(this.state);\n\n        return () => listeners.delete(handler);\n    }\n\n    commit = normalizeEvent((mutation: Mutation) => {\n        const mutations = this.mutations;\n        if (mutations.has(mutation.type)) {\n            this[StateProp] = <any>mutations.get(mutation.type)!(this.state, mutation.data);\n        }\n\n        this.listeners.forEach(listener => listener(mutation));\n    });\n}\n\nexport const createStore = (store: StoreConfig) => {\n    return new Store(store);\n};\n","import {\n    StoreEvents,\n    StoreInterface,\n    StoreProviderInterface,\n    Mutation,\n    StoreConfig,\n    RequestStoreEvent,\n} from './types';\nimport { createUpdateEvent } from './events';\nimport { createStore } from './store';\n\nexport abstract class StoreProvider extends HTMLElement\n    implements StoreProviderInterface {\n    store?: StoreInterface = undefined;\n    listeners: WeakMap<object, Function> = new WeakMap();\n\n    constructor() {\n        super();\n\n        this.addEventListener(StoreEvents.Request, <any>this.onStoreRequest, true);\n        this.addEventListener(StoreEvents.Dispatch, this.onStoreDispatch, true);\n\n        this.store = createStore(this.config);\n        this.store.subscribe(this.onStateChange);\n    }\n\n    get config(): StoreConfig {\n        return {};\n    }\n\n    getStore(): StoreInterface {\n        return this.store!;\n    }\n\n    onStateChange = (state: any, mutation?: Mutation) =>\n        this.dispatchEvent(createUpdateEvent(state, mutation))\n\n    onStoreRequest = (event: RequestStoreEvent) => {\n        event.stopPropagation();\n        event.detail.store = this;\n    }\n\n    onStoreDispatch = (event: Event) => {\n        this.getStore().dispatch((<CustomEvent>event).detail);\n    }\n}\n","import { StoreProvider, withStore, createStore } from '@tiny-lit/store';\nimport { html } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\n\nconst JSONObject = value => {\n    if (typeof value !== object) {\n        try {\n            value = JSON.parse(value);\n        } catch (e) {}\n    }\n    return value;\n};\n\nconst Items = [\n    {\n        name: 'Men+s+Tech+Shell+Full-Zip',\n        title: \"Men's Tech Shell Full-Zip\",\n        category: 'mens_outerwear',\n        price: 50.2\n    },\n    {\n        name: 'Anvil+L+S+Crew+Neck+-+Grey',\n        title: 'Anvil L/S Crew Neck - Grey',\n        category: 'mens_outerwear',\n        price: 22.15\n    },\n    {\n        name: 'Green+Flex+Fleece+Zip+Hoodie',\n        title: 'Green Flex Fleece Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 45.65\n    },\n    {\n        name: 'Android+Nylon+Packable+Jacket',\n        title: 'Android Nylon Packable Jacket',\n        category: 'mens_outerwear',\n        price: 33.6\n    },\n    {\n        name: 'YouTube+Ultimate+Hooded+Sweatshirt',\n        title: 'YouTube Ultimate Hooded Sweatshirt',\n        category: 'mens_outerwear',\n        price: 32.35\n    },\n    {\n        name: 'Grey+Heather+Fleece+Zip+Hoodie',\n        title: 'Grey Heather Fleece Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 38.85\n    },\n    {\n        name: 'Vastrm+Hoodie',\n        title: 'Vastrm Hoodie',\n        category: 'mens_outerwear',\n        price: 200.0\n    },\n    {\n        name: 'Recycled+Plastic+Bottle+Hoodie+-+Green',\n        title: 'Recycled Plastic Bottle Hoodie - Green',\n        category: 'mens_outerwear',\n        price: 60.95\n    },\n    {\n        name: 'Rowan+Pullover+Hood',\n        title: 'Rowan Pullover Hood',\n        category: 'mens_outerwear',\n        price: 60.85\n    },\n    {\n        name: 'Men+s+Voyage+Fleece+Jacket',\n        title: \"Men's Voyage Fleece Jacket\",\n        category: 'mens_outerwear',\n        price: 48.0\n    },\n    {\n        name: 'Eco-Jersey+Chrome+Zip+Up+Hoodie',\n        title: 'Eco-Jersey Chrome Zip Up Hoodie',\n        category: 'mens_outerwear',\n        price: 37.75\n    },\n    {\n        name: 'Android+Colorblock+Hooded+Pullover',\n        title: 'Android Colorblock Hooded Pullover',\n        category: 'mens_outerwear',\n        price: 50.2\n    },\n    {\n        name: 'Tri-blend+Full-Zip+Hoodie',\n        title: 'Tri-blend Full-Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 52.2\n    },\n    {\n        name: 'Fleece+Full-Zip+Hoodie',\n        title: 'Fleece Full-Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 45.65\n    },\n    {\n        name: 'Jacquard-Knit+Full-Zip+Fleece',\n        title: 'Jacquard-Knit Full-Zip Fleece',\n        category: 'mens_outerwear',\n        price: 74.9\n    },\n    {\n        name: 'YouTube+Unisex+Flex+Fleece+Zip+Hoodie',\n        title: 'YouTube Unisex Flex Fleece Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 45.25\n    }\n];\n\nconst ElementWithStore = withStore(Element);\n\nclass MyStore extends StoreProvider {\n    static get is() {\n        return 'my-store';\n    }\n\n    get config() {\n        return {\n            initialState: {\n                ...JSON.parse(this.getAttribute('initial-state')),\n                cart: [],\n                count: 0\n            },\n            plugins: [store => store.subscribe(console.log)],\n            actions: {\n                addToCart({ commit }, item) {\n                    commit('addItem', item);\n                    commit('updateCount');\n                },\n                removeFromCart({ commit }, item) {\n                    commit('removeItemByIndex', item);\n                    commit('updateCount');\n                },\n                removeAllFromCart({ commit, state }) {\n                    let items = state.cart;\n\n                    items.forEach(item => commit('removeItem', item));\n\n                    commit('updateCount');\n                }\n            },\n            mutations: {\n                addItem(state, data) {\n                    return{\n                        ...state,\n                        cart: [\n                            ...state.cart,\n                            data\n                        ]\n                    };\n                },\n                removeItemByIndex(state, data) {\n                    return{\n                        ...state,\n                        cart: state.cart.filter((a, i) => i !== data)\n                    };\n                },\n                removeItem(state, item) {\n                    return {\n                        ...state,\n                        cart: state.cart.filter(i => i !== item)\n                    };\n                },\n                updateCount(state) {\n                    return {\n                        ...state,\n                        count: state.cart.length\n                    };\n                }\n            }\n        };\n    }\n}\ncustomElements.define(MyStore.is, MyStore);\n\nclass Basket extends ElementWithStore {\n    constructor() {\n        super();\n        this.count = 0;\n        this.items = [];\n        this.state = {\n            open: false\n        };\n    }\n\n    static get properties() {\n        return {\n            count: Number,\n            items: Object\n        };\n    }\n\n    onStateChange(state) {\n        this.count = state.count;\n        this.items = state.cart;\n    }\n\n    static get is() {\n        return 'shop-basket';\n    }\n\n    handleRemove(index) {\n        this.dispatch('removeFromCart', index);\n    }\n\n    handleRemoveAll() {\n        this.dispatch('removeAllFromCart');\n    }\n\n    toggleCart = () => {\n        this.setState({\n            open: !this.state.open\n        })\n    }\n\n    render() {\n        return html`\n            <style>\n                .basket {\n                    position: fixed;\n                    bottom: 0;\n                    right: 10px;\n                    color: white;\n                    z-index: 100;\n                }\n\n                .basket__list {\n                    z-index: 100;\n                    overflow-y: scroll;\n                    max-height: 150px;\n                    margin: 0;\n                }\n\n                .basket__listItem  {\n                    margin-bottom: 5px;\n                }\n\n                .basket__listItemButton {\n                    padding: 3px 5px;\n                }\n\n                .basket__dropdown {\n                    position: absolute;\n                    bottom: calc(100% + 10px);\n                    background-color: rgb(var(--background));\n                    width: 300px;\n                    right: 0;\n                    padding: 10px;\n                    border: 1px solid rgb(var(--primary));\n                }\n\n                .basket__toggle {\n                    position: relative;\n                }\n\n                .basket__badge {\n                    background: rgb(var(--primary));\n                    border-radius: 50%;\n                    padding: 2px;\n                    color: rgb(var(--background));\n                    position: absolute;\n                    top: 0;\n                    right: 0;\n                    width: 15px;\n                    height: 15px;\n                    font-size: 12px;\n                    line-height: 15px;\n                    margin: 5px 10px 0;\n                }\n\n                .basket__clear {\n                    float:right;\n                    margin-top: 20px;\n                }\n            </style>\n            <div class=\"basket\">\n                <button class=\"basket__toggle\" onClick=${this.toggleCart}>\n                    <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        viewBox=\"0 0 576 512\"\n                        width=\"24\"\n                    >\n                        <path\n                            fill=\"currentColor\"\n                            d=\"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z\"\n                        ></path>\n                    </svg>\n                    <span class=\"basket__badge\">${this.count}</span>\n                </button>\n                <div class=\"basket__dropdown\" hidden=${!this.state.open}>\n                    <span>Total: ${this.count}${html`<span>items</span>`}</span>\n\n\n                    <table class=\"basket__list\">\n                        <thead>\n                            <tr>\n                                <th>Item</th>\n                                <th>Qty</th>\n                                <th></th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${this.items.map(\n                                (item, index) => html`\n                                <tr>\n                                    <td>${item.title}</td>\n                                    <td>1</td>\n                                    <td>\n                                        <button\n                                            class=\"basket__listItemButton\"\n                                            onCLick=${() => this.handleRemove(index)}\n                                        >\n                                            X\n                                        </button>\n                                    </td>\n                                </tr>\n                            `)}\n                        </tbody>\n                    </table>\n\n                    ${\n                        this.items.length\n                            ? html`<button class=\"basket__clear\" onClick=${() =>\n                                this.handleRemoveAll()}>remove all</button>`\n                            : null\n                    }\n                </div>\n            </div>\n        `;\n    }\n}\ncustomElements.define(Basket.is, Basket);\n\nclass Item extends ElementWithStore {\n    item = {};\n\n    static get is() {\n        return 'shop-item';\n    }\n\n    static get properties() {\n        return {\n            c: JSONObject\n        };\n    }\n\n    handleClick = () => {\n        this.dispatch('addToCart', this.item);\n    };\n\n    render() {\n        return html`\n            <div class=\"detail\" has-content=\"\">\n                <img\n                    src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw\"\n                    width=\"300\"\n                    height=\"300\"\n                    class=\"image\"\n                />\n                <h1>${this.item.title}</h1>\n                <div class=\"price\">${this.item.price}$</div>\n                <button\n                    onClick=${this.handleClick}\n                    class=\"button\"\n                    aria-label=\"Add this item to cart\"\n                >\n                    Add to Cart\n                </button>\n            </div>\n        `;\n    }\n}\ncustomElements.define(Item.is, Item);\n\nclass StoreDemo extends Element {\n    static get is() {\n        return 'store-demo';\n    }\n\n    render() {\n        return html`\n            <style>\n                h1 {\n                    font-size: 13px;\n                    font-weight: 500;\n                    line-height: 28px;\n                    margin: 0;\n                }\n                .detail {\n                    text-align:center;\n                    margin: 0 28px 48px;\n                }\n                .price {\n                    margin: 0px 0 10px;\n                    font-size: 13px;\n                }\n                .image {\n                    max-width: 100%;\n                    background: rgb(117, 117, 117);\n                }\n                my-store {\n                    display: flex;\n                    flex-wrap: wrap;\n                    position: relative;\n                }\n                shop-item {\n                    flex: 1 1;\n                    flex-basis: 33%;\n                    max-width: 33%;\n                }\n                @media (max-width: 767px) {\n                    shop-item {\n                        flex-basis: 100%;\n                        max-width: 100%;\n                    }\n                }\n            </style>\n            <my-store>\n                <shop-basket></shop-basket>\n                ${Items.map(item => html`<shop-item item=${item}></shop-item>`)}\n            </my-store>\n        `;\n    }\n}\n\ncustomElements.define(StoreDemo.is, StoreDemo);\n","import { html, render } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\n\nconst t = c => html`\n    <div>${c}</div>\n`;\n\nclass Svg extends Element {\n    static get is() {\n        return 'test-svg';\n    }\n\n    maxRadius = 50;\n    state = {\n        radius: 0\n    };\n\n    constructor() {\n        super();\n        this.attachShadow({ mode: 'open' });\n    }\n\n    onChange = ({ target }) => {\n        this.maxRadius = Number(target.value);\n        this.update();\n    };\n\n    connectedCallback() {\n        super.connectedCallback();\n\n        this.interval = setInterval(\n            () =>\n                this.setState({\n                    radius: Math.abs(Math.sin(Date.now() / 1000) * this.maxRadius)\n                }),\n            20\n        );\n    }\n\n    disconnectedCallback() {\n        clearInterval(this.interval);\n    }\n\n    render() {\n        return html`\n            <style>\n                :host {\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-between;\n                    flex-direction: column;\n                    height: 50vh;\n                }\n            </style>\n            <div>\n                <p>Max size</p>\n                <input\n                    type=\"range\"\n                    min=\"10\"\n                    max=\"100\"\n                    onChange=${this.onChange}\n                    value=${this.radius}\n                />\n            </div>\n            <svg height=${this.maxRadius * 2} width=${this.maxRadius * 2}>\n                <circle\n                    cx=${this.maxRadius}\n                    cy=${this.maxRadius}\n                    r=\"${this.state.radius}\"\n                    stroke=\"black\"\n                    stroke-width=\"3\"\n                    fill=\"red\"\n                />\n                Sorry, your browser does not support inline SVG.\n            </svg>\n        `;\n    }\n}\ncustomElements.define(Svg.is, Svg);\n","import { Router, RouteComponent } from './types';\nimport { requestRouter } from './events';\n\nconst importedModules = new Set();\nconst importModule = url =>\n    new Promise(resolve => {\n        if (!url || importedModules.has(url)) return resolve();\n        else {\n            const script = document.createElement('script');\n            script.onload = resolve;\n            script.src = url;\n\n            document.appendChild(script);\n\n            importedModules.add(url);\n        }\n    });\n\nconst waitComponent = (route: RouteElement, component: HTMLElement) =>\n    importModule(route.getAttribute('module')!)\n        // TODO check element upgrade\n        .then(() => customElements.whenDefined(component.localName));\n\nexport class RouteElement extends HTMLElement {\n    router?: Router;\n    dispose?: Function;\n\n    connectedCallback() {\n        const path = this.getAttribute('path'),\n            componentName = this.getAttribute('component');\n\n        if (!path || !componentName) return;\n\n        if ((this.router = requestRouter(this))) {\n            const component: RouteComponent = document.createElement(\n                componentName\n            );\n\n            this.dispose = this.router.on(path, {\n                onEnter: params => {\n                    waitComponent(this, component)\n                        .then(() => this.appendChild(component))\n                        .then(\n                            () =>\n                                component.onRouteEnter &&\n                                component.onRouteEnter(params)\n                        );\n                },\n                onUpdate: params => {\n                    waitComponent(this, component).then(\n                        () =>\n                            component.onRouteUpdate &&\n                            component.onRouteUpdate(params)\n                    );\n                },\n                onLeave: () => {\n                    waitComponent(this, component)\n                        .then(\n                            () =>\n                                component.onRouteLeave &&\n                                component.onRouteLeave()\n                        )\n                        .then(() => this.removeChild(component));\n                }\n            });\n        }\n    }\n\n    disconnectedCallback() {\n        if (this.dispose) this.dispose();\n    }\n}\n","import { HistoryInterface } from '../types';\n\nexport default (): HistoryInterface => ({\n    path() {\n        return location.hash ? location.hash.substring(1) : '/';\n    },\n    go(path: string) {\n        location.hash = `#${path}`;\n    },\n    listen(callback) {\n        addEventListener('hashchange', <any>callback);\n\n        return removeEventListener.bind(window, 'hashchange', callback);\n    }\n});\n","import {\n    RouteCallbacks,\n    Route,\n    Router as RouterInterface,\n    HistoryInterface\n} from './types';\nimport { RouterOptions } from './types';\nimport { createPathHistory, createHashHistory } from './history';\n\n/**\n * Valid paths:\n * Required\n * /:param\n *\n * Optional\n * /:param?\n *\n * Required matching list\n * /:param{test1,test2}\n *\n * Optional matching list\n * /:param{test1,test2}?\n * @param {*} path\n */\nconst ParamsRegex: RegExp = /\\/:([\\w]+)(?:{([\\w,]+)})?(\\?)?/g;\n\nfunction parsePath(path: string) {\n    let m,\n        params: Array<string> = [],\n        pattern = path;\n\n    if (path === '*') {\n        return {\n            regex: /.*/,\n            params: []\n        };\n    }\n\n    while ((m = ParamsRegex.exec(path))) {\n        const paramRegex = m[2] ? `${m[2].split(',').join('|')}` : '[^/]+';\n\n        params.push(m[1]);\n        pattern = pattern.replace(\n            m[0],\n            `(?:\\\\/(${paramRegex}))${m[3] ? '?' : ''}`\n        );\n    }\n\n    return {\n        regex: new RegExp(`^${pattern}\\\\/?$`),\n        params\n    }\n}\n\nexport class Router implements RouterInterface {\n    history: HistoryInterface;\n    routes: Array<Route> = [];\n    current?: Route;\n\n    constructor({ interceptLocals, useHash }: RouterOptions) {\n        if (useHash) this.history = createHashHistory();\n        else this.history = createPathHistory();\n\n        this.history.listen(this.resolve);\n\n        if (interceptLocals)\n            document.addEventListener('click', this.handleLocalClick);\n    }\n\n    handleLocalClick = e => {\n        const target = e.target;\n        if (\n            target.nodeName === 'A' &&\n            target.href.indexOf(location.origin) === 0\n        ) {\n            e.preventDefault();\n\n            this.goTo(target.getAttribute('href'));\n        }\n    }\n\n    on(path: string, callbacks: RouteCallbacks = {}) {\n        const route = {\n            path,\n            callbacks,\n            ...parsePath(path)\n        };\n        this.routes.push(route);\n\n        return () => (this.routes = this.routes.filter(r => r !== route));\n    }\n\n    resolve = () => {\n        const path = this.history.path();\n        const current = this.current;\n\n        this.routes.some((route: Route) => {\n            let match: any = path.match(route.regex);\n            const { onEnter, onUpdate } = route.callbacks;\n\n            if (match) {\n                match = match\n                    .filter(m => m !== undefined)\n                    .reduce((map, m, i) => {\n                        if (i) map[route.params[i - 1]] = m;\n                        return map;\n                    }, {});\n\n                if (current !== route) {\n                    this.current = route;\n\n                    if (current)\n                        current.callbacks.onLeave!(match);\n\n                    onEnter!(match);\n                } else {\n                    onUpdate!(match);\n                }\n            }\n\n            return match;\n        });\n    }\n\n    goTo(path) {\n        this.history.go(path);\n    }\n}\n","import { HistoryInterface } from '../types';\n\nexport default (): HistoryInterface => ({\n    path() {\n        return location.pathname;\n    },\n    go(path: string) {\n        history.pushState(null, document.title, path);\n        dispatchEvent(new Event('pushstate'));\n    },\n    listen(callback) {\n        addEventListener('popstate', <any>callback);\n        addEventListener('pushstate', <any>callback);\n\n        return removeEventListener.bind(window, 'popstate', callback);\n    }\n});","import { Router } from './router';\nimport { RouterEvents, RequestRouterEvent } from './types';\n\nexport class RouterProvider extends HTMLElement {\n    router?: Router;\n\n    onRouterRequest = (e: RequestRouterEvent) => {\n        e.detail.router = this.router;\n    }\n\n    connectedCallback() {\n        document.body.addEventListener(RouterEvents.Request, <any>this.onRouterRequest, true);\n\n        if (!this.router) {\n            this.router = new Router({\n                interceptLocals: this.hasAttribute('intercept-locals'),\n                useHash: this.hasAttribute('use-hash')\n             });\n        }\n\n        requestAnimationFrame(() => this.router!.resolve());\n    }\n\n    disconnectedCallback() {\n        document.body.removeEventListener(RouterEvents.Request, <any>this.onRouterRequest, true);\n    }\n}\n","import './todo';\nimport './karpinsky';\nimport './store';\nimport './svg';\n\nimport { RouterProvider, RouteElement } from '@tiny-lit/router';\n\ncustomElements.define('demo-router', RouterProvider);\ncustomElements.define('demo-route', RouteElement);\n"]}