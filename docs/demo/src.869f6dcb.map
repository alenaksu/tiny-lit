{"version":3,"sources":["node_modules/@tiny-lit/core/src/utils.ts","node_modules/@tiny-lit/core/src/expressions.ts","node_modules/@tiny-lit/core/src/linker.ts","node_modules/@tiny-lit/core/src/parser.ts","node_modules/@tiny-lit/core/src/template.ts","node_modules/@tiny-lit/core/src/index.ts","node_modules/@tiny-lit/element/src/withProps.ts","node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/utils.ts","node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/expressions.ts","node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/linker.ts","node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/parser.ts","node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/template.ts","node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/index.ts","node_modules/@tiny-lit/element/src/Scheduler.ts","node_modules/@tiny-lit/element/src/withElement.ts","node_modules/@tiny-lit/element/src/Element.ts","node_modules/@tiny-lit/element/src/index.ts","src/todo/style.js","src/todo/index.js","src/karpinsky/Dot.js","src/karpinsky/Triangle.js","src/karpinsky/index.js","node_modules/@tiny-lit/store/src/types.ts","node_modules/@tiny-lit/store/src/events.ts","node_modules/@tiny-lit/store/src/store.ts","node_modules/@tiny-lit/store/src/withStore.ts","node_modules/@tiny-lit/store/src/StoreProvider.ts","node_modules/@tiny-lit/store/src/index.ts","src/store/index.js","src/svg/index.js","node_modules/@tiny-lit/router/src/history/hash.ts","node_modules/@tiny-lit/router/src/history/path.ts","node_modules/@tiny-lit/router/src/history/index.ts","node_modules/@tiny-lit/router/src/router.ts","node_modules/@tiny-lit/router/src/types.ts","node_modules/@tiny-lit/router/src/events.ts","node_modules/@tiny-lit/router/src/RouteElement.ts","node_modules/@tiny-lit/router/src/RouterProvider.ts","node_modules/@tiny-lit/router/src/index.ts","src/index.js"],"names":["html","prevented","f","e","stopPropagation","preventDefault","loadStorage","defaultValue","s","localStorage","getItem","JSON","parse","saveStorage","value","window","requestAnimationFrame","setItem","stringify","shuffle","array","counter","length","index","Math","floor","random","temp","TodoMVC","state","todos","filter","attachShadow","mode","Element","nextState","completed","setState","text","target","elements","id","toString","substr","reset","remove","todo","rendered","console","time","update","timeEnd","style","handleAddTodo","map","switchCompleted","handleDeleteTodo","withKey","setFilter","handleClearCompleted","customElements","define","is","KarpinskyDot","x","y","size","hover","addEventListener","Number","String","Boolean","targetSize","KarpinskyTriangle","seconds","performance","slowDown","now","rafInterval","fn","running","run","KarpinskyDemo","start","Date","timerInterval","setInterval","tick","bind","renderInterval","clearInterval","elapsed","t","scale","getStyle","JSONObject","object","Items","name","title","category","price","ElementWithStore","MyStore","StoreProvider","initialState","getAttribute","cart","count","plugins","store","subscribe","log","actions","addToCart","item","commit","removeFromCart","removeAllFromCart","forEach","mutations","addItem","data","removeItemByIndex","a","i","removeItem","updateCount","Basket","toggleCart","open","items","dispatch","handleRemove","handleRemoveAll","Object","Item","handleClick","c","StoreDemo","Svg","maxRadius","radius","onChange","interval","abs","sin","RouterProvider","RouteElement"],"mappings":"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","file":"src.869f6dcb.map","sourceRoot":"../../packages/demo","sourcesContent":["import { TemplateInterface } from './types';\n\nexport function comment(data: string = ''): Comment {\n    return document.createComment(data);\n}\n\nexport function text(data: string = ''): Text {\n    return document.createTextNode(data);\n}\n\nexport function isNode(obj: any): boolean {\n    return !!obj && !!(<Node>obj).nodeType;\n}\n\nexport function replaceRange(newNode: Node, range: any) {\n    const [startNode, endNode] = <any>[].concat(range);\n\n    if (!startNode.parentNode) return;\n\n    if (endNode && startNode.nextSibling !== endNode) {\n        removeNodes(startNode.nextSibling!, endNode);\n    }\n\n    startNode.parentNode!.replaceChild(newNode, startNode);\n}\n\nexport function removeNodes(\n    startNode: Node,\n    endNode: Node | null = null,\n    parent: Node | null = startNode.parentNode!\n): void {\n    if (!parent) return;\n\n    while (startNode !== endNode) {\n        const nextNode = startNode.nextSibling!;\n        parent.removeChild(startNode);\n        startNode = nextNode;\n    }\n}\n\nexport function moveTemplate(\n    template: TemplateInterface,\n    after: Node,\n    parent: Node = after.parentNode!\n): void {\n    const [startNode, endNode] = template.range!;\n    const before = after.nextSibling!;\n\n    let node = startNode;\n    do {\n        const nextNode = node!.nextSibling!;\n        parent.insertBefore(node, before as Node);\n        node = nextNode;\n    } while (node !== endNode);\n    parent.insertBefore(endNode, before as Node);\n}\n\nexport function getNodeIndex(node: Node): number {\n    let index = 0;\n    while ((node = node.previousSibling!)) index++;\n    return index;\n}\n\nexport function getNodePath(node: Node): Array<number> {\n    const path: number[] = [];\n    while (node.parentNode) {\n        path.unshift(getNodeIndex(node));\n        node = node.parentNode;\n    }\n    return path;\n}\n\nexport function getNodeByPath(node: Node, path: Array<number>): Node {\n    for (let i = 0, l = path.length; i < l; i++)\n        node = node.childNodes[path[i]];\n\n    return node;\n}\n\nexport const TemplateSymbol = Symbol();\n\nexport function isTemplateEqual(\n    t1: TemplateInterface,\n    t2: TemplateInterface\n): boolean {\n    return isTemplate(t1) && isTemplate(t2) && t1.strings === t2.strings;\n}\n\nexport function isTemplate(obj: any): boolean {\n    return obj && obj[TemplateSymbol];\n}\n\nexport const MARKER_RE = /__(\\d+)__/;\nexport const TEXT_ELEMENT = /^(?:style|textarea)$/i;\n\nexport function getMarkers(text: string): RegExpMatchArray {\n    return text.match(new RegExp(MARKER_RE, 'g')) || [];\n}\n\nexport function markerNumber(marker: string): number {\n    const m = marker.match(MARKER_RE);\n    return Number(m ? m[1] : -1);\n}\n\nconst SVG_NAMESPACES = {\n    xlink: 'http://www.w3.org/1999/xlink',\n    xml: 'http://www.w3.org/XML/1998/namespace',\n    xmlns: 'http://www.w3.org/2000/xmlns/'\n};\n\nexport function getSVGNamespace(attributeName): string {\n    return SVG_NAMESPACES[attributeName.split(':')[0]];\n}\n","import { Expression, TemplateInterface, TemplateArray } from './types';\nimport {\n    isNode,\n    replaceRange,\n    isTemplate,\n    isTemplateEqual,\n    moveTemplate,\n    text,\n    getSVGNamespace\n} from './utils';\n\nexport class AttributeExpression implements Expression {\n    name: string;\n    value?: any;\n    element: Element;\n\n    constructor(element: Element, name: string) {\n        this.name = name;\n        this.element = element;\n    }\n\n    update(value: any): void {\n        if (this.value === value) return;\n\n        const { name, element } = this;\n\n        if ('ownerSVGElement' in <SVGAElement>element) {\n            element.setAttributeNS(getSVGNamespace(name), name, value);\n        } else if (name in element) {\n            (element as any)[name] = value;\n        } else if (typeof value !== 'undefined') {\n            element.setAttribute(name, value);\n        } else {\n            element.hasAttribute(name) && element.removeAttribute(name);\n        }\n\n        this.value = value;\n    }\n}\n\nexport class NodeExpression implements Expression {\n    element: Node | TemplateInterface;\n    placeholder: Node;\n    value?: Node | TemplateInterface | TemplateArray;\n\n    constructor(element: Node) {\n        this.element = this.placeholder = element;\n    }\n\n    updateArray(items: TemplateInterface[]) {\n        const templates = this.value instanceof Map ? this.value : new Map();\n\n        const { element: rootNode } = this;\n\n        let currentNode: Node = <Node>rootNode;\n        const keys: string[] = items.reduce(\n            (keys, item, i) => {\n                const key: string = String(item.key || i);\n                let template = templates.get(key)!;\n\n                if (!template) {\n                    const node: Node = item.create();\n                    currentNode.parentNode!.insertBefore(\n                        node,\n                        currentNode.nextSibling\n                    );\n\n                    templates.set(key, (template = item));\n                } else if (!isTemplateEqual(template, item)) {\n                    replaceRange(item.create(), template.range);\n                    templates.set(key, (template = item));\n                } else {\n                    template.update(item.values);\n                }\n\n                if (currentNode.nextSibling !== template.range[0]) {\n                    moveTemplate(template, currentNode);\n                }\n                currentNode = template.range[1];\n\n                keys.push(key);\n\n                return keys;\n            },\n            [] as string[]\n        );\n\n        templates.forEach((template, key, map) => {\n            if (keys.indexOf(key) === -1) {\n                template.delete();\n                map.delete(key);\n            }\n        });\n\n        return templates;\n    }\n\n    replaceWith(newValue: Node | TemplateInterface | TemplateArray) {\n        const { element, value } = this;\n\n        if (value instanceof Map) {\n            value.forEach(template => template.delete());\n            value.clear();\n        }\n\n        if (element !== newValue) {\n            this.element = newValue = isTemplate(newValue)\n                ? <TemplateInterface>newValue\n                : isNode(newValue)\n                    ? <Node>newValue\n                    : text(<any>newValue);\n\n            replaceRange(\n                isTemplate(newValue)\n                    ? (<TemplateInterface>newValue).create()\n                    : <Node>newValue,\n                isTemplate(element)\n                    ? (<TemplateInterface>element).range!\n                    : <Node>element\n            );\n        }\n    }\n\n    update(value: any): void {\n        if (value === this.value) return;\n\n        const { element, placeholder } = this;\n\n        if (\n            typeof value !== 'object' &&\n            (<Node>element).nodeType === Node.TEXT_NODE\n        ) {\n            (<Node>element).textContent = value;\n        } else if (isTemplateEqual(value, <TemplateInterface>element)) {\n            (element as TemplateInterface).update(value.values);\n        } else if (Array.isArray(value)) {\n            if (\n                !(this.value instanceof Map) &&\n                (<Node>element).nodeType !== Node.COMMENT_NODE\n            ) {\n                this.replaceWith(placeholder);\n            }\n            value = this.updateArray(value);\n        } else {\n            this.replaceWith(value == null ? placeholder : value);\n        }\n\n        this.value = value;\n    }\n}\n","import { LinkSymbol, Expression } from './types';\nimport { AttributeExpression, NodeExpression } from './expressions';\nimport {\n    getNodePath,\n    getNodeByPath,\n    text,\n    markerNumber,\n    TEXT_ELEMENT,\n    getMarkers\n} from './utils';\n\nfunction treeWalkerFilter() {\n    return NodeFilter.FILTER_ACCEPT;\n}\n// fix(IE11): expect filter to be a function and not an object\n(<any>treeWalkerFilter).acceptNode = treeWalkerFilter;\n\nexport function linkAttributes(\n    element: Element,\n    linkedExpressions: LinkSymbol[]\n): void {\n    const attrs = element.attributes;\n    let i = attrs.length;\n\n    while (i--) {\n        const { name, value } = attrs.item(i) as Attr;\n        const n = markerNumber(value);\n\n        if (n !== -1) {\n            element.removeAttribute(name);\n            linkedExpressions[n] = {\n                type: AttributeExpression,\n                name,\n                nodePath: getNodePath(element)\n            };\n        }\n    }\n}\n\nexport function linkComment(node: Comment, linkedExpressions: LinkSymbol[]) {\n    const n = markerNumber(node.data);\n\n    if (n !== -1) {\n        linkedExpressions[n] = {\n            type: NodeExpression,\n            nodePath: getNodePath(node)\n        };\n        node.nodeValue = '';\n    }\n}\n\nexport function linkTexts(\n    node: CharacterData,\n    linkedExpressions: LinkSymbol[]\n): void {\n    getMarkers(node.data).forEach((key: string) => {\n        const keyNode: Text = text();\n        node = (<Text>node).splitText(node.data.indexOf(key));\n        node.deleteData(0, key.length);\n\n        node.parentNode!.insertBefore(keyNode, node);\n\n        linkedExpressions[markerNumber(key)] = {\n            type: NodeExpression,\n            nodePath: getNodePath(keyNode)\n        };\n    });\n}\n\nexport function linkExpressions(root: DocumentFragment) {\n    const treeWalker = document.createTreeWalker(\n        root,\n        NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT,\n        treeWalkerFilter as any,\n        false\n    );\n\n    const linkedExpressions: Array<LinkSymbol> = [];\n\n    while (treeWalker.nextNode()) {\n        const node: any = treeWalker.currentNode;\n\n        if (node.nodeType === Node.ELEMENT_NODE) {\n            linkAttributes(node, linkedExpressions);\n            if (TEXT_ELEMENT.test(node.tagName)) {\n                [].forEach.call(node.childNodes, node =>\n                    linkTexts(node, linkedExpressions)\n                );\n            }\n        } else linkComment(node, linkedExpressions);\n    }\n\n    return linkedExpressions;\n}\n\nexport function resolve(fragment: Node, symbols: LinkSymbol[]): Expression[] {\n    return symbols.map(\n        symbol =>\n            new symbol.type(\n                getNodeByPath(fragment, symbol.nodePath),\n                symbol.name\n            )\n    ) as any;\n}\n","import { Expression, CacheEntry } from './types';\nimport { linkExpressions, resolve } from './linker';\nimport { text, TEXT_ELEMENT } from './utils';\n\nconst TemplateCache: WeakMap<TemplateStringsArray, CacheEntry> = new WeakMap();\n\nfunction createCacheEntry(html: string, context?: string): CacheEntry {\n    const template = document.createElement('template');\n    template.innerHTML = context ? `<${context}>${html}</${context}>` : html;\n\n    let content = template.content;\n    if (context) {\n        const range = document.createRange();\n        range.selectNodeContents(content.firstChild!);\n        content = range.extractContents();\n    }\n\n    // HACK ie11 doesn't import empty text node\n    content.insertBefore(text(' '), content.firstChild);\n    content.appendChild(text(' '));\n\n    return {\n        content,\n        expressions: linkExpressions(content)\n    };\n}\n\nfunction toHTML(strings: TemplateStringsArray) {\n    /**\n     * Use this regex to choose the right marker\n     * 1. ...<tag...\n     * 2. ...<tag...>\n     * 3. ...>...\n     * 4. ......\n     */\n    const tagName = `[0-9a-zA-Z]+`,\n        attributeName = `[^<\\\\s\\\\0\"'>\\\\/=]+`,\n        attributeValue = `(?:\"[^\"]*\"?|'[^']*'?|[^\\\\s'\">]*)`,\n        attribute = `\\\\s*${attributeName}(?:\\\\s*=\\\\s*${attributeValue})?`,\n        tagOpen = `<(${tagName})(?:${attribute})*\\\\s*(>?)`;\n    const NODE_RE = new RegExp(`^[^]*${tagOpen}|[^]*(>)[^]*|[^]*$`, 'i');\n    const enum MatchType {\n        TagName = 1,\n        ClosedTag = 2,\n        EndTag = 3\n    }\n\n    let isAttribute = false;\n    let lastElement;\n\n    let html = strings[0];\n    for (let i = 0, l = strings.length; i < l - 1; i++) {\n        const marker = `__${i}__`;\n        const match = strings[i].match(NODE_RE)!;\n\n        if (match[MatchType.TagName]) {\n            lastElement = match[MatchType.TagName];\n            isAttribute = !match[MatchType.ClosedTag];\n        }\n\n        if (match[MatchType.ClosedTag] || match[MatchType.EndTag]) {\n            isAttribute = TEXT_ELEMENT.test(lastElement);\n        }\n        html += (isAttribute ? marker : `<!--${marker}-->`) + strings[i + 1];\n    }\n\n    return html;\n}\n\nexport function createElement(\n    strings: TemplateStringsArray,\n    context?: string\n): { fragment: DocumentFragment; expressions: Expression[] } {\n    /**\n     * https://tc39.github.io/ecma262/#sec-gettemplateobject\n     * [...]The template objects are frozen and the same template object is\n     * used each time a specific tagged Template is evaluated[...]\n     */\n    let cacheEntry: CacheEntry = TemplateCache.get(strings)!;\n\n    if (!cacheEntry) {\n        TemplateCache.set(\n            strings,\n            (cacheEntry = createCacheEntry(toHTML(strings), context))\n        );\n    }\n\n    const fragment = document.importNode(cacheEntry.content, true);\n    fragment.firstChild!.nodeValue = fragment.lastChild!.nodeValue = '';\n\n    return {\n        fragment,\n        expressions: resolve(fragment, cacheEntry.expressions)\n    };\n}\n","import { TemplateInterface, Expression } from './types';\nimport { createElement } from './parser';\nimport { TemplateSymbol, removeNodes } from './utils';\n\nexport class Template implements TemplateInterface {\n    [TemplateSymbol] = true;\n    values: any[];\n    strings: TemplateStringsArray;\n    range?: [Node, Node];\n    expressions?: Expression[];\n    context?: string;\n    key?: any;\n\n    constructor(\n        strings: TemplateStringsArray,\n        values: any[],\n        context?: string\n    ) {\n        this.values = values;\n        this.strings = strings;\n        this.context = context;\n    }\n\n    withKey(key: any) {\n        this.key = key;\n        return this;\n    }\n\n    update(values: any[]) {\n        for (let i = 0; i < values.length; i++) {\n            if (this.expressions![i] !== undefined)\n                this.expressions![i].update(values[i]);\n        }\n    }\n\n    delete() {\n        removeNodes(...this.range!);\n        this.range = undefined;\n        this.expressions = undefined;\n    }\n\n    create(): DocumentFragment {\n        const { fragment, expressions } = createElement(\n            this.strings,\n            this.context\n        );\n        this.expressions = expressions;\n        this.range = [fragment.firstChild!, fragment.lastChild!];\n\n        this.update(this.values);\n\n        return fragment;\n    }\n}\n","export { Template } from './template';\n\nimport { TemplateInterface } from './types';\nimport { Template } from './template';\nimport { removeNodes } from './utils';\n\nexport function render(template: TemplateInterface, container: HTMLElement) {\n    if (!render.instances.has(container)) {\n        render.instances.set(container, template);\n        removeNodes(container.firstChild!, null, container);\n\n        container.appendChild(template.create());\n    } else {\n        render.instances.get(container)!.update(template.values);\n    }\n}\nrender.instances = new WeakMap<HTMLElement, TemplateInterface>();\n\nexport function html(strings: any, ...values: any[]): Template {\n    return new Template(strings, values);\n}\n\nexport function svg(strings: any, ...values: any[]): Template {\n    return new Template(strings, values, 'svg');\n}\n","import { Constructor } from './types';\n\nfunction defineProps(constructor: any): string[] {\n    if (!constructor.__attrsMap) {\n        const props: { [key: string]: Function } = constructor.properties;\n        const attrsMap: { [key: string]: string } = Object.create(null);\n\n        if (props) {\n            for (const name in props) {\n                attrsMap[\n                    name.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase()\n                ] = name;\n\n                Object.defineProperty(constructor.prototype, name, {\n                    get(): any {\n                        return (<any>this).__props[name];\n                    },\n                    set(newValue: any) {\n                        const oldValue = (<any>this).__props[name];\n                        (<any>this).__props[name] = props[name](newValue);\n\n                        (<any>this).rendered &&\n                            oldValue !== newValue &&\n                            this.update();\n                    }\n                });\n            }\n        }\n\n        constructor.__attrsMap = attrsMap;\n        constructor.__observedProps = Object.keys(attrsMap);\n    }\n\n    return constructor.__observedProps;\n}\n\nexport function withProps<T extends Constructor>(Base: T) {\n    return class extends Base {\n        __props: object = Object.create(null);\n        [propName: string]: any;\n\n        static get observedAttributes(): string[] {\n            return defineProps(this);\n        }\n\n        attributeChangedCallback(name: string, _: string, newValue: string) {\n            this[(<any>this.constructor).__attrsMap[name]] = newValue;\n        }\n    };\n}\n","import { TemplateInterface } from './types';\n\nexport function comment(data: string = ''): Comment {\n    return document.createComment(data);\n}\n\nexport function text(data: string = ''): Text {\n    return document.createTextNode(data);\n}\n\nexport function isNode(obj: any): boolean {\n    return !!obj && !!(<Node>obj).nodeType;\n}\n\nexport function replaceRange(newNode: Node, range: any) {\n    const [startNode, endNode] = <any>[].concat(range);\n\n    if (!startNode.parentNode) return;\n\n    if (endNode && startNode.nextSibling !== endNode) {\n        removeNodes(startNode.nextSibling!, endNode);\n    }\n\n    startNode.parentNode!.replaceChild(newNode, startNode);\n}\n\nexport function removeNodes(\n    startNode: Node,\n    endNode: Node | null = null,\n    parent: Node | null = startNode.parentNode!\n): void {\n    if (!parent) return;\n\n    while (startNode !== endNode) {\n        const nextNode = startNode.nextSibling!;\n        parent.removeChild(startNode);\n        startNode = nextNode;\n    }\n}\n\nexport function moveTemplate(\n    template: TemplateInterface,\n    after: Node,\n    parent: Node = after.parentNode!\n): void {\n    const [startNode, endNode] = template.range!;\n    const before = after.nextSibling!;\n\n    let node = startNode;\n    do {\n        const nextNode = node!.nextSibling!;\n        parent.insertBefore(node, before as Node);\n        node = nextNode;\n    } while (node !== endNode);\n    parent.insertBefore(endNode, before as Node);\n}\n\nexport function getNodeIndex(node: Node): number {\n    let index = 0;\n    while ((node = node.previousSibling!)) index++;\n    return index;\n}\n\nexport function getNodePath(node: Node): Array<number> {\n    const path: number[] = [];\n    while (node.parentNode) {\n        path.unshift(getNodeIndex(node));\n        node = node.parentNode;\n    }\n    return path;\n}\n\nexport function getNodeByPath(node: Node, path: Array<number>): Node {\n    for (let i = 0, l = path.length; i < l; i++)\n        node = node.childNodes[path[i]];\n\n    return node;\n}\n\nexport const TemplateSymbol = Symbol();\n\nexport function isTemplateEqual(\n    t1: TemplateInterface,\n    t2: TemplateInterface\n): boolean {\n    return isTemplate(t1) && isTemplate(t2) && t1.strings === t2.strings;\n}\n\nexport function isTemplate(obj: any): boolean {\n    return obj && obj[TemplateSymbol];\n}\n\nexport const MARKER_RE = /__(\\d+)__/;\nexport const TEXT_ELEMENT = /^(?:style|textarea)$/i;\n\nexport function getMarkers(text: string): RegExpMatchArray {\n    return text.match(new RegExp(MARKER_RE, 'g')) || [];\n}\n\nexport function markerNumber(marker: string): number {\n    const m = marker.match(MARKER_RE);\n    return Number(m ? m[1] : -1);\n}\n\nconst SVG_NAMESPACES = {\n    xlink: 'http://www.w3.org/1999/xlink',\n    xml: 'http://www.w3.org/XML/1998/namespace',\n    xmlns: 'http://www.w3.org/2000/xmlns/'\n};\n\nexport function getSVGNamespace(attributeName): string {\n    return SVG_NAMESPACES[attributeName.split(':')[0]];\n}\n","import { Expression, TemplateInterface, TemplateArray } from './types';\nimport {\n    isNode,\n    replaceRange,\n    isTemplate,\n    isTemplateEqual,\n    moveTemplate,\n    text,\n    getSVGNamespace\n} from './utils';\n\nexport class AttributeExpression implements Expression {\n    name: string;\n    value?: any;\n    element: Element;\n\n    constructor(element: Element, name: string) {\n        this.name = name;\n        this.element = element;\n    }\n\n    update(value: any): void {\n        if (this.value === value) return;\n\n        const { name, element } = this;\n\n        if ('ownerSVGElement' in <SVGAElement>element) {\n            element.setAttributeNS(getSVGNamespace(name), name, value);\n        } else if (name in element) {\n            (element as any)[name] = value;\n        } else if (typeof value !== 'undefined') {\n            element.setAttribute(name, value);\n        } else {\n            element.hasAttribute(name) && element.removeAttribute(name);\n        }\n\n        this.value = value;\n    }\n}\n\nexport class NodeExpression implements Expression {\n    element: Node | TemplateInterface;\n    placeholder: Node;\n    value?: Node | TemplateInterface | TemplateArray;\n\n    constructor(element: Node) {\n        this.element = this.placeholder = element;\n    }\n\n    updateArray(items: TemplateInterface[]) {\n        const templates = this.value instanceof Map ? this.value : new Map();\n\n        const { element: rootNode } = this;\n\n        let currentNode: Node = <Node>rootNode;\n        const keys: string[] = items.reduce(\n            (keys, item, i) => {\n                const key: string = String(item.key || i);\n                let template = templates.get(key)!;\n\n                if (!template) {\n                    const node: Node = item.create();\n                    currentNode.parentNode!.insertBefore(\n                        node,\n                        currentNode.nextSibling\n                    );\n\n                    templates.set(key, (template = item));\n                } else if (!isTemplateEqual(template, item)) {\n                    replaceRange(item.create(), template.range);\n                    templates.set(key, (template = item));\n                } else {\n                    template.update(item.values);\n                }\n\n                if (currentNode.nextSibling !== template.range[0]) {\n                    moveTemplate(template, currentNode);\n                }\n                currentNode = template.range[1];\n\n                keys.push(key);\n\n                return keys;\n            },\n            [] as string[]\n        );\n\n        templates.forEach((template, key, map) => {\n            if (keys.indexOf(key) === -1) {\n                template.delete();\n                map.delete(key);\n            }\n        });\n\n        return templates;\n    }\n\n    replaceWith(newValue: Node | TemplateInterface | TemplateArray) {\n        const { element, value } = this;\n\n        if (value instanceof Map) {\n            value.forEach(template => template.delete());\n            value.clear();\n        }\n\n        if (element !== newValue) {\n            this.element = newValue = isTemplate(newValue)\n                ? <TemplateInterface>newValue\n                : isNode(newValue)\n                    ? <Node>newValue\n                    : text(<any>newValue);\n\n            replaceRange(\n                isTemplate(newValue)\n                    ? (<TemplateInterface>newValue).create()\n                    : <Node>newValue,\n                isTemplate(element)\n                    ? (<TemplateInterface>element).range!\n                    : <Node>element\n            );\n        }\n    }\n\n    update(value: any): void {\n        if (value === this.value) return;\n\n        const { element, placeholder } = this;\n\n        if (\n            typeof value !== 'object' &&\n            (<Node>element).nodeType === Node.TEXT_NODE\n        ) {\n            (<Node>element).textContent = value;\n        } else if (isTemplateEqual(value, <TemplateInterface>element)) {\n            (element as TemplateInterface).update(value.values);\n        } else if (Array.isArray(value)) {\n            if (\n                !(this.value instanceof Map) &&\n                (<Node>element).nodeType !== Node.COMMENT_NODE\n            ) {\n                this.replaceWith(placeholder);\n            }\n            value = this.updateArray(value);\n        } else {\n            this.replaceWith(value == null ? placeholder : value);\n        }\n\n        this.value = value;\n    }\n}\n","import { LinkSymbol, Expression } from './types';\nimport { AttributeExpression, NodeExpression } from './expressions';\nimport {\n    getNodePath,\n    getNodeByPath,\n    text,\n    markerNumber,\n    TEXT_ELEMENT,\n    getMarkers\n} from './utils';\n\nfunction treeWalkerFilter() {\n    return NodeFilter.FILTER_ACCEPT;\n}\n// fix(IE11): expect filter to be a function and not an object\n(<any>treeWalkerFilter).acceptNode = treeWalkerFilter;\n\nexport function linkAttributes(\n    element: Element,\n    linkedExpressions: LinkSymbol[]\n): void {\n    const attrs = element.attributes;\n    let i = attrs.length;\n\n    while (i--) {\n        const { name, value } = attrs.item(i) as Attr;\n        const n = markerNumber(value);\n\n        if (n !== -1) {\n            element.removeAttribute(name);\n            linkedExpressions[n] = {\n                type: AttributeExpression,\n                name,\n                nodePath: getNodePath(element)\n            };\n        }\n    }\n}\n\nexport function linkComment(node: Comment, linkedExpressions: LinkSymbol[]) {\n    const n = markerNumber(node.data);\n\n    if (n !== -1) {\n        linkedExpressions[n] = {\n            type: NodeExpression,\n            nodePath: getNodePath(node)\n        };\n        node.nodeValue = '';\n    }\n}\n\nexport function linkTexts(\n    node: CharacterData,\n    linkedExpressions: LinkSymbol[]\n): void {\n    getMarkers(node.data).forEach((key: string) => {\n        const keyNode: Text = text();\n        node = (<Text>node).splitText(node.data.indexOf(key));\n        node.deleteData(0, key.length);\n\n        node.parentNode!.insertBefore(keyNode, node);\n\n        linkedExpressions[markerNumber(key)] = {\n            type: NodeExpression,\n            nodePath: getNodePath(keyNode)\n        };\n    });\n}\n\nexport function linkExpressions(root: DocumentFragment) {\n    const treeWalker = document.createTreeWalker(\n        root,\n        NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT,\n        treeWalkerFilter as any,\n        false\n    );\n\n    const linkedExpressions: Array<LinkSymbol> = [];\n\n    while (treeWalker.nextNode()) {\n        const node: any = treeWalker.currentNode;\n\n        if (node.nodeType === Node.ELEMENT_NODE) {\n            linkAttributes(node, linkedExpressions);\n            if (TEXT_ELEMENT.test(node.tagName)) {\n                [].forEach.call(node.childNodes, node =>\n                    linkTexts(node, linkedExpressions)\n                );\n            }\n        } else linkComment(node, linkedExpressions);\n    }\n\n    return linkedExpressions;\n}\n\nexport function resolve(fragment: Node, symbols: LinkSymbol[]): Expression[] {\n    return symbols.map(\n        symbol =>\n            new symbol.type(\n                getNodeByPath(fragment, symbol.nodePath),\n                symbol.name\n            )\n    ) as any;\n}\n","import { Expression, CacheEntry } from './types';\nimport { linkExpressions, resolve } from './linker';\nimport { text, TEXT_ELEMENT } from './utils';\n\nconst TemplateCache: WeakMap<TemplateStringsArray, CacheEntry> = new WeakMap();\n\nfunction createCacheEntry(html: string, context?: string): CacheEntry {\n    const template = document.createElement('template');\n    template.innerHTML = context ? `<${context}>${html}</${context}>` : html;\n\n    let content = template.content;\n    if (context) {\n        const range = document.createRange();\n        range.selectNodeContents(content.firstChild!);\n        content = range.extractContents();\n    }\n\n    // HACK ie11 doesn't import empty text node\n    content.insertBefore(text(' '), content.firstChild);\n    content.appendChild(text(' '));\n\n    return {\n        content,\n        expressions: linkExpressions(content)\n    };\n}\n\nfunction toHTML(strings: TemplateStringsArray) {\n    /**\n     * Use this regex to choose the right marker\n     * 1. ...<tag...\n     * 2. ...<tag...>\n     * 3. ...>...\n     * 4. ......\n     */\n    const tagName = `[0-9a-zA-Z]+`,\n        attributeName = `[^<\\\\s\\\\0\"'>\\\\/=]+`,\n        attributeValue = `(?:\"[^\"]*\"?|'[^']*'?|[^\\\\s'\">]*)`,\n        attribute = `\\\\s*${attributeName}(?:\\\\s*=\\\\s*${attributeValue})?`,\n        tagOpen = `<(${tagName})(?:${attribute})*\\\\s*(>?)`;\n    const NODE_RE = new RegExp(`^[^]*${tagOpen}|[^]*(>)[^]*|[^]*$`, 'i');\n    const enum MatchType {\n        TagName = 1,\n        ClosedTag = 2,\n        EndTag = 3\n    }\n\n    let isAttribute = false;\n    let lastElement;\n\n    let html = strings[0];\n    for (let i = 0, l = strings.length; i < l - 1; i++) {\n        const marker = `__${i}__`;\n        const match = strings[i].match(NODE_RE)!;\n\n        if (match[MatchType.TagName]) {\n            lastElement = match[MatchType.TagName];\n            isAttribute = !match[MatchType.ClosedTag];\n        }\n\n        if (match[MatchType.ClosedTag] || match[MatchType.EndTag]) {\n            isAttribute = TEXT_ELEMENT.test(lastElement);\n        }\n        html += (isAttribute ? marker : `<!--${marker}-->`) + strings[i + 1];\n    }\n\n    return html;\n}\n\nexport function createElement(\n    strings: TemplateStringsArray,\n    context?: string\n): { fragment: DocumentFragment; expressions: Expression[] } {\n    /**\n     * https://tc39.github.io/ecma262/#sec-gettemplateobject\n     * [...]The template objects are frozen and the same template object is\n     * used each time a specific tagged Template is evaluated[...]\n     */\n    let cacheEntry: CacheEntry = TemplateCache.get(strings)!;\n\n    if (!cacheEntry) {\n        TemplateCache.set(\n            strings,\n            (cacheEntry = createCacheEntry(toHTML(strings), context))\n        );\n    }\n\n    const fragment = document.importNode(cacheEntry.content, true);\n    fragment.firstChild!.nodeValue = fragment.lastChild!.nodeValue = '';\n\n    return {\n        fragment,\n        expressions: resolve(fragment, cacheEntry.expressions)\n    };\n}\n","import { TemplateInterface, Expression } from './types';\nimport { createElement } from './parser';\nimport { TemplateSymbol, removeNodes } from './utils';\n\nexport class Template implements TemplateInterface {\n    [TemplateSymbol] = true;\n    values: any[];\n    strings: TemplateStringsArray;\n    range?: [Node, Node];\n    expressions?: Expression[];\n    context?: string;\n    key?: any;\n\n    constructor(\n        strings: TemplateStringsArray,\n        values: any[],\n        context?: string\n    ) {\n        this.values = values;\n        this.strings = strings;\n        this.context = context;\n    }\n\n    withKey(key: any) {\n        this.key = key;\n        return this;\n    }\n\n    update(values: any[]) {\n        for (let i = 0; i < values.length; i++) {\n            if (this.expressions![i] !== undefined)\n                this.expressions![i].update(values[i]);\n        }\n    }\n\n    delete() {\n        removeNodes(...this.range!);\n        this.range = undefined;\n        this.expressions = undefined;\n    }\n\n    create(): DocumentFragment {\n        const { fragment, expressions } = createElement(\n            this.strings,\n            this.context\n        );\n        this.expressions = expressions;\n        this.range = [fragment.firstChild!, fragment.lastChild!];\n\n        this.update(this.values);\n\n        return fragment;\n    }\n}\n","export { Template } from './template';\n\nimport { TemplateInterface } from './types';\nimport { Template } from './template';\nimport { removeNodes } from './utils';\n\nexport function render(template: TemplateInterface, container: HTMLElement) {\n    if (!render.instances.has(container)) {\n        render.instances.set(container, template);\n        removeNodes(container.firstChild!, null, container);\n\n        container.appendChild(template.create());\n    } else {\n        render.instances.get(container)!.update(template.values);\n    }\n}\nrender.instances = new WeakMap<HTMLElement, TemplateInterface>();\n\nexport function html(strings: any, ...values: any[]): Template {\n    return new Template(strings, values);\n}\n\nexport function svg(strings: any, ...values: any[]): Template {\n    return new Template(strings, values, 'svg');\n}\n","import {\n    ScheduledFunction,\n    IdleDeadline,\n    Scheduler as SchedulerInterface,\n} from './types';\n\nconst requestIdleCallback =\n    (window as any).requestIdleCallback ||\n    function(handler: Function) {\n        const start = Date.now();\n        return setTimeout(\n            () =>\n                handler({\n                    didTimeout: false,\n                    timeRemaining: () => {\n                        return Math.max(\n                            0,\n                            50 - (Date.now() - start)\n                        );\n                    },\n                }),\n            1\n        );\n    };\n\nexport class Scheduler implements SchedulerInterface {\n    tasks: ScheduledFunction[] = [];\n    private running: boolean = false;\n\n    private process = (deadline: IdleDeadline): void => {\n        const tasks = this.tasks;\n\n        while (\n            (deadline.timeRemaining() > 0 || deadline.didTimeout) &&\n            tasks.length > 0\n        ) {\n            const fn = tasks.shift();\n            (fn as any)._scheduled = false;\n            fn!();\n        }\n\n        if (tasks.length > 0) {\n            this.start();\n        } else {\n            this.running = false;\n        }\n    }\n\n    private start() {\n        requestIdleCallback(this.process, {\n            timeout: 50,\n        });\n        this.running = true;\n    }\n\n    defer(fn: ScheduledFunction): () => void {\n        return () => {\n            if (fn._scheduled === undefined) {\n                const useTask = false;\n\n                // Force first rendering\n                if (!useTask) {\n                    fn._scheduled = false;\n                    fn();\n                } else {\n                    fn._scheduled = true;\n                    Promise.resolve().then(() => {\n                        fn();\n                        fn._scheduled = false;\n                    });\n                }\n            } else if (!fn._scheduled) {\n                this.tasks.push(fn);\n                fn._scheduled = true;\n                fn._priority = 0;\n            } else {\n                fn._priority!++;\n                this.tasks.sort(\n                    (a, b) => (b as any)._priority - (a as any)._priority\n                );\n            }\n\n            if (this.tasks.length && !this.running) {\n                this.start();\n            }\n        };\n    }\n}\n\nexport default new Scheduler();\n","import { render, Template } from '@tiny-lit/core';\nimport Scheduler from './Scheduler';\nimport {\n    Constructor,\n    Element as ElementInterface,\n    Scheduler as SchedulerInterface\n} from './types';\n\nexport function withElement<T extends Constructor<HTMLElement>>(Base: T) {\n    return class extends Base implements ElementInterface {\n        state: any = {};\n        rendered: boolean = false;\n        renderCallbacks: Array<Function> = [];\n        renderRoot: HTMLElement | ShadowRoot = this;\n\n        attachShadow(shadowRootInitDict: ShadowRootInit) {\n            return (this.renderRoot = super.attachShadow.call(\n                this,\n                shadowRootInitDict\n            ));\n        }\n\n        get scheduler(): SchedulerInterface {\n            return Scheduler;\n        }\n\n        connectedCallback() {\n            this.update();\n        }\n\n        setState(nextState: object | Function, callback?: Function): void {\n            const state: any = this.state;\n\n            this.state = {\n                ...state,\n                ...(typeof nextState === 'function'\n                    ? nextState(state, this)\n                    : nextState)\n            };\n\n            callback && this.renderCallbacks.push(callback);\n\n            this.update();\n        }\n\n        render(): Template | null {\n            return null;\n        }\n\n        update = this.scheduler.defer(() => {\n            this.rendered = true;\n\n            const template = this.render();\n            template && render(template, this.renderRoot as any);\n\n            while (this.renderCallbacks.length) this.renderCallbacks.shift()!();\n        });\n    };\n}\n","import { withProps } from './withProps';\nimport { withElement } from './withElement';\n\nexport const Element = withProps(withElement(HTMLElement));\n","export { Element } from './Element';\nexport { withProps } from './withProps';\nexport { withElement } from './withElement';","import { html } from '@tiny-lit/core';\n\nexport default html`\n<style>\n    button {\n        margin: 0;\n        padding: 0;\n        border: 0;\n        background: none;\n        font-size: 100%;\n        vertical-align: baseline;\n        font-family: inherit;\n        font-weight: inherit;\n        color: inherit;\n        -webkit-appearance: none;\n        appearance: none;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n\n    .todoapp {\n        font: 14px 'Helvetica Neue', Helvetica, Arial, sans-serif;\n        line-height: 1.4em;\n        background: #f5f5f5;\n        color: #4d4d4d;\n        min-width: 230px;\n        max-width: 550px;\n        margin: 0 auto;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        font-weight: 300;\n    }\n\n    :focus {\n        outline: 0;\n    }\n\n    .hidden {\n        display: none;\n    }\n\n    .todoapp {\n        background: #fff;\n        margin: 130px auto;\n        position: relative;\n        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2),\n                    0 25px 50px 0 rgba(0, 0, 0, 0.1);\n    }\n\n    .todoapp input::-webkit-input-placeholder {\n        font-style: italic;\n        font-weight: 300;\n        color: #e6e6e6;\n    }\n\n    .todoapp input::-moz-placeholder {\n        font-style: italic;\n        font-weight: 300;\n        color: #e6e6e6;\n    }\n\n    .todoapp input::input-placeholder {\n        font-style: italic;\n        font-weight: 300;\n        color: #e6e6e6;\n    }\n\n    .todoapp h1 {\n        position: absolute;\n        top: -155px;\n        width: 100%;\n        font-size: 100px;\n        font-weight: 100;\n        text-align: center;\n        color: rgb(var(--primary));\n        -webkit-text-rendering: optimizeLegibility;\n        -moz-text-rendering: optimizeLegibility;\n        text-rendering: optimizeLegibility;\n    }\n\n    .new-todo,\n    .edit {\n        position: relative;\n        margin: 0;\n        width: 100%;\n        font-size: 24px;\n        font-family: inherit;\n        font-weight: inherit;\n        line-height: 1.4em;\n        border: 0;\n        color: inherit;\n        padding: 6px;\n        border: 1px solid #999;\n        box-shadow: inset 0 -1px 5px 0 rgba(0, 0, 0, 0.2);\n        box-sizing: border-box;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n\n    .new-todo {\n        padding: 16px 16px 16px 60px;\n        border: none;\n        background: rgba(0, 0, 0, 0.003);\n        box-shadow: inset 0 -2px 1px rgba(0,0,0,0.03);\n    }\n\n    .main {\n        position: relative;\n        z-index: 2;\n        border-top: 1px solid #e6e6e6;\n    }\n\n    .toggle-all {\n        text-align: center;\n        border: none; /* Mobile Safari */\n        opacity: 0;\n        position: absolute;\n    }\n\n    .toggle-all + label {\n        width: 60px;\n        height: 34px;\n        font-size: 0;\n        position: absolute;\n        top: -52px;\n        left: -13px;\n        -webkit-transform: rotate(90deg);\n        transform: rotate(90deg);\n    }\n\n    .toggle-all + label:before {\n        content: '';\n        font-size: 22px;\n        color: #e6e6e6;\n        padding: 10px 27px 10px 27px;\n    }\n\n    .toggle-all:checked + label:before {\n        color: #737373;\n    }\n\n    .todo-list {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n    }\n\n    .todo-list li {\n        position: relative;\n        font-size: 24px;\n        border-bottom: 1px solid #ededed;\n    }\n\n    .todo-list li:last-child {\n        border-bottom: none;\n    }\n\n    .todo-list li.editing {\n        border-bottom: none;\n        padding: 0;\n    }\n\n    .todo-list li.editing .edit {\n        display: block;\n        width: 506px;\n        padding: 12px 16px;\n        margin: 0 0 0 43px;\n    }\n\n    .todo-list li.editing .view {\n        display: none;\n    }\n\n    .todo-list li .toggle {\n        text-align: center;\n        width: 40px;\n        /* auto, since non-WebKit browsers doesn't support input styling */\n        height: auto;\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        margin: auto 0;\n        border: none; /* Mobile Safari */\n        -webkit-appearance: none;\n        appearance: none;\n    }\n\n    .todo-list li .toggle {\n        opacity: 0;\n    }\n\n    .todo-list li .toggle + label {\n        /*\n            Firefox requires '#' to be escaped - https://bugzilla.mozilla.org/show_bug.cgi?id=922433\n            IE and Edge requires *everything* to be escaped to render, so we do that instead of just the '#' - https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/7157459/\n        */\n        background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23ededed%22%20stroke-width%3D%223%22/%3E%3C/svg%3E');\n        background-repeat: no-repeat;\n        background-position: center left;\n    }\n\n    .todo-list li .toggle:checked + label {\n        background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23bddad5%22%20stroke-width%3D%223%22/%3E%3Cpath%20fill%3D%22%235dc2af%22%20d%3D%22M72%2025L42%2071%2027%2056l-4%204%2020%2020%2034-52z%22/%3E%3C/svg%3E');\n    }\n\n    .todo-list li label {\n        word-break: break-all;\n        padding: 15px 15px 15px 60px;\n        display: block;\n        line-height: 1.2;\n        transition: color 0.4s;\n    }\n\n    .todo-list li.completed label {\n        color: #d9d9d9;\n        text-decoration: line-through;\n    }\n\n    .todo-list li .destroy {\n        display: none;\n        position: absolute;\n        top: 0;\n        right: 10px;\n        bottom: 0;\n        width: 40px;\n        height: 40px;\n        margin: auto 0;\n        font-size: 30px;\n        color: #cc9a9a;\n        margin-bottom: 11px;\n        transition: color 0.2s ease-out;\n    }\n\n    .todo-list li .destroy:hover {\n        color: #af5b5e;\n    }\n\n    .todo-list li .destroy:after {\n        content: '';\n    }\n\n    .todo-list li:hover .destroy {\n        display: block;\n    }\n\n    .todo-list li .edit {\n        display: none;\n    }\n\n    .todo-list li.editing:last-child {\n        margin-bottom: -1px;\n    }\n\n    .footer {\n        color: #777;\n        padding: 10px 15px;\n        height: 20px;\n        text-align: center;\n        border-top: 1px solid #e6e6e6;\n    }\n\n    .footer:before {\n        content: '';\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        height: 50px;\n        overflow: hidden;\n        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2),\n                    0 8px 0 -3px #f6f6f6,\n                    0 9px 1px -3px rgba(0, 0, 0, 0.2),\n                    0 16px 0 -6px #f6f6f6,\n                    0 17px 2px -6px rgba(0, 0, 0, 0.2);\n    }\n\n    .todo-count {\n        float: left;\n        text-align: left;\n    }\n\n    .todo-count strong {\n        font-weight: 300;\n    }\n\n    .filters {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n        position: absolute;\n        right: 0;\n        left: 0;\n    }\n\n    .filters li {\n        display: inline;\n    }\n\n    .filters li a {\n        color: inherit;\n        margin: 3px;\n        padding: 3px 7px;\n        text-decoration: none;\n        border: 1px solid transparent;\n        border-radius: 3px;\n    }\n\n    .filters li a:hover {\n        border-color: rgba(175, 47, 47, 0.1);\n    }\n\n    .filters li a.selected {\n        border-color: rgba(175, 47, 47, 0.2);\n    }\n\n    .clear-completed,\n    html .clear-completed:active {\n        float: right;\n        position: relative;\n        line-height: 20px;\n        text-decoration: none;\n        cursor: pointer;\n    }\n\n    .clear-completed:hover {\n        text-decoration: underline;\n    }\n\n    .shuffle {\n        margin-right: 5px;\n    }\n\n    .info {\n        margin: 65px auto 0;\n        color: #bfbfbf;\n        font-size: 10px;\n        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);\n        text-align: center;\n    }\n\n    .info p {\n        line-height: 1;\n    }\n\n    .info a {\n        color: inherit;\n        text-decoration: none;\n        font-weight: 400;\n    }\n\n    .info a:hover {\n        text-decoration: underline;\n    }\n\n    /*\n        Hack to remove background from Mobile Safari.\n        Can't use it globally since it destroys checkboxes in Firefox\n    */\n    @media screen and (-webkit-min-device-pixel-ratio:0) {\n        .toggle-all,\n        .todo-list li .toggle {\n            background: none;\n        }\n\n        .todo-list li .toggle {\n            height: 40px;\n        }\n    }\n\n    @media (max-width: 430px) {\n        .footer {\n            height: 50px;\n        }\n\n        .filters {\n            bottom: 10px;\n        }\n    }\n</style>\n`;\n","import { html } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\nimport style from './style.js';\n\nfunction prevented(f) {\n    return e => {\n        e.stopPropagation();\n        e.preventDefault();\n        f(e);\n    };\n}\n\nfunction loadStorage(defaultValue) {\n    const s = localStorage.getItem('todoMvc');\n    return s ? JSON.parse(s) : defaultValue;\n}\n\nfunction saveStorage(value) {\n    window.requestAnimationFrame(() =>\n        localStorage.setItem('todoMvc', JSON.stringify(value))\n    );\n}\n\nfunction shuffle(array) {\n    let counter = array.length;\n\n    // While there are elements in the array\n    while (counter > 0) {\n        // Pick a random index\n        let index = Math.floor(Math.random() * counter);\n\n        // Decrease counter by 1\n        counter--;\n\n        // And swap the last element with it\n        let temp = array[counter];\n        array[counter] = array[index];\n        array[index] = temp;\n    }\n\n    return array;\n}\n\nclass TodoMVC extends Element {\n    constructor() {\n        super();\n        this.state = loadStorage({\n            todos: [],\n            filter: null,\n        });\n\n        this.attachShadow({ mode: 'open' });\n    }\n\n    static get is() {\n        return 'todo-mvc';\n    }\n\n    setState(nextState) {\n        super.setState(nextState);\n        saveStorage(this.state);\n    }\n\n    setFilter(completed) {\n        this.setState({ filter: completed });\n    }\n\n    handleAddTodo(e) {\n        this.setState({\n            todos: [\n                ...this.state.todos,\n                {\n                    text: e.target.elements[0].value,\n                    completed: false,\n                    id: Math.random()\n                        .toString()\n                        .substr(2),\n                },\n            ],\n        });\n        e.target.reset();\n    }\n\n    handleDeleteTodo(remove) {\n        this.setState({\n            todos: [...this.state.todos.filter(todo => todo !== remove)],\n        });\n    }\n\n    switchCompleted(index) {\n        return prevented(() => {\n            const todos = this.state.todos;\n\n            todos[index].completed = !todos[index].completed;\n            this.setState({\n                todos: [...todos],\n            });\n        });\n    }\n\n    handleClearCompleted() {\n        this.setState({\n            todos: [...this.state.todos.filter(todo => !todo.completed)],\n        });\n    }\n\n    connectedCallback() {\n        const rendered = this.rendered;\n\n        if (!rendered) console.time('render');\n        this.update();\n        if (!rendered) console.timeEnd('render');\n    }\n\n    render() {\n        const { filter, todos } = this.state;\n\n        return html`\n            ${style}\n            <section class=\"todoapp body\">\n                <header class=\"header\">\n                    <h1>todos</h1>\n                    <form onSubmit=${prevented(e => this.handleAddTodo(e))}>\n                        <input\n                            class=\"new-todo\"\n                            placeholder=\"What needs to be done?\"\n                            autofocus\n                        />\n                    </form>\n                </header>\n                <!-- This section should be hidden by default and shown when there are todos -->\n                <section class=\"main\">\n                    <input id=\"toggle-all\" class=\"toggle-all\" type=\"checkbox\" />\n                    <label for=\"toggle-all\">Mark all as complete</label>\n                    <ul class=\"todo-list\">\n                        <!-- These are here just to show the structure of the list items -->\n                        <!-- List items should get the class \\`editing\\` when editing and \\`completed\\` when marked as completed -->\n                        ${todos\n                                .map(\n                                    (todo, index) => (\n                                        (todo.index = index), todo\n                                    )\n                                )\n                                .filter(\n                                    todo =>\n                                        filter === null ||\n                                        todo.completed === filter\n                                ).map(\n                            todo =>\n                                html`\n                            <li class=${todo.completed ? 'completed' : ''}>\n                                <div\n                                    class=\"view\"\n                                >\n                                    <input\n                                        class=\"toggle\"\n                                        type=\"checkbox\"\n                                        checked=${todo.completed}\n                                        onClick=${this.switchCompleted(todo.index)}\n                                    />\n                                    <label onClick=${this.switchCompleted(todo.index)}>${todo.text}</label>\n                                    <button class=\"destroy\" onClick=${prevented(\n                                        () => this.handleDeleteTodo(todo)\n                                    )}></button>\n                                </div>\n                                <input class=\"edit\" value=${todo.text} />\n                            </li>\n                        `.withKey(todo.id)\n                        )}\n                    </ul>\n                </section>\n                <!-- This footer should hidden by default and shown when there are todos -->\n                <footer class=\"footer\">\n                    <!-- This should be \\`0 items left\\` by default -->\n                    <span class=\"todo-count\">\n                        <strong>${todos.filter(todo => !todo.completed).length}\n                        </strong> item left\n                    </span>\n\n                    <ul class=\"filters\">\n                        <li>\n                            <a\n                                class=${filter === null && 'selected'}\n                                href=\"#/\"\n                                onClick=${prevented(() => this.setFilter(null))}\n                            >\n                                All\n                            </a>\n                        </li>\n                        <li>\n                            <a\n                                class=${filter === false && 'selected'}\n                                href=\"#/active\"\n                                onClick=${prevented(() =>\n                                    this.setFilter(false)\n                                )}\n                            >\n                                Active\n                            </a>\n                        </li>\n                        <li>\n                            <a\n                                class=${filter && 'selected'}\n                                href=\"#/completed\"\n                                onClick=${prevented(() => this.setFilter(true))}\n                            >\n                                Completed\n                            </a>\n                        </li>\n                    </ul>\n                    <!-- Hidden if no completed items are left  -->\n                    <button class=\"clear-completed\" onClick=${prevented(() =>\n                        this.handleClearCompleted()\n                    )}>Clear completed</button>\n                    <button class=\"clear-completed shuffle\" onClick=${prevented(\n                        () =>\n                            this.setState({ todos: shuffle(this.state.todos) })\n                    )}>Shuffle</button>\n                </footer>\n            </section>\n            <footer class=\"info\">\n                <p>Double-click to edit a todo</p>\n                <!-- Change this out with your name and url  -->\n                <p>Created by <a href=\"http://todomvc.com\">you</a></p>\n                <p>Part of <a href=\"http://todomvc.com\">TodoMVC</a></p>\n            </footer>\n        `;\n    }\n}\n\ncustomElements.define(TodoMVC.is, TodoMVC);\n","import { html } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\n\nclass KarpinskyDot extends Element {\n    static get is() {\n        return 'karpinsky-dot';\n    }\n\n    static get properties() {\n        return {\n            x: Number,\n            y: Number,\n            size: Number,\n            text: String,\n            hover: Boolean,\n        };\n    }\n\n    x = 0;\n    y = 0;\n    size = 0;\n    text = '';\n    hover = false;\n\n    constructor() {\n        super();\n\n        // this.addEventListener('mouseover', () => this.setState({ hover: true }));\n        // this.addEventListener('mouseleave', () => this.setState({ hover: false }));\n        this.addEventListener('mouseover', () => (this.hover = true));\n        this.addEventListener('mouseleave', () => (this.hover = false));\n\n        this.attachShadow({ mode: 'closed' });\n    }\n\n    render() {\n        const { hover, text, x, y, size } = this;\n        const s = size * 1.3;\n\n        return html`\n            <style>\n                span {\n                    position: absolute;\n                    font: normal 15px sans-serif;\n                    text-align: center;\n                    cursor: pointer;\n                    color: black;\n                    width: ${s}px;\n                    height: ${s}px;\n                    left: ${x}px;\n                    top: ${y}px;\n                    border-radius: ${s / 2}px;\n                    line-height: ${s}px;\n                    background: ${hover ? '#ff0' : '#61dafb'};\n                }\n            </style>\n            <span>\n                ${hover ? '**' + text + '**' : text}\n            </span>\n        `;\n    }\n}\n\ncustomElements.define(KarpinskyDot.is, KarpinskyDot);","import { html } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\n\nconst targetSize = 25;\n\nclass KarpinskyTriangle extends Element {\n    static get is() {\n        return 'karpinsky-triangle';\n    }\n\n    static get properties() {\n        return {\n            x: Number,\n            y: Number,\n            s: Number,\n            seconds: Number,\n        };\n    }\n    x = 0;\n    y = 0;\n    s = 0;\n    seconds = 0;\n\n    constructor() {\n        super();\n\n        //this.attachShadow({ mode: 'open' });\n    }\n\n    render() {\n        let { s, seconds, x, y } = this;\n\n        if (s <= targetSize) {\n            return html`\n                <karpinsky-dot x=${x - targetSize / 2} y=${y -\n                targetSize / 2} size=${targetSize} text=${seconds} />\n            `;\n        }\n\n        s = s / 2;\n\n        let slowDown = true;\n        if (slowDown) {\n            let e = performance.now() + 0.8;\n            while (performance.now() < e) {\n                // Artificially long execution time.\n            }\n        }\n\n        return html`\n            <karpinsky-triangle x=${x} y=${y -\n            s / 2} s=${s} seconds=${seconds}></karpinsky-triangle>\n            <karpinsky-triangle x=${x - s} y=${y +\n            s / 2} s=${s} seconds=${seconds}></karpinsky-triangle>\n            <karpinsky-triangle x=${x + s} y=${y +\n            s / 2} s=${s} seconds=${seconds}></karpinsky-triangle>\n        `;\n    }\n}\n\ncustomElements.define(KarpinskyTriangle.is, KarpinskyTriangle);","import { html } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\nimport './Dot';\nimport './Triangle';\n\nfunction rafInterval(fn) {\n    let running = true;\n\n    function run() {\n        fn();\n        running && requestAnimationFrame(run);\n    }\n\n    requestAnimationFrame(run);\n\n    return () => (running = false);\n}\n\n\nclass KarpinskyDemo extends Element {\n    static get is() {\n        return 'karpinsky-demo';\n    }\n\n    constructor() {\n        super();\n\n        // this.attachShadow({ mode: 'closed' });\n    }\n\n    connectedCallback() {\n        const rendered = this.rendered;\n\n        if (!rendered) console.time('render');\n\n        this.start = Date.now();\n        this.timerInterval = setInterval(this.tick.bind(this), 1000);\n        this.renderInterval = rafInterval(this.update);\n        this.setState({\n            seconds: 0,\n        });\n\n        if (!rendered) console.timeEnd('render');\n    }\n\n    disconnectedCallback() {\n        this.renderInterval();\n        clearInterval(this.timerInterval);\n    }\n\n    tick() {\n        this.setState({\n            seconds: (this.state.seconds % 10) + 1,\n        });\n    }\n\n    getStyle() {\n        const elapsed = Date.now() - this.start;\n        const t = (elapsed / 1000) % 10;\n        const scale = 1 + (t > 5 ? 10 - t : t) / 10;\n\n        return `\n            position: absolute;\n            transform-origin: 0 0;\n            width: 10px;\n            height: 10px;\n            left: 50%;\n            top: 50%;\n            transform: scaleX(${scale / 2.1}) scaleY(0.7) translateZ(0.1px) translateX(50%)\n        `;\n    }\n\n    render() {\n        const { seconds } = this.state;\n\n        return html`\n            <style>\n                :host {\n                    color: black;\n                }\n            </style>\n            <div style=${this.getStyle()}>\n                <karpinsky-triangle x=${0} y=${0} s=${1000} seconds=${seconds} />\n            </div>\n        `;\n    }\n}\n\ncustomElements.define(KarpinskyDemo.is, KarpinskyDemo);\n","export interface CustomElement {\n    connectedCallback?(): void;\n    disconnectedCallback?(): void;\n    adoptedCallback?(): void;\n    attributeChangedCallback?(\n        name: string,\n        oldValue: string,\n        newValue: string\n    ): void;\n    observedAttributes?: Array<string>;\n}\nexport type Constructor<T = {}> = new (...args: any[]) => T;\nexport interface StoreEvent {\n    type: string;\n    data: any;\n}\n\nexport type Action = StoreEvent;\nexport type Mutation = StoreEvent;\n\nexport type SubcribeCallback = (state: any, mutation?: Mutation) => void;\n\nexport interface UpdateEvent extends CustomEvent {\n    detail: {\n        mutation?: Mutation;\n        state: any;\n    };\n}\n\nexport interface DispatchEvent extends CustomEvent {\n    detail: Action;\n}\n\nexport interface StoreProviderInterface extends HTMLElement{\n    getStore(): StoreInterface;\n    config: StoreConfig;\n}\nexport interface StoreConnectedElement {\n    unsubscribe?: Function;\n    onStateChange?(state: any, mutation?: Mutation);\n    onStoreConnect?(unsubscribe: Function);\n}\n\nexport interface StoreInterface {\n    state: any;\n    mutations: Map<string, MutationHandler>;\n    actions: Map<string, ActionHandler>;\n    dispatch(action: string | Action, payload?: any);\n    subscribe(callback: Function);\n    commit(mutation: string);\n}\n\nexport type MutationHandler = (state?: any, data?: any) => object;\nexport type ActionHandler = (store: StoreInterface, payload: any) => void;\nexport type PluginHandler = (store: StoreInterface) => void;\n\nexport type StoreConfig = {\n    actions?: { [name: string]: ActionHandler };\n    mutations?: { [name: string]: MutationHandler };\n    initialState?: any;\n    plugins?: Array<PluginHandler>;\n};\n\nexport enum StoreEvents {\n    Request = 'store::request',\n    Dispatch = 'store::dispatch',\n    Update = 'store::update',\n}\n\nexport type RequestStoreEvent = CustomEvent<{ store?: StoreProviderInterface }>;","import {\n    StoreEvents,\n    StoreEvent,\n    Mutation,\n    UpdateEvent,\n    DispatchEvent,\n    RequestStoreEvent,\n    StoreProviderInterface,\n} from './types';\n\nexport function normalizeEvent(fn) {\n    return (event: string | StoreEvent, data?: any) => {\n        if (typeof event === 'string') event = { type: event, data };\n\n        return fn(event);\n    };\n}\n\nexport function requestStore(el: HTMLElement): StoreProviderInterface | undefined {\n    const event = new CustomEvent(StoreEvents.Request, { detail: {} }) as RequestStoreEvent;\n    el.dispatchEvent(event);\n\n    return event.detail.store;\n}\n\nexport function createUpdateEvent(\n    state: any,\n    mutation?: Mutation\n): UpdateEvent {\n    return new CustomEvent(StoreEvents.Update, {\n        detail: {\n            state,\n            mutation,\n        },\n    });\n}\n\nexport function createDispatchEvent(type: string, data?: any): DispatchEvent {\n    return new CustomEvent(StoreEvents.Dispatch, {\n        detail: {\n            type,\n            data,\n        },\n    });\n}\n","import {\n    Action,\n    StoreConfig,\n    StoreInterface,\n    Mutation,\n    SubcribeCallback,\n    MutationHandler,\n    ActionHandler\n} from './types';\n\nimport { normalizeEvent } from './events';\n\nconst StateProp = Symbol();\n\nconst objToMap = (obj: any, map: Map<any, any>) => {\n    for (const key in obj) map.set(key, obj[key]);\n};\n\nexport class Store<S> implements StoreInterface {\n    [StateProp]: S = {} as S;\n    readonly mutations: Map<string, MutationHandler> = new Map();\n    readonly actions: Map<string, ActionHandler> = new Map();\n    private listeners: Set<Function> = new Set();\n\n    constructor(config: StoreConfig = {}) {\n        objToMap(config.mutations, this.mutations);\n        objToMap(config.actions, this.actions);\n\n        this[StateProp] = { ...config.initialState };\n\n        if (config.plugins)\n            config.plugins!.forEach(plugin => plugin(this));\n    }\n\n    dispatch = normalizeEvent((action: Action) => {\n        const actions = this.actions;\n        if (actions.has(action.type)) actions.get(action.type)!(this, action.data);\n    });\n\n    get state(): S {\n        return this[StateProp];\n    }\n\n    subscribe(callback: SubcribeCallback) {\n        const { listeners } = this;\n\n        const handler = (mutation?: Mutation) => callback(this.state, mutation);\n\n        listeners.add(handler);\n        callback(this.state);\n\n        return () => listeners.delete(handler);\n    }\n\n    commit = normalizeEvent((mutation: Mutation) => {\n        const mutations = this.mutations;\n        if (mutations.has(mutation.type)) {\n            this[StateProp] = <any>mutations.get(mutation.type)!(this.state, mutation.data);\n        }\n\n        this.listeners.forEach(listener => listener(mutation));\n    });\n}\n\nexport const createStore = (store: StoreConfig) => {\n    return new Store(store);\n};\n","import {\n    Constructor,\n    CustomElement,\n    StoreConnectedElement,\n    StoreEvents,\n    UpdateEvent,\n    Mutation\n} from './types';\nimport { requestStore, createDispatchEvent } from './events';\n\nexport function withStore<T extends Constructor<CustomElement & HTMLElement>>(\n    Base: T\n) {\n    return class extends Base implements StoreConnectedElement {\n        unsubscribe?: Function;\n\n        connectedCallback() {\n            if (super.connectedCallback) super.connectedCallback();\n\n            let store;\n            if (store = requestStore(this)) {\n                const handler = e =>\n                    this.onStateChange!(\n                        (<UpdateEvent>e).detail.state,\n                        (<UpdateEvent>e).detail.mutation\n                    );\n                store.addEventListener(StoreEvents.Update, handler, true);\n                this.unsubscribe = store.removeEventListener.bind(\n                    this,\n                    StoreEvents.Update,\n                    handler,\n                    true\n                );\n\n                this.onStateChange(store.getStore().state);\n            }\n        }\n\n        disconnectedCallback() {\n            if (super.disconnectedCallback) super.disconnectedCallback();\n\n            this.unsubscribe!();\n        }\n\n        onStoreConnect() { }\n\n        onStateChange(_: any, __?: Mutation) { }\n\n        dispatch(type: string, data?: any) {\n            this.dispatchEvent(createDispatchEvent(type, data));\n        }\n    };\n}\n","import {\n    StoreEvents,\n    StoreInterface,\n    StoreProviderInterface,\n    Mutation,\n    StoreConfig,\n    RequestStoreEvent,\n} from './types';\nimport { createUpdateEvent } from './events';\nimport { createStore } from './store';\n\nexport abstract class StoreProvider extends HTMLElement\n    implements StoreProviderInterface {\n    store?: StoreInterface = undefined;\n    listeners: WeakMap<object, Function> = new WeakMap();\n\n    constructor() {\n        super();\n\n        this.addEventListener(StoreEvents.Request, <any>this.onStoreRequest, true);\n        this.addEventListener(StoreEvents.Dispatch, this.onStoreDispatch, true);\n\n        this.store = createStore(this.config);\n        this.store.subscribe(this.onStateChange);\n    }\n\n    get config(): StoreConfig {\n        return {};\n    }\n\n    getStore(): StoreInterface {\n        return this.store!;\n    }\n\n    onStateChange = (state: any, mutation?: Mutation) =>\n        this.dispatchEvent(createUpdateEvent(state, mutation))\n\n    onStoreRequest = (event: RequestStoreEvent) => {\n        event.stopPropagation();\n        event.detail.store = this;\n    }\n\n    onStoreDispatch = (event: Event) => {\n        this.getStore().dispatch((<CustomEvent>event).detail);\n    }\n}\n","export * from './store';\nexport * from './withStore';\nexport * from './StoreProvider';\nexport * from './types';","import { StoreProvider, withStore, createStore } from '@tiny-lit/store';\nimport { html } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\n\nconst JSONObject = value => {\n    if (typeof value !== object) {\n        try {\n            value = JSON.parse(value);\n        } catch (e) {}\n    }\n    return value;\n};\n\nconst Items = [\n    {\n        name: 'Men+s+Tech+Shell+Full-Zip',\n        title: \"Men's Tech Shell Full-Zip\",\n        category: 'mens_outerwear',\n        price: 50.2\n    },\n    {\n        name: 'Anvil+L+S+Crew+Neck+-+Grey',\n        title: 'Anvil L/S Crew Neck - Grey',\n        category: 'mens_outerwear',\n        price: 22.15\n    },\n    {\n        name: 'Green+Flex+Fleece+Zip+Hoodie',\n        title: 'Green Flex Fleece Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 45.65\n    },\n    {\n        name: 'Android+Nylon+Packable+Jacket',\n        title: 'Android Nylon Packable Jacket',\n        category: 'mens_outerwear',\n        price: 33.6\n    },\n    {\n        name: 'YouTube+Ultimate+Hooded+Sweatshirt',\n        title: 'YouTube Ultimate Hooded Sweatshirt',\n        category: 'mens_outerwear',\n        price: 32.35\n    },\n    {\n        name: 'Grey+Heather+Fleece+Zip+Hoodie',\n        title: 'Grey Heather Fleece Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 38.85\n    },\n    {\n        name: 'Vastrm+Hoodie',\n        title: 'Vastrm Hoodie',\n        category: 'mens_outerwear',\n        price: 200.0\n    },\n    {\n        name: 'Recycled+Plastic+Bottle+Hoodie+-+Green',\n        title: 'Recycled Plastic Bottle Hoodie - Green',\n        category: 'mens_outerwear',\n        price: 60.95\n    },\n    {\n        name: 'Rowan+Pullover+Hood',\n        title: 'Rowan Pullover Hood',\n        category: 'mens_outerwear',\n        price: 60.85\n    },\n    {\n        name: 'Men+s+Voyage+Fleece+Jacket',\n        title: \"Men's Voyage Fleece Jacket\",\n        category: 'mens_outerwear',\n        price: 48.0\n    },\n    {\n        name: 'Eco-Jersey+Chrome+Zip+Up+Hoodie',\n        title: 'Eco-Jersey Chrome Zip Up Hoodie',\n        category: 'mens_outerwear',\n        price: 37.75\n    },\n    {\n        name: 'Android+Colorblock+Hooded+Pullover',\n        title: 'Android Colorblock Hooded Pullover',\n        category: 'mens_outerwear',\n        price: 50.2\n    },\n    {\n        name: 'Tri-blend+Full-Zip+Hoodie',\n        title: 'Tri-blend Full-Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 52.2\n    },\n    {\n        name: 'Fleece+Full-Zip+Hoodie',\n        title: 'Fleece Full-Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 45.65\n    },\n    {\n        name: 'Jacquard-Knit+Full-Zip+Fleece',\n        title: 'Jacquard-Knit Full-Zip Fleece',\n        category: 'mens_outerwear',\n        price: 74.9\n    },\n    {\n        name: 'YouTube+Unisex+Flex+Fleece+Zip+Hoodie',\n        title: 'YouTube Unisex Flex Fleece Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 45.25\n    }\n];\n\nconst ElementWithStore = withStore(Element);\n\nclass MyStore extends StoreProvider {\n    static get is() {\n        return 'my-store';\n    }\n\n    get config() {\n        return {\n            initialState: {\n                ...JSON.parse(this.getAttribute('initial-state')),\n                cart: [],\n                count: 0\n            },\n            plugins: [store => store.subscribe(console.log)],\n            actions: {\n                addToCart({ commit }, item) {\n                    commit('addItem', item);\n                    commit('updateCount');\n                },\n                removeFromCart({ commit }, item) {\n                    commit('removeItemByIndex', item);\n                    commit('updateCount');\n                },\n                removeAllFromCart({ commit, state }) {\n                    let items = state.cart;\n\n                    items.forEach(item => commit('removeItem', item));\n\n                    commit('updateCount');\n                }\n            },\n            mutations: {\n                addItem(state, data) {\n                    return{\n                        ...state,\n                        cart: [\n                            ...state.cart,\n                            data\n                        ]\n                    };\n                },\n                removeItemByIndex(state, data) {\n                    return{\n                        ...state,\n                        cart: state.cart.filter((a, i) => i !== data)\n                    };\n                },\n                removeItem(state, item) {\n                    return {\n                        ...state,\n                        cart: state.cart.filter(i => i !== item)\n                    };\n                },\n                updateCount(state) {\n                    return {\n                        ...state,\n                        count: state.cart.length\n                    };\n                }\n            }\n        };\n    }\n}\ncustomElements.define(MyStore.is, MyStore);\n\nclass Basket extends ElementWithStore {\n    constructor() {\n        super();\n        this.count = 0;\n        this.items = [];\n        this.state = {\n            open: false\n        };\n    }\n\n    static get properties() {\n        return {\n            count: Number,\n            items: Object\n        };\n    }\n\n    onStateChange(state) {\n        this.count = state.count;\n        this.items = state.cart;\n    }\n\n    static get is() {\n        return 'shop-basket';\n    }\n\n    handleRemove(index) {\n        this.dispatch('removeFromCart', index);\n    }\n\n    handleRemoveAll() {\n        this.dispatch('removeAllFromCart');\n    }\n\n    toggleCart = () => {\n        this.setState({\n            open: !this.state.open\n        })\n    }\n\n    render() {\n        return html`\n            <style>\n                .basket {\n                    position: fixed;\n                    bottom: 0;\n                    right: 10px;\n                    color: white;\n                    z-index: 100;\n                }\n\n                .basket__list {\n                    z-index: 100;\n                    overflow-y: scroll;\n                    max-height: 150px;\n                    margin: 0;\n                }\n\n                .basket__listItem  {\n                    margin-bottom: 5px;\n                }\n\n                .basket__listItemButton {\n                    padding: 3px 5px;\n                }\n\n                .basket__dropdown {\n                    position: absolute;\n                    bottom: calc(100% + 10px);\n                    background-color: rgb(var(--background));\n                    width: 300px;\n                    right: 0;\n                    padding: 10px;\n                    border: 1px solid rgb(var(--primary));\n                }\n\n                .basket__toggle {\n                    position: relative;\n                }\n\n                .basket__badge {\n                    background: rgb(var(--primary));\n                    border-radius: 50%;\n                    padding: 2px;\n                    color: rgb(var(--background));\n                    position: absolute;\n                    top: 0;\n                    right: 0;\n                    width: 15px;\n                    height: 15px;\n                    font-size: 12px;\n                    line-height: 15px;\n                    margin: 5px 10px 0;\n                }\n\n                .basket__clear {\n                    float:right;\n                    margin-top: 20px;\n                }\n            </style>\n            <div class=\"basket\">\n                <button class=\"basket__toggle\" onClick=${this.toggleCart}>\n                    <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        viewBox=\"0 0 576 512\"\n                        width=\"24\"\n                    >\n                        <path\n                            fill=\"currentColor\"\n                            d=\"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z\"\n                        ></path>\n                    </svg>\n                    <span class=\"basket__badge\">${this.count}</span>\n                </button>\n                <div class=\"basket__dropdown\" hidden=${!this.state.open}>\n                    <span>Total: ${this.count}${html`<span>items</span>`}</span>\n\n\n                    <table class=\"basket__list\">\n                        <thead>\n                            <tr>\n                                <th>Item</th>\n                                <th>Qty</th>\n                                <th></th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${this.items.map(\n                                (item, index) => html`\n                                <tr>\n                                    <td>${item.title}</td>\n                                    <td>1</td>\n                                    <td>\n                                        <button\n                                            class=\"basket__listItemButton\"\n                                            onCLick=${() => this.handleRemove(index)}\n                                        >\n                                            X\n                                        </button>\n                                    </td>\n                                </tr>\n                            `)}\n                        </tbody>\n                    </table>\n\n                    ${\n                        this.items.length\n                            ? html`<button class=\"basket__clear\" onClick=${() =>\n                                this.handleRemoveAll()}>remove all</button>`\n                            : null\n                    }\n                </div>\n            </div>\n        `;\n    }\n}\ncustomElements.define(Basket.is, Basket);\n\nclass Item extends ElementWithStore {\n    item = {};\n\n    static get is() {\n        return 'shop-item';\n    }\n\n    static get properties() {\n        return {\n            c: JSONObject\n        };\n    }\n\n    handleClick = () => {\n        this.dispatch('addToCart', this.item);\n    };\n\n    render() {\n        return html`\n            <div class=\"detail\" has-content=\"\">\n                <img\n                    src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw\"\n                    width=\"300\"\n                    height=\"300\"\n                    class=\"image\"\n                />\n                <h1>${this.item.title}</h1>\n                <div class=\"price\">${this.item.price}$</div>\n                <button\n                    onClick=${this.handleClick}\n                    class=\"button\"\n                    aria-label=\"Add this item to cart\"\n                >\n                    Add to Cart\n                </button>\n            </div>\n        `;\n    }\n}\ncustomElements.define(Item.is, Item);\n\nclass StoreDemo extends Element {\n    static get is() {\n        return 'store-demo';\n    }\n\n    render() {\n        return html`\n            <style>\n                h1 {\n                    font-size: 13px;\n                    font-weight: 500;\n                    line-height: 28px;\n                    margin: 0;\n                }\n                .detail {\n                    text-align:center;\n                    margin: 0 28px 48px;\n                }\n                .price {\n                    margin: 0px 0 10px;\n                    font-size: 13px;\n                }\n                .image {\n                    max-width: 100%;\n                    background: rgb(117, 117, 117);\n                }\n                my-store {\n                    display: flex;\n                    flex-wrap: wrap;\n                    position: relative;\n                }\n                shop-item {\n                    flex: 1 1;\n                    flex-basis: 33%;\n                    max-width: 33%;\n                }\n                @media (max-width: 767px) {\n                    shop-item {\n                        flex-basis: 100%;\n                        max-width: 100%;\n                    }\n                }\n            </style>\n            <my-store>\n                <shop-basket></shop-basket>\n                ${Items.map(item => html`<shop-item item=${item}></shop-item>`)}\n            </my-store>\n        `;\n    }\n}\n\ncustomElements.define(StoreDemo.is, StoreDemo);\n","import { html, render } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\n\nconst t = c => html`\n    <div>${c}</div>\n`;\n\nclass Svg extends Element {\n    static get is() {\n        return 'test-svg';\n    }\n\n    maxRadius = 50;\n    state = {\n        radius: 0\n    };\n\n    constructor() {\n        super();\n        this.attachShadow({ mode: 'open' });\n    }\n\n    onChange = ({ target }) => {\n        this.maxRadius = Number(target.value);\n        this.update();\n    };\n\n    connectedCallback() {\n        super.connectedCallback();\n\n        this.interval = setInterval(\n            () =>\n                this.setState({\n                    radius: Math.abs(Math.sin(Date.now() / 1000) * this.maxRadius)\n                }),\n            20\n        );\n    }\n\n    disconnectedCallback() {\n        clearInterval(this.interval);\n    }\n\n    render() {\n        return html`\n            <style>\n                :host {\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-between;\n                    flex-direction: column;\n                    height: 50vh;\n                }\n            </style>\n            <div>\n                <p>Max size</p>\n                <input\n                    type=\"range\"\n                    min=\"10\"\n                    max=\"100\"\n                    onChange=${this.onChange}\n                    value=${this.radius}\n                />\n            </div>\n            <svg height=${this.maxRadius * 2} width=${this.maxRadius * 2}>\n                <circle\n                    cx=${this.maxRadius}\n                    cy=${this.maxRadius}\n                    r=\"${this.state.radius}\"\n                    stroke=\"black\"\n                    stroke-width=\"3\"\n                    fill=\"red\"\n                />\n                Sorry, your browser does not support inline SVG.\n            </svg>\n        `;\n    }\n}\ncustomElements.define(Svg.is, Svg);\n","import { HistoryInterface } from '../types';\n\nexport default (): HistoryInterface => ({\n    path() {\n        return location.hash ? location.hash.substring(1) : '/';\n    },\n    go(path: string) {\n        location.hash = `#${path}`;\n    },\n    listen(callback) {\n        addEventListener('hashchange', <any>callback);\n\n        return removeEventListener.bind(window, 'hashchange', callback);\n    }\n});\n","import { HistoryInterface } from '../types';\n\nexport default (): HistoryInterface => ({\n    path() {\n        return location.pathname;\n    },\n    go(path: string) {\n        history.pushState(null, document.title, path);\n        dispatchEvent(new Event('pushstate'));\n    },\n    listen(callback) {\n        addEventListener('popstate', <any>callback);\n        addEventListener('pushstate', <any>callback);\n\n        return removeEventListener.bind(window, 'popstate', callback);\n    }\n});","export { default as createHashHistory } from './hash';\nexport { default as createPathHistory } from './path';","import {\n    RouteCallbacks,\n    Route,\n    Router as RouterInterface,\n    HistoryInterface\n} from './types';\nimport { RouterOptions } from './types';\nimport { createPathHistory, createHashHistory } from './history';\n\n/**\n * Valid paths:\n * Required\n * /:param\n *\n * Optional\n * /:param?\n *\n * Required matching list\n * /:param{test1,test2}\n *\n * Optional matching list\n * /:param{test1,test2}?\n * @param {*} path\n */\nconst ParamsRegex: RegExp = /\\/:([\\w]+)(?:{([\\w,]+)})?(\\?)?/g;\n\nfunction parsePath(path: string) {\n    let m,\n        params: Array<string> = [],\n        pattern = path;\n\n    if (path === '*') {\n        return {\n            regex: /.*/,\n            params: []\n        };\n    }\n\n    while ((m = ParamsRegex.exec(path))) {\n        const paramRegex = m[2] ? `${m[2].split(',').join('|')}` : '[^/]+';\n\n        params.push(m[1]);\n        pattern = pattern.replace(\n            m[0],\n            `(?:\\\\/(${paramRegex}))${m[3] ? '?' : ''}`\n        );\n    }\n\n    return {\n        regex: new RegExp(`^${pattern}\\\\/?$`),\n        params\n    }\n}\n\nexport class Router implements RouterInterface {\n    history: HistoryInterface;\n    routes: Array<Route> = [];\n    current?: Route;\n\n    constructor({ interceptLocals, useHash }: RouterOptions) {\n        if (useHash) this.history = createHashHistory();\n        else this.history = createPathHistory();\n\n        this.history.listen(this.resolve);\n\n        if (interceptLocals)\n            document.addEventListener('click', this.handleLocalClick);\n    }\n\n    handleLocalClick = e => {\n        const target = e.target;\n        if (\n            target.nodeName === 'A' &&\n            target.href.indexOf(location.origin) === 0\n        ) {\n            e.preventDefault();\n\n            this.goTo(target.getAttribute('href'));\n        }\n    }\n\n    on(path: string, callbacks: RouteCallbacks = {}) {\n        const route = {\n            path,\n            callbacks,\n            ...parsePath(path)\n        };\n        this.routes.push(route);\n\n        return () => (this.routes = this.routes.filter(r => r !== route));\n    }\n\n    resolve = () => {\n        const path = this.history.path();\n        const current = this.current;\n\n        this.routes.some((route: Route) => {\n            let match: any = path.match(route.regex);\n            const { onEnter, onUpdate } = route.callbacks;\n\n            if (match) {\n                match = match\n                    .filter(m => m !== undefined)\n                    .reduce((map, m, i) => {\n                        if (i) map[route.params[i - 1]] = m;\n                        return map;\n                    }, {});\n\n                if (current !== route) {\n                    this.current = route;\n\n                    if (current)\n                        current.callbacks.onLeave!(match);\n\n                    onEnter!(match);\n                } else {\n                    onUpdate!(match);\n                }\n            }\n\n            return match;\n        });\n    }\n\n    goTo(path) {\n        this.history.go(path);\n    }\n}\n","export interface RouteCallbacks {\n    onEnter?(matches: any);\n    onLeave?(matches: any);\n    onUpdate?(matches: any);\n}\n\nexport const enum RouteComponentCallbacks {\n    onRouteUpdate = 'onRouteUpdate',\n    onRouteEnter = 'onRouteEnter',\n    onRouteLeave = 'onRouteLeave'\n}\n\nexport interface RouteComponent extends HTMLElement {\n    [RouteComponentCallbacks.onRouteEnter]?(matches: any);\n    [RouteComponentCallbacks.onRouteUpdate]?(matches: any);\n    [RouteComponentCallbacks.onRouteLeave]?();\n}\n\nexport type Route = {\n    regex: RegExp;\n    params: Array<string>;\n    callbacks: RouteCallbacks;\n    path: string\n};\n\nexport enum RouterEvents {\n    Request = 'router::request',\n    Change = 'router::change'\n}\n\nexport interface Router {\n    routes: Array<Route>;\n    current?: Route;\n    on(path: string, callbacks: RouteCallbacks): Function;\n    resolve();\n    goTo(path);\n}\n\nexport type RequestRouterEvent = CustomEvent<{ router?: Router }>;\n\nexport type RouterOptions = {\n    interceptLocals?: boolean;\n    useHash?: Boolean;\n};\n\nexport type HistoryInterface = {\n    path(): string;\n    go(path: string): void;\n    listen(callback: () => void): Function;\n};\n","import { RouterEvents, RequestRouterEvent, Router } from './types';\n\nexport function requestRouter(el: HTMLElement): Router | undefined {\n    const event: RequestRouterEvent = new CustomEvent(RouterEvents.Request, { detail: {} });\n    el.dispatchEvent(event);\n\n    return event.detail.router;\n}","import { Router, RouteComponent } from './types';\nimport { requestRouter } from './events';\n\nconst importedModules = new Set();\nconst importModule = url =>\n    new Promise(resolve => {\n        if (!url || importedModules.has(url)) return resolve();\n        else {\n            const script = document.createElement('script');\n            script.onload = resolve;\n            script.src = url;\n\n            document.appendChild(script);\n\n            importedModules.add(url);\n        }\n    });\n\nconst waitComponent = (route: RouteElement, component: HTMLElement) =>\n    importModule(route.getAttribute('module')!)\n        // TODO check element upgrade\n        .then(() => customElements.whenDefined(component.localName));\n\nexport class RouteElement extends HTMLElement {\n    router?: Router;\n    dispose?: Function;\n\n    connectedCallback() {\n        const path = this.getAttribute('path'),\n            componentName = this.getAttribute('component');\n\n        if (!path || !componentName) return;\n\n        if ((this.router = requestRouter(this))) {\n            const component: RouteComponent = document.createElement(\n                componentName\n            );\n\n            this.dispose = this.router.on(path, {\n                onEnter: params => {\n                    waitComponent(this, component)\n                        .then(() => this.appendChild(component))\n                        .then(\n                            () =>\n                                component.onRouteEnter &&\n                                component.onRouteEnter(params)\n                        );\n                },\n                onUpdate: params => {\n                    waitComponent(this, component).then(\n                        () =>\n                            component.onRouteUpdate &&\n                            component.onRouteUpdate(params)\n                    );\n                },\n                onLeave: () => {\n                    waitComponent(this, component)\n                        .then(\n                            () =>\n                                component.onRouteLeave &&\n                                component.onRouteLeave()\n                        )\n                        .then(() => this.removeChild(component));\n                }\n            });\n        }\n    }\n\n    disconnectedCallback() {\n        if (this.dispose) this.dispose();\n    }\n}\n","import { Router } from './router';\nimport { RouterEvents, RequestRouterEvent } from './types';\n\nexport class RouterProvider extends HTMLElement {\n    router?: Router;\n\n    onRouterRequest = (e: RequestRouterEvent) => {\n        e.detail.router = this.router;\n    }\n\n    connectedCallback() {\n        document.body.addEventListener(RouterEvents.Request, <any>this.onRouterRequest, true);\n\n        if (!this.router) {\n            this.router = new Router({\n                interceptLocals: this.hasAttribute('intercept-locals'),\n                useHash: this.hasAttribute('use-hash')\n             });\n        }\n\n        requestAnimationFrame(() => this.router!.resolve());\n    }\n\n    disconnectedCallback() {\n        document.body.removeEventListener(RouterEvents.Request, <any>this.onRouterRequest, true);\n    }\n}\n","export { Router } from './router';\nexport { RouteElement } from './RouteElement';\nexport { RouterProvider } from './RouterProvider';","import './todo';\nimport './karpinsky';\nimport './store';\nimport './svg';\n\nimport { RouterProvider, RouteElement } from '@tiny-lit/router';\n\ncustomElements.define('demo-router', RouterProvider);\ncustomElements.define('demo-route', RouteElement);\n"]}