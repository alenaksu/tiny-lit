{"version":3,"sources":["../node_modules/@tiny-lit/core/src/utils.ts","../node_modules/@tiny-lit/core/src/types.ts","../node_modules/@tiny-lit/core/src/scheduler.ts","../node_modules/@tiny-lit/core/src/expressions.ts","../node_modules/@tiny-lit/core/src/linker.ts","../node_modules/@tiny-lit/core/src/parser.ts","../node_modules/@tiny-lit/core/src/template.ts","../node_modules/@tiny-lit/core/src/index.ts","../node_modules/@tiny-lit/element/src/withProps.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/utils.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/types.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/scheduler.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/expressions.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/linker.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/parser.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/template.ts","../node_modules/@tiny-lit/element/node_modules/@tiny-lit/core/src/index.ts","../node_modules/@tiny-lit/element/src/withElement.ts","../node_modules/@tiny-lit/element/src/Element.ts","../node_modules/@tiny-lit/element/src/index.ts","../src/todo/style.js","../node_modules/secchiojs/lib/index.js","../src/todo/index.js","../src/scheduler/Dot.js","../src/scheduler/Triangle.js","../src/scheduler/index.js","../node_modules/@tiny-lit/store/src/types.ts","../node_modules/@tiny-lit/store/src/events.ts","../node_modules/@tiny-lit/store/src/store.ts","../node_modules/@tiny-lit/store/src/withStore.ts","../node_modules/@tiny-lit/store/src/StoreProvider.ts","../node_modules/@tiny-lit/store/src/index.ts","../src/store/index.js","../src/svg/index.js","../node_modules/@tiny-lit/router/src/history/hash.ts","../node_modules/@tiny-lit/router/src/history/path.ts","../node_modules/@tiny-lit/router/src/history/index.ts","../node_modules/@tiny-lit/router/src/router.ts","../node_modules/@tiny-lit/router/src/types.ts","../node_modules/@tiny-lit/router/src/events.ts","../node_modules/@tiny-lit/router/src/RouteElement.ts","../node_modules/@tiny-lit/router/src/RouterProvider.ts","../node_modules/@tiny-lit/router/src/index.ts","../src/index.js"],"names":["html","defer","window","requestIdleCallback","requestAnimationFrame","isExpired","entry","expire","timestamp","Date","now","isSameVersion","version","setItem","key","data","storage","JSON","stringify","getItem","options","cached","parse","removeItem","getBucket","name","Object","assign","localStorage","defaultValue","value","prevented","f","e","stopPropagation","preventDefault","getTodos","setTodos","todos","filter","shuffle","array","counter","length","index","Math","floor","random","temp","TodoMVC","Element","constructor","state","attachShadow","mode","is","setState","nextState","setFilter","completed","handleAddTodo","text","target","elements","id","toString","substr","reset","handleDeleteTodo","remove","todo","switchCompleted","handleClearCompleted","connectedCallback","console","time","update","firstUpdated","timeEnd","render","style","map","withKey","customElements","define","SierpinskiDot","properties","x","Number","y","size","String","hover","Boolean","addEventListener","s","targetSize","SierpinskiTriangle","seconds","renderTemplate","performance","rafInterval","fn","running","run","SchedulerDemo","elapsed","rendered","start","timerInterval","setInterval","tick","bind","renderInterval","disconnectedCallback","clearInterval","getTransform","t","JSONObject","Items","title","category","price","ElementWithStore","MyStore","StoreProvider","config","initialState","getAttribute","cart","count","plugins","store","subscribe","log","actions","addToCart","commit","item","removeFromCart","removeAllFromCart","forEach","mutations","addItem","removeItemByIndex","a","i","updateCount","Basket","toggleCart","open","items","onStateChange","handleRemove","dispatch","handleRemoveAll","Item","handleClick","StoreDemo","c","Svg","radius","maxRadius","onChange","interval","abs","sin","RouterProvider","RouteElement"],"mappings":"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","file":"src.b33551cf.js","sourceRoot":"../../packages/demo/public","sourcesContent":["import { TemplateInterface } from './types';\n\nexport function comment(data: string = ''): Comment {\n    return document.createComment(data);\n}\n\nexport function text(data: string = ''): Text {\n    return document.createTextNode(data);\n}\n\nexport function isNode(obj: any, type?: number): boolean {\n    return (\n        !!obj &&\n        !!(<Node>obj).nodeType &&\n        (!type || (<Node>obj).nodeType === type)\n    );\n}\n\nexport function isPrimitive(val: any) {\n    return val !== Object(val);\n}\n\nexport function replaceRange(newNode: Node, range: any) {\n    const [startNode, endNode] = <any>[].concat(range);\n\n    if (!startNode.parentNode) return;\n\n    if (endNode && startNode.nextSibling !== endNode) {\n        removeNodes(startNode.nextSibling!, endNode);\n    }\n\n    startNode.parentNode!.replaceChild(newNode, startNode);\n}\n\nexport function removeNodes(\n    startNode: Node,\n    endNode: Node | null = null,\n    parent: Node | null = startNode.parentNode!\n): void {\n    if (!parent) return;\n\n    while (startNode !== endNode) {\n        const nextNode = startNode.nextSibling!;\n        parent.removeChild(startNode);\n        startNode = nextNode;\n    }\n}\n\nexport function moveTemplate(\n    template: TemplateInterface,\n    after: Node,\n    parent: Node = after.parentNode!\n): void {\n    const [startNode, endNode] = template.range!;\n    const before = after.nextSibling!;\n\n    let node = startNode;\n    do {\n        const nextNode = node!.nextSibling!;\n        parent.insertBefore(node, before as Node);\n        node = nextNode;\n    } while (node !== endNode);\n    parent.insertBefore(endNode, before as Node);\n}\n\nexport function getNodeIndex(node: Node): number {\n    let index = 0;\n    while ((node = node.previousSibling!)) index++;\n    return index;\n}\n\nexport function getNodePath(node: Node): Array<number> {\n    const path: number[] = [];\n    while (node.parentNode) {\n        path.unshift(getNodeIndex(node));\n        node = node.parentNode;\n    }\n    return path;\n}\n\nexport function getNodeByPath(node: Node, path: Array<number>): Node {\n    for (let i = 0, l = path.length; i < l; i++)\n        node = node.childNodes[path[i]];\n\n    return node;\n}\n\nexport const TemplateSymbol = Symbol();\n\nexport function isSameTemplate(\n    t1: TemplateInterface,\n    t2: TemplateInterface\n): boolean {\n    return isTemplate(t1) && isTemplate(t2) && t1.strings === t2.strings;\n}\n\nexport function isTemplate(obj: any): boolean {\n    return obj && obj[TemplateSymbol];\n}\n\nexport const MARKER_PREFIX = `__${Math.random().toString().slice(2)}_`;\nexport const MARKER_RE = new RegExp(\n    `<!--${MARKER_PREFIX}(\\\\d+)-->|${MARKER_PREFIX}(\\\\d+)`\n);\n\nexport const TEXT_ELEMENT = /^(?:style|textarea)$/i;\n\nexport function markerNumber(value) {\n    const m = MARKER_RE.exec(value);\n    MARKER_RE.lastIndex = 0;\n\n    return m ? Number(m[1] || m[2]) : -1;\n}\n","export interface Expression {\n    update(value: any, force?: boolean): void;\n    clear?(): void;\n}\n\nexport interface TemplateInterface {\n    update(values: any[], force?: boolean): void;\n    create(): Node;\n    delete(): void;\n    range?: [Node, Node];\n    expressions?: Expression[];\n    values: any[];\n    strings?: TemplateStringsArray;\n    context?: string;\n    key?: string;\n    withKey(key: string): TemplateInterface;\n}\n\nexport type LinkSymbol = {\n    type: new (...args: any[]) => void;\n    name?: string;\n    namespaceURI?: string | null;\n    nodePath: Array<number>;\n};\n\nexport type CacheEntry = {\n    expressions: Array<LinkSymbol>;\n    content: DocumentFragment;\n};\n\nexport type TemplateArray = Map<string, TemplateInterface>;\n\nexport type SchedulerJob = {\n    task: Function;\n    args: any[];\n    scheduled?: boolean;\n    firstRun?: boolean;\n};\n\nexport type SchedulerQueue = Array<SchedulerJob>;\n\nexport const enum JobPriority {\n    Low = 0,\n    Normal,\n    High\n}\n","import { SchedulerQueue, SchedulerJob, JobPriority } from './types';\n\nconst jobsQueue: SchedulerQueue = [];\nconst jobsQueueLow: SchedulerQueue = [];\n\nconst JOB_WINDOW = 10;\nconst JOB_MAX_WAIT = 100;\nconst raf = window.requestAnimationFrame;\n\nlet flushPending = false;\nlet queueAge = 0;\nlet enabled = true;\n\nfunction flushQueue(queue, timeout: number): void {\n    let i = 0;\n    const l = queue.length;\n\n    while (Date.now() < timeout && i < l) {\n        const job = queue[i++];\n        job.task!(...job.args);\n\n        job.args = undefined;\n        job.scheduled = false;\n    }\n\n    queue.splice(0, i);\n}\n\nfunction flush() {\n    queueAge++;\n\n    const now = Date.now();\n    const timeSlice = JOB_WINDOW * Math.ceil(queueAge * (1.0 / JOB_MAX_WAIT));\n    const timeout = now + timeSlice;\n\n    flushQueue(jobsQueue, timeout);\n    flushQueue(jobsQueueLow, timeout);\n\n    if (jobsQueue.length > 0) {\n        jobsQueueLow.push(...jobsQueue);\n        jobsQueue.length = 0;\n    }\n\n    if (jobsQueueLow.length > 0) raf(flush);\n    else {\n        flushPending = false;\n        queueAge = 0;\n    }\n}\n\nexport function setEnabled(value: boolean) {\n    enabled = value;\n}\n\nexport function enqueueJob(job: SchedulerJob, priority: JobPriority) {\n    job.scheduled = true;\n\n    if (priority === JobPriority.Normal) jobsQueue.push(job);\n    else if (priority === JobPriority.Low) jobsQueueLow.push(job);\n\n    if (!flushPending) {\n        flushPending = true;\n        raf(flush);\n    }\n}\n\nexport function scheduled(\n    task: Function,\n    priority: JobPriority = JobPriority.Normal\n) {\n    const job: SchedulerJob = {\n        task,\n        args: [],\n        scheduled: false,\n        firstRun: true\n    };\n\n    return (...args) => {\n        if (job.firstRun || !enabled) {\n            job.firstRun = false;\n            task(...args);\n        } else {\n            job.args = args;\n            if (!job.scheduled) enqueueJob(job, priority);\n        }\n    };\n}\n","import { Expression, TemplateInterface, TemplateArray } from './types';\nimport {\n    isNode,\n    replaceRange,\n    isTemplate,\n    isSameTemplate,\n    moveTemplate,\n    text,\n    isPrimitive\n} from './utils';\nimport { scheduled } from './scheduler';\n\nexport class AttributeExpression implements Expression {\n    value?: any;\n\n    constructor(\n        public element: Element,\n        public name: string,\n        public namespaceURI: string | null\n    ) {}\n\n    update(newValue: any): void {\n        if (newValue === this.value) return;\n\n        this.requestUpdate(newValue);\n    }\n\n    requestUpdate = scheduled((newValue: any): void => {\n        const { name, element, namespaceURI } = this;\n\n        if ('ownerSVGElement' in <SVGElement>element) {\n            element.setAttributeNS(namespaceURI, name, newValue);\n        } else if (name in element) {\n            (element as any)[name] = newValue;\n        } else if (typeof newValue !== 'undefined') {\n            element.setAttribute(name, newValue);\n        } else {\n            element.hasAttribute(name) && element.removeAttribute(name);\n        }\n\n        this.value = newValue;\n    });\n}\n\nexport class NodeExpression implements Expression {\n    element: Node | TemplateInterface;\n    placeholder: Node;\n    value?: Node | TemplateInterface | TemplateArray;\n\n    constructor(element: Node) {\n        this.element = this.placeholder = element;\n    }\n\n    updateArray(items: TemplateInterface[]) {\n        this.replaceWith(this.placeholder);\n\n        const templates = this.value instanceof Map ? this.value : new Map();\n\n        let currentNode: Node = <Node>this.element;\n        const keys = new Set();\n        for (let i = 0, l = items.length; i < l; i++) {\n            const item = items[i];\n\n            const key: string = String(item.key || i);\n            let template = templates.get(key)!;\n\n            if (!template) {\n                const node: Node = item.create();\n                currentNode.parentNode!.insertBefore(\n                    node,\n                    currentNode.nextSibling\n                );\n\n                templates.set(key, (template = item));\n            } else if (!isSameTemplate(template, item)) {\n                replaceRange(item.create(), template.range);\n                templates.set(key, (template = item));\n            } else {\n                template.update(item.values);\n            }\n\n            if (currentNode.nextSibling !== template.range[0]) {\n                moveTemplate(template, currentNode);\n            }\n            currentNode = template.range[1];\n\n            keys.add(key);\n        }\n\n        templates.forEach((template, key, map) => {\n            if (!keys.has(key)) {\n                template.delete();\n                map.delete(key);\n            }\n        });\n\n        return templates;\n    }\n\n    replaceWith(newValue: Node | TemplateInterface | TemplateArray) {\n        const { element, value, placeholder } = this;\n\n        if (newValue == null) newValue = placeholder;\n\n        if (element !== newValue) {\n            if (value instanceof Map) {\n                value.forEach((template) => template.delete());\n                value.clear();\n            }\n\n            this.element = <any>newValue;\n\n            replaceRange(\n                isTemplate(newValue)\n                    ? (<TemplateInterface>newValue).create()\n                    : <Node>newValue,\n                isTemplate(element)\n                    ? (<TemplateInterface>element).range!\n                    : <Node>element\n            );\n        }\n    }\n\n    updateText(value: any) {\n        if (!isNode(this.element, Node.TEXT_NODE)) {\n            this.replaceWith(text());\n        }\n        (<Text>this.element).textContent = value;\n    }\n\n    updateTemplate(values: any[]) {\n        (<TemplateInterface>this.element).update(values);\n    }\n\n    update(newValue: any): void {\n        if (newValue === this.value) return;\n\n        this.requestUpdate(newValue);\n    }\n\n    requestUpdate = scheduled((newValue: any): void => {\n        if (isPrimitive(newValue)) {\n            this.updateText(newValue);\n        } else if (Array.isArray(newValue)) {\n            newValue = this.updateArray(newValue);\n        } else if (isSameTemplate(newValue, <TemplateInterface>this.element)) {\n            this.updateTemplate(newValue.values);\n        } else {\n            this.replaceWith(newValue);\n        }\n\n        this.value = newValue;\n    });\n}\n","import { LinkSymbol, Expression } from './types';\nimport { AttributeExpression, NodeExpression } from './expressions';\nimport {\n    getNodePath,\n    getNodeByPath,\n    text,\n    TEXT_ELEMENT,\n    MARKER_RE,\n    markerNumber,\n    isNode\n} from './utils';\n\nfunction treeWalkerFilter() {\n    return NodeFilter.FILTER_ACCEPT;\n}\n// fix(IE11): expect filter to be a function and not an object\n(<any>treeWalkerFilter).acceptNode = treeWalkerFilter;\n\nexport function linkAttributes(\n    element: Element,\n    linkedExpressions: LinkSymbol[]\n): void {\n    const attrs = element.attributes;\n    let i = attrs.length;\n\n    while (i--) {\n        const { name, value, namespaceURI } = attrs.item(i) as Attr;\n        const m = markerNumber(value);\n\n        if (~m) {\n            element.removeAttribute(name);\n            linkedExpressions[m] = {\n                type: AttributeExpression,\n                name,\n                namespaceURI,\n                nodePath: getNodePath(element)\n            };\n        }\n    }\n}\n\nexport function linkComment(node: Comment, linkedExpressions: LinkSymbol[]) {\n    const m = markerNumber(node.data);\n\n    if (~m) {\n        linkedExpressions[m] = {\n            type: NodeExpression,\n            nodePath: getNodePath(node)\n        };\n        node.nodeValue = '';\n    }\n}\n\nexport function linkTexts(\n    node: CharacterData,\n    linkedExpressions: LinkSymbol[]\n): void {\n    let m: RegExpExecArray | null;\n    while ((m = MARKER_RE.exec(node.data)) !== null) {\n        const keyNode: Text = text();\n        node = (<Text>node).splitText(m.index);\n        node.deleteData(0, m[0].length);\n\n        node.parentNode!.insertBefore(keyNode, node);\n\n        linkedExpressions[Number(m[1] || m[2])] = {\n            type: NodeExpression,\n            nodePath: getNodePath(keyNode)\n        };\n    }\n}\n\nexport function linkExpressions(root: DocumentFragment) {\n    const treeWalker = document.createTreeWalker(\n        root,\n        NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT,\n        treeWalkerFilter as any,\n        false\n    );\n\n    const linkedExpressions: Array<LinkSymbol> = [];\n\n    while (treeWalker.nextNode()) {\n        const node: any = treeWalker.currentNode;\n\n        if (isNode(node, Node.ELEMENT_NODE)) {\n            linkAttributes(node, linkedExpressions);\n            if (TEXT_ELEMENT.test(node.tagName)) {\n                for (const childNode of node.childNodes) {\n                    linkTexts(childNode, linkedExpressions);\n                }\n            }\n        } else linkComment(node, linkedExpressions);\n    }\n\n    return linkedExpressions;\n}\n\nexport function resolve(fragment: Node, symbols: LinkSymbol[]): Expression[] {\n    return symbols.map(\n        (symbol) =>\n            new symbol.type(\n                getNodeByPath(fragment, symbol.nodePath),\n                symbol.name,\n                symbol.namespaceURI\n            )\n    ) as any;\n}\n","import { Expression, CacheEntry } from './types';\nimport { linkExpressions, resolve } from './linker';\nimport { MARKER_PREFIX } from './utils';\n// import { TEXT_ELEMENT } from './utils';\n\nconst TemplateCache: WeakMap<TemplateStringsArray, CacheEntry> = new WeakMap();\n\nfunction createCacheEntry(html: string, context?: string): CacheEntry {\n    const template = document.createElement('template');\n    template.innerHTML = context ? `<${context}>${html}</${context}>` : html;\n\n    let content = template.content;\n    if (context) {\n        const range = document.createRange();\n        range.selectNodeContents(content.firstChild!);\n        content = range.extractContents();\n    }\n\n    return {\n        content,\n        expressions: linkExpressions(content)\n    };\n}\n\nfunction toHTML(strings: TemplateStringsArray) {\n    /**\n     * Use this regex to choose the right marker\n     * 1. ...<tag...\n     * 2. ...<tag...>\n     * 3. ...>...\n     * 4. ......\n     */\n    const tagName = `[0-9a-z-]+`,\n        attributeName = `[^<\\\\s\\\\0\"'>\\\\/=]+`,\n        attributeValue = `(?:\"[^\"]*\"?|'[^']*'?|[^\\\\s'\">]*)`,\n        attribute = `\\\\s*${attributeName}(?:\\\\s*=\\\\s*${attributeValue})?`,\n        tagOpen = `<(${tagName})(?:${attribute})*\\\\s*(>?)`;\n    const NODE_RE = new RegExp(`^[^]*${tagOpen}|[^]*(>)[^]*|[^]*$`, 'i');\n    const enum MatchType {\n        TagName = 1,\n        ClosedTag = 2,\n        EndTag = 3\n    }\n\n    let isAttribute = false;\n\n    let html = strings[0];\n    for (let i = 0, l = strings.length; i < l - 1; i++) {\n        const marker = `${MARKER_PREFIX}${i}`;\n        const match = strings[i].match(NODE_RE)!;\n\n        if (match[MatchType.TagName]) {\n            isAttribute = !match[MatchType.ClosedTag];\n        } else if (match[MatchType.EndTag]) {\n            isAttribute = false;\n        }\n\n        html += (isAttribute ? marker : `<!--${marker}-->`) + strings[i + 1];\n    }\n\n    return html;\n}\n\nexport function parseTemplate(\n    strings: TemplateStringsArray,\n    context?: string\n): { fragment: DocumentFragment; expressions: Expression[] } {\n    /**\n     * https://tc39.github.io/ecma262/#sec-gettemplateobject\n     * [...]The template objects are frozen and the same template object is\n     * used each time a specific tagged Template is evaluated[...]\n     */\n    let cacheEntry: CacheEntry = TemplateCache.get(strings)!;\n\n    if (!cacheEntry) {\n        TemplateCache.set(\n            strings,\n            (cacheEntry = createCacheEntry(toHTML(strings), context))\n        );\n    }\n\n    const fragment = document.importNode(cacheEntry.content, true);\n    const expressions = resolve(fragment, cacheEntry.expressions);\n\n    return {\n        fragment,\n        expressions\n    };\n}\n","import { TemplateInterface, Expression } from './types';\nimport { parseTemplate } from './parser';\nimport { TemplateSymbol, removeNodes, text } from './utils';\n\nexport class Template implements TemplateInterface {\n    [TemplateSymbol] = true;\n    values: any[];\n    strings: TemplateStringsArray;\n    range?: [Node, Node];\n    expressions?: Expression[];\n    context?: string;\n    key?: any;\n\n    constructor(\n        strings: TemplateStringsArray,\n        values: any[],\n        context?: string\n    ) {\n        this.values = values;\n        this.strings = strings;\n        this.context = context;\n    }\n\n    withKey(key: any) {\n        this.key = key;\n        return this;\n    }\n\n    update(values: any[]) {\n        for (let i = 0; i < values.length; i++) {\n            if (this.expressions![i])\n                this.expressions![i].update(values[i]);\n        }\n    }\n\n    delete() {\n        removeNodes(this.range![0], this.range![1].nextSibling);\n        this.range = undefined;\n        this.expressions = undefined;\n    }\n\n    create(): DocumentFragment {\n        const { fragment, expressions } = parseTemplate(\n            this.strings,\n            this.context\n        );\n        this.expressions = expressions;\n        this.range = [\n            fragment.insertBefore(text(), fragment.firstChild),\n            fragment.appendChild(text())\n        ];\n\n        this.update(this.values);\n\n        return fragment;\n    }\n}\n","export { Template } from './template';\nexport { scheduled } from './scheduler';\n\nimport { TemplateInterface } from './types';\nimport { Template } from './template';\nimport { removeNodes } from './utils';\n\nexport function render(template: TemplateInterface, container: HTMLElement) {\n    if (!render.instances.has(container)) {\n        render.instances.set(container, template);\n        removeNodes(container.firstChild!, null, container);\n\n        container.appendChild(template.create());\n    } else {\n        render.instances.get(container)!.update(template.values);\n    }\n}\nrender.instances = new WeakMap<HTMLElement, TemplateInterface>();\n\nexport function html(strings: any, ...values: any[]): Template {\n    return new Template(strings, values);\n}\n\nexport function svg(strings: any, ...values: any[]): Template {\n    return new Template(strings, values, 'svg');\n}\n","import {\n    Constructor,\n    PropertyDescriptor,\n    ElementProperties,\n    AttributeMap\n} from './types';\n\nfunction createChangeCallback(name) {\n    const defaultName = `on${name.charAt(0).toUpperCase()}${name.slice(\n        1\n    )}Changed`;\n\n    return function (this: any, ...args) {\n        this[defaultName] && this[defaultName](...args);\n    };\n}\n\nfunction normalizeDescriptor(name, descriptor) {\n    return {\n        type: descriptor.call ? descriptor : descriptor.type,\n        onChange:\n            descriptor.onChange === true\n                ? createChangeCallback(name)\n                : descriptor.onChange\n    };\n}\n\nfunction defineProp(\n    prototype,\n    name: string,\n    propertyDescriptor: PropertyDescriptor\n) {\n    Object.defineProperty(prototype, name, {\n        get(): any {\n            return this.__props[name];\n        },\n        set(newValue: any) {\n            const oldValue = this[name];\n\n            this.__props[name] = newValue;\n            if (this.rendered && oldValue !== newValue) {\n                if (propertyDescriptor.onChange)\n                    propertyDescriptor.onChange.call(this, newValue, oldValue);\n\n                this.update();\n            }\n        }\n    });\n}\n\nfunction defineProps(constructor: any): string[] {\n    if (!constructor.__attrs) {\n        const properties: ElementProperties<PropertyDescriptor> =\n            constructor.properties || {};\n        const attrsMap: AttributeMap = Object.create(null);\n        const props = Object.create(null);\n        const proto = constructor.prototype;\n\n        for (const propertyName in properties) {\n            const propertyDescriptor = normalizeDescriptor(\n                propertyName,\n                properties[propertyName]\n            );\n\n            const attrName = propertyName\n                .replace(/([a-z])([A-Z])/g, '$1-$2')\n                .toLowerCase();\n\n            attrsMap[attrName] = propertyName;\n            props[propertyName] = propertyDescriptor;\n\n            defineProp(proto, propertyName, propertyDescriptor);\n        }\n\n        constructor.__attrs = attrsMap;\n        constructor.__props = props;\n    }\n\n    return Object.keys(constructor.__attrs);\n}\n\nexport function withProps<T extends Constructor>(Base: T) {\n    return class extends Base {\n        __props: object = Object.create(null);\n        [name: string]: any;\n\n        static get observedAttributes(): string[] {\n            return defineProps(this);\n        }\n\n        attributeChangedCallback(name: string, _: string, newValue: string) {\n            const { __attrs: attributes, __props: properties } = <any>(\n                this.constructor\n            );\n            if (properties && attributes && name in properties) {\n                const propName = attributes[name];\n\n                this[propName] = properties[propName].type(newValue);\n            }\n        }\n    };\n}\n","import { TemplateInterface } from './types';\n\nexport function comment(data: string = ''): Comment {\n    return document.createComment(data);\n}\n\nexport function text(data: string = ''): Text {\n    return document.createTextNode(data);\n}\n\nexport function isNode(obj: any, type?: number): boolean {\n    return (\n        !!obj &&\n        !!(<Node>obj).nodeType &&\n        (!type || (<Node>obj).nodeType === type)\n    );\n}\n\nexport function isPrimitive(val: any) {\n    return val !== Object(val);\n}\n\nexport function replaceRange(newNode: Node, range: any) {\n    const [startNode, endNode] = <any>[].concat(range);\n\n    if (!startNode.parentNode) return;\n\n    if (endNode && startNode.nextSibling !== endNode) {\n        removeNodes(startNode.nextSibling!, endNode);\n    }\n\n    startNode.parentNode!.replaceChild(newNode, startNode);\n}\n\nexport function removeNodes(\n    startNode: Node,\n    endNode: Node | null = null,\n    parent: Node | null = startNode.parentNode!\n): void {\n    if (!parent) return;\n\n    while (startNode !== endNode) {\n        const nextNode = startNode.nextSibling!;\n        parent.removeChild(startNode);\n        startNode = nextNode;\n    }\n}\n\nexport function moveTemplate(\n    template: TemplateInterface,\n    after: Node,\n    parent: Node = after.parentNode!\n): void {\n    const [startNode, endNode] = template.range!;\n    const before = after.nextSibling!;\n\n    let node = startNode;\n    do {\n        const nextNode = node!.nextSibling!;\n        parent.insertBefore(node, before as Node);\n        node = nextNode;\n    } while (node !== endNode);\n    parent.insertBefore(endNode, before as Node);\n}\n\nexport function getNodeIndex(node: Node): number {\n    let index = 0;\n    while ((node = node.previousSibling!)) index++;\n    return index;\n}\n\nexport function getNodePath(node: Node): Array<number> {\n    const path: number[] = [];\n    while (node.parentNode) {\n        path.unshift(getNodeIndex(node));\n        node = node.parentNode;\n    }\n    return path;\n}\n\nexport function getNodeByPath(node: Node, path: Array<number>): Node {\n    for (let i = 0, l = path.length; i < l; i++)\n        node = node.childNodes[path[i]];\n\n    return node;\n}\n\nexport const TemplateSymbol = Symbol();\n\nexport function isSameTemplate(\n    t1: TemplateInterface,\n    t2: TemplateInterface\n): boolean {\n    return isTemplate(t1) && isTemplate(t2) && t1.strings === t2.strings;\n}\n\nexport function isTemplate(obj: any): boolean {\n    return obj && obj[TemplateSymbol];\n}\n\nexport const MARKER_PREFIX = `__${Math.random().toString().slice(2)}_`;\nexport const MARKER_RE = new RegExp(\n    `<!--${MARKER_PREFIX}(\\\\d+)-->|${MARKER_PREFIX}(\\\\d+)`\n);\n\nexport const TEXT_ELEMENT = /^(?:style|textarea)$/i;\n\nexport function markerNumber(value) {\n    const m = MARKER_RE.exec(value);\n    MARKER_RE.lastIndex = 0;\n\n    return m ? Number(m[1] || m[2]) : -1;\n}\n","export interface Expression {\n    update(value: any, force?: boolean): void;\n    clear?(): void;\n}\n\nexport interface TemplateInterface {\n    update(values: any[], force?: boolean): void;\n    create(): Node;\n    delete(): void;\n    range?: [Node, Node];\n    expressions?: Expression[];\n    values: any[];\n    strings?: TemplateStringsArray;\n    context?: string;\n    key?: string;\n    withKey(key: string): TemplateInterface;\n}\n\nexport type LinkSymbol = {\n    type: new (...args: any[]) => void;\n    name?: string;\n    namespaceURI?: string | null;\n    nodePath: Array<number>;\n};\n\nexport type CacheEntry = {\n    expressions: Array<LinkSymbol>;\n    content: DocumentFragment;\n};\n\nexport type TemplateArray = Map<string, TemplateInterface>;\n\nexport type SchedulerJob = {\n    task: Function;\n    args: any[];\n    scheduled?: boolean;\n    firstRun?: boolean;\n};\n\nexport type SchedulerQueue = Array<SchedulerJob>;\n\nexport const enum JobPriority {\n    Low = 0,\n    Normal,\n    High\n}\n","import { SchedulerQueue, SchedulerJob, JobPriority } from './types';\n\nconst jobsQueue: SchedulerQueue = [];\nconst jobsQueueLow: SchedulerQueue = [];\n\nconst JOB_WINDOW = 10;\nconst JOB_MAX_WAIT = 100;\nconst raf = window.requestAnimationFrame;\n\nlet flushPending = false;\nlet queueAge = 0;\nlet enabled = true;\n\nfunction flushQueue(queue, timeout: number): void {\n    let i = 0;\n    const l = queue.length;\n\n    while (Date.now() < timeout && i < l) {\n        const job = queue[i++];\n        job.task!(...job.args);\n\n        job.args = undefined;\n        job.scheduled = false;\n    }\n\n    queue.splice(0, i);\n}\n\nfunction flush() {\n    queueAge++;\n\n    const now = Date.now();\n    const timeSlice = JOB_WINDOW * Math.ceil(queueAge * (1.0 / JOB_MAX_WAIT));\n    const timeout = now + timeSlice;\n\n    flushQueue(jobsQueue, timeout);\n    flushQueue(jobsQueueLow, timeout);\n\n    if (jobsQueue.length > 0) {\n        jobsQueueLow.push(...jobsQueue);\n        jobsQueue.length = 0;\n    }\n\n    if (jobsQueueLow.length > 0) raf(flush);\n    else {\n        flushPending = false;\n        queueAge = 0;\n    }\n}\n\nexport function setEnabled(value: boolean) {\n    enabled = value;\n}\n\nexport function enqueueJob(job: SchedulerJob, priority: JobPriority) {\n    job.scheduled = true;\n\n    if (priority === JobPriority.Normal) jobsQueue.push(job);\n    else if (priority === JobPriority.Low) jobsQueueLow.push(job);\n\n    if (!flushPending) {\n        flushPending = true;\n        raf(flush);\n    }\n}\n\nexport function scheduled(\n    task: Function,\n    priority: JobPriority = JobPriority.Normal\n) {\n    const job: SchedulerJob = {\n        task,\n        args: [],\n        scheduled: false,\n        firstRun: true\n    };\n\n    return (...args) => {\n        if (job.firstRun || !enabled) {\n            job.firstRun = false;\n            task(...args);\n        } else {\n            job.args = args;\n            if (!job.scheduled) enqueueJob(job, priority);\n        }\n    };\n}\n","import { Expression, TemplateInterface, TemplateArray } from './types';\nimport {\n    isNode,\n    replaceRange,\n    isTemplate,\n    isSameTemplate,\n    moveTemplate,\n    text,\n    isPrimitive\n} from './utils';\nimport { scheduled } from './scheduler';\n\nexport class AttributeExpression implements Expression {\n    value?: any;\n\n    constructor(\n        public element: Element,\n        public name: string,\n        public namespaceURI: string | null\n    ) {}\n\n    update(newValue: any): void {\n        if (newValue === this.value) return;\n\n        this.requestUpdate(newValue);\n    }\n\n    requestUpdate = scheduled((newValue: any): void => {\n        const { name, element, namespaceURI } = this;\n\n        if ('ownerSVGElement' in <SVGElement>element) {\n            element.setAttributeNS(namespaceURI, name, newValue);\n        } else if (name in element) {\n            (element as any)[name] = newValue;\n        } else if (typeof newValue !== 'undefined') {\n            element.setAttribute(name, newValue);\n        } else {\n            element.hasAttribute(name) && element.removeAttribute(name);\n        }\n\n        this.value = newValue;\n    });\n}\n\nexport class NodeExpression implements Expression {\n    element: Node | TemplateInterface;\n    placeholder: Node;\n    value?: Node | TemplateInterface | TemplateArray;\n\n    constructor(element: Node) {\n        this.element = this.placeholder = element;\n    }\n\n    updateArray(items: TemplateInterface[]) {\n        this.replaceWith(this.placeholder);\n\n        const templates = this.value instanceof Map ? this.value : new Map();\n\n        let currentNode: Node = <Node>this.element;\n        const keys = new Set();\n        for (let i = 0, l = items.length; i < l; i++) {\n            const item = items[i];\n\n            const key: string = String(item.key || i);\n            let template = templates.get(key)!;\n\n            if (!template) {\n                const node: Node = item.create();\n                currentNode.parentNode!.insertBefore(\n                    node,\n                    currentNode.nextSibling\n                );\n\n                templates.set(key, (template = item));\n            } else if (!isSameTemplate(template, item)) {\n                replaceRange(item.create(), template.range);\n                templates.set(key, (template = item));\n            } else {\n                template.update(item.values);\n            }\n\n            if (currentNode.nextSibling !== template.range[0]) {\n                moveTemplate(template, currentNode);\n            }\n            currentNode = template.range[1];\n\n            keys.add(key);\n        }\n\n        templates.forEach((template, key, map) => {\n            if (!keys.has(key)) {\n                template.delete();\n                map.delete(key);\n            }\n        });\n\n        return templates;\n    }\n\n    replaceWith(newValue: Node | TemplateInterface | TemplateArray) {\n        const { element, value, placeholder } = this;\n\n        if (newValue == null) newValue = placeholder;\n\n        if (element !== newValue) {\n            if (value instanceof Map) {\n                value.forEach((template) => template.delete());\n                value.clear();\n            }\n\n            this.element = <any>newValue;\n\n            replaceRange(\n                isTemplate(newValue)\n                    ? (<TemplateInterface>newValue).create()\n                    : <Node>newValue,\n                isTemplate(element)\n                    ? (<TemplateInterface>element).range!\n                    : <Node>element\n            );\n        }\n    }\n\n    updateText(value: any) {\n        if (!isNode(this.element, Node.TEXT_NODE)) {\n            this.replaceWith(text());\n        }\n        (<Text>this.element).textContent = value;\n    }\n\n    updateTemplate(values: any[]) {\n        (<TemplateInterface>this.element).update(values);\n    }\n\n    update(newValue: any): void {\n        if (newValue === this.value) return;\n\n        this.requestUpdate(newValue);\n    }\n\n    requestUpdate = scheduled((newValue: any): void => {\n        if (isPrimitive(newValue)) {\n            this.updateText(newValue);\n        } else if (Array.isArray(newValue)) {\n            newValue = this.updateArray(newValue);\n        } else if (isSameTemplate(newValue, <TemplateInterface>this.element)) {\n            this.updateTemplate(newValue.values);\n        } else {\n            this.replaceWith(newValue);\n        }\n\n        this.value = newValue;\n    });\n}\n","import { LinkSymbol, Expression } from './types';\nimport { AttributeExpression, NodeExpression } from './expressions';\nimport {\n    getNodePath,\n    getNodeByPath,\n    text,\n    TEXT_ELEMENT,\n    MARKER_RE,\n    markerNumber,\n    isNode\n} from './utils';\n\nfunction treeWalkerFilter() {\n    return NodeFilter.FILTER_ACCEPT;\n}\n// fix(IE11): expect filter to be a function and not an object\n(<any>treeWalkerFilter).acceptNode = treeWalkerFilter;\n\nexport function linkAttributes(\n    element: Element,\n    linkedExpressions: LinkSymbol[]\n): void {\n    const attrs = element.attributes;\n    let i = attrs.length;\n\n    while (i--) {\n        const { name, value, namespaceURI } = attrs.item(i) as Attr;\n        const m = markerNumber(value);\n\n        if (~m) {\n            element.removeAttribute(name);\n            linkedExpressions[m] = {\n                type: AttributeExpression,\n                name,\n                namespaceURI,\n                nodePath: getNodePath(element)\n            };\n        }\n    }\n}\n\nexport function linkComment(node: Comment, linkedExpressions: LinkSymbol[]) {\n    const m = markerNumber(node.data);\n\n    if (~m) {\n        linkedExpressions[m] = {\n            type: NodeExpression,\n            nodePath: getNodePath(node)\n        };\n        node.nodeValue = '';\n    }\n}\n\nexport function linkTexts(\n    node: CharacterData,\n    linkedExpressions: LinkSymbol[]\n): void {\n    let m: RegExpExecArray | null;\n    while ((m = MARKER_RE.exec(node.data)) !== null) {\n        const keyNode: Text = text();\n        node = (<Text>node).splitText(m.index);\n        node.deleteData(0, m[0].length);\n\n        node.parentNode!.insertBefore(keyNode, node);\n\n        linkedExpressions[Number(m[1] || m[2])] = {\n            type: NodeExpression,\n            nodePath: getNodePath(keyNode)\n        };\n    }\n}\n\nexport function linkExpressions(root: DocumentFragment) {\n    const treeWalker = document.createTreeWalker(\n        root,\n        NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT,\n        treeWalkerFilter as any,\n        false\n    );\n\n    const linkedExpressions: Array<LinkSymbol> = [];\n\n    while (treeWalker.nextNode()) {\n        const node: any = treeWalker.currentNode;\n\n        if (isNode(node, Node.ELEMENT_NODE)) {\n            linkAttributes(node, linkedExpressions);\n            if (TEXT_ELEMENT.test(node.tagName)) {\n                for (const childNode of node.childNodes) {\n                    linkTexts(childNode, linkedExpressions);\n                }\n            }\n        } else linkComment(node, linkedExpressions);\n    }\n\n    return linkedExpressions;\n}\n\nexport function resolve(fragment: Node, symbols: LinkSymbol[]): Expression[] {\n    return symbols.map(\n        (symbol) =>\n            new symbol.type(\n                getNodeByPath(fragment, symbol.nodePath),\n                symbol.name,\n                symbol.namespaceURI\n            )\n    ) as any;\n}\n","import { Expression, CacheEntry } from './types';\nimport { linkExpressions, resolve } from './linker';\nimport { MARKER_PREFIX } from './utils';\n// import { TEXT_ELEMENT } from './utils';\n\nconst TemplateCache: WeakMap<TemplateStringsArray, CacheEntry> = new WeakMap();\n\nfunction createCacheEntry(html: string, context?: string): CacheEntry {\n    const template = document.createElement('template');\n    template.innerHTML = context ? `<${context}>${html}</${context}>` : html;\n\n    let content = template.content;\n    if (context) {\n        const range = document.createRange();\n        range.selectNodeContents(content.firstChild!);\n        content = range.extractContents();\n    }\n\n    return {\n        content,\n        expressions: linkExpressions(content)\n    };\n}\n\nfunction toHTML(strings: TemplateStringsArray) {\n    /**\n     * Use this regex to choose the right marker\n     * 1. ...<tag...\n     * 2. ...<tag...>\n     * 3. ...>...\n     * 4. ......\n     */\n    const tagName = `[0-9a-z-]+`,\n        attributeName = `[^<\\\\s\\\\0\"'>\\\\/=]+`,\n        attributeValue = `(?:\"[^\"]*\"?|'[^']*'?|[^\\\\s'\">]*)`,\n        attribute = `\\\\s*${attributeName}(?:\\\\s*=\\\\s*${attributeValue})?`,\n        tagOpen = `<(${tagName})(?:${attribute})*\\\\s*(>?)`;\n    const NODE_RE = new RegExp(`^[^]*${tagOpen}|[^]*(>)[^]*|[^]*$`, 'i');\n    const enum MatchType {\n        TagName = 1,\n        ClosedTag = 2,\n        EndTag = 3\n    }\n\n    let isAttribute = false;\n\n    let html = strings[0];\n    for (let i = 0, l = strings.length; i < l - 1; i++) {\n        const marker = `${MARKER_PREFIX}${i}`;\n        const match = strings[i].match(NODE_RE)!;\n\n        if (match[MatchType.TagName]) {\n            isAttribute = !match[MatchType.ClosedTag];\n        } else if (match[MatchType.EndTag]) {\n            isAttribute = false;\n        }\n\n        html += (isAttribute ? marker : `<!--${marker}-->`) + strings[i + 1];\n    }\n\n    return html;\n}\n\nexport function parseTemplate(\n    strings: TemplateStringsArray,\n    context?: string\n): { fragment: DocumentFragment; expressions: Expression[] } {\n    /**\n     * https://tc39.github.io/ecma262/#sec-gettemplateobject\n     * [...]The template objects are frozen and the same template object is\n     * used each time a specific tagged Template is evaluated[...]\n     */\n    let cacheEntry: CacheEntry = TemplateCache.get(strings)!;\n\n    if (!cacheEntry) {\n        TemplateCache.set(\n            strings,\n            (cacheEntry = createCacheEntry(toHTML(strings), context))\n        );\n    }\n\n    const fragment = document.importNode(cacheEntry.content, true);\n    const expressions = resolve(fragment, cacheEntry.expressions);\n\n    return {\n        fragment,\n        expressions\n    };\n}\n","import { TemplateInterface, Expression } from './types';\nimport { parseTemplate } from './parser';\nimport { TemplateSymbol, removeNodes, text } from './utils';\n\nexport class Template implements TemplateInterface {\n    [TemplateSymbol] = true;\n    values: any[];\n    strings: TemplateStringsArray;\n    range?: [Node, Node];\n    expressions?: Expression[];\n    context?: string;\n    key?: any;\n\n    constructor(\n        strings: TemplateStringsArray,\n        values: any[],\n        context?: string\n    ) {\n        this.values = values;\n        this.strings = strings;\n        this.context = context;\n    }\n\n    withKey(key: any) {\n        this.key = key;\n        return this;\n    }\n\n    update(values: any[]) {\n        for (let i = 0; i < values.length; i++) {\n            if (this.expressions![i])\n                this.expressions![i].update(values[i]);\n        }\n    }\n\n    delete() {\n        removeNodes(this.range![0], this.range![1].nextSibling);\n        this.range = undefined;\n        this.expressions = undefined;\n    }\n\n    create(): DocumentFragment {\n        const { fragment, expressions } = parseTemplate(\n            this.strings,\n            this.context\n        );\n        this.expressions = expressions;\n        this.range = [\n            fragment.insertBefore(text(), fragment.firstChild),\n            fragment.appendChild(text())\n        ];\n\n        this.update(this.values);\n\n        return fragment;\n    }\n}\n","export { Template } from './template';\nexport { scheduled } from './scheduler';\n\nimport { TemplateInterface } from './types';\nimport { Template } from './template';\nimport { removeNodes } from './utils';\n\nexport function render(template: TemplateInterface, container: HTMLElement) {\n    if (!render.instances.has(container)) {\n        render.instances.set(container, template);\n        removeNodes(container.firstChild!, null, container);\n\n        container.appendChild(template.create());\n    } else {\n        render.instances.get(container)!.update(template.values);\n    }\n}\nrender.instances = new WeakMap<HTMLElement, TemplateInterface>();\n\nexport function html(strings: any, ...values: any[]): Template {\n    return new Template(strings, values);\n}\n\nexport function svg(strings: any, ...values: any[]): Template {\n    return new Template(strings, values, 'svg');\n}\n","import { render, Template, scheduled } from '@tiny-lit/core';\nimport {\n    Constructor,\n    Element as ElementInterface,\n} from './types';\n\nexport function withElement<T extends Constructor<HTMLElement>>(Base: T) {\n    return class extends Base implements ElementInterface {\n        state: any = {};\n        rendered: boolean = false;\n        renderCallbacks: Array<Function> = [];\n        renderRoot: HTMLElement | ShadowRoot = this;\n\n        attachShadow(shadowRootInitDict: ShadowRootInit) {\n            return (this.renderRoot = super.attachShadow.call(\n                this,\n                shadowRootInitDict\n            ));\n        }\n\n        connectedCallback() {\n            this.update();\n        }\n\n        setState(nextState: object | Function, callback?: Function): void {\n            const state: any = this.state;\n\n            this.state = {\n                ...state,\n                ...(typeof nextState === 'function'\n                    ? nextState(state, this)\n                    : nextState)\n            };\n\n            callback && this.renderCallbacks.push(callback);\n\n            this.update();\n        }\n\n        render(): Template | null {\n            return null;\n        }\n\n        firstUpdated(){}\n\n        beforeUpdate(){}\n\n        updated() {}\n\n        _onUpdated = scheduled(() => {\n            while (this.renderCallbacks.length) this.renderCallbacks.shift()!();\n\n            this.rendered ? this.updated() : this.firstUpdated();\n            this.rendered = true;\n        })\n\n        update() {\n            this.beforeUpdate();\n\n            const template = this.render();\n            template && render(template, this.renderRoot as any);\n\n            this._onUpdated();\n        };\n    };\n}\n","import { withProps } from './withProps';\nimport { withElement } from './withElement';\n\nexport const Element = withProps(withElement(HTMLElement));\n","export { Element } from './Element';\nexport { withProps } from './withProps';\nexport { withElement } from './withElement';\n\nexport * from '@tiny-lit/core';","import { html } from '@tiny-lit/core';\n\nexport default html`\n<style>\n    button {\n        margin: 0;\n        padding: 0;\n        border: 0;\n        background: none;\n        font-size: 100%;\n        vertical-align: baseline;\n        font-family: inherit;\n        font-weight: inherit;\n        color: inherit;\n        -webkit-appearance: none;\n        appearance: none;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n\n    .todoapp {\n        font: 14px 'Helvetica Neue', Helvetica, Arial, sans-serif;\n        line-height: 1.4em;\n        background: #f5f5f5;\n        color: #4d4d4d;\n        min-width: 230px;\n        max-width: 550px;\n        margin: 0 auto;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        font-weight: 300;\n    }\n\n    :focus {\n        outline: 0;\n    }\n\n    .hidden {\n        display: none;\n    }\n\n    .todoapp {\n        background: #fff;\n        margin: 130px auto;\n        position: relative;\n        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2),\n                    0 25px 50px 0 rgba(0, 0, 0, 0.1);\n    }\n\n    .todoapp input::-webkit-input-placeholder {\n        font-style: italic;\n        font-weight: 300;\n        color: #e6e6e6;\n    }\n\n    .todoapp input::-moz-placeholder {\n        font-style: italic;\n        font-weight: 300;\n        color: #e6e6e6;\n    }\n\n    .todoapp input::input-placeholder {\n        font-style: italic;\n        font-weight: 300;\n        color: #e6e6e6;\n    }\n\n    .todoapp h1 {\n        position: absolute;\n        top: -155px;\n        width: 100%;\n        font-size: 100px;\n        font-weight: 100;\n        text-align: center;\n        color: rgb(var(--primary));\n        -webkit-text-rendering: optimizeLegibility;\n        -moz-text-rendering: optimizeLegibility;\n        text-rendering: optimizeLegibility;\n    }\n\n    .new-todo,\n    .edit {\n        position: relative;\n        margin: 0;\n        width: 100%;\n        font-size: 24px;\n        font-family: inherit;\n        font-weight: inherit;\n        line-height: 1.4em;\n        border: 0;\n        color: inherit;\n        padding: 6px;\n        border: 1px solid #999;\n        box-shadow: inset 0 -1px 5px 0 rgba(0, 0, 0, 0.2);\n        box-sizing: border-box;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n\n    .new-todo {\n        padding: 16px 16px 16px 60px;\n        border: none;\n        background: rgba(0, 0, 0, 0.003);\n        box-shadow: inset 0 -2px 1px rgba(0,0,0,0.03);\n    }\n\n    .main {\n        position: relative;\n        z-index: 2;\n        border-top: 1px solid #e6e6e6;\n    }\n\n    .toggle-all {\n        text-align: center;\n        border: none; /* Mobile Safari */\n        opacity: 0;\n        position: absolute;\n    }\n\n    .toggle-all + label {\n        width: 60px;\n        height: 34px;\n        font-size: 0;\n        position: absolute;\n        top: -52px;\n        left: -13px;\n        -webkit-transform: rotate(90deg);\n        transform: rotate(90deg);\n    }\n\n    .toggle-all + label:before {\n        content: '';\n        font-size: 22px;\n        color: #e6e6e6;\n        padding: 10px 27px 10px 27px;\n    }\n\n    .toggle-all:checked + label:before {\n        color: #737373;\n    }\n\n    .todo-list {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n    }\n\n    .todo-list li {\n        position: relative;\n        font-size: 24px;\n        border-bottom: 1px solid #ededed;\n    }\n\n    .todo-list li:last-child {\n        border-bottom: none;\n    }\n\n    .todo-list li.editing {\n        border-bottom: none;\n        padding: 0;\n    }\n\n    .todo-list li.editing .edit {\n        display: block;\n        width: 506px;\n        padding: 12px 16px;\n        margin: 0 0 0 43px;\n    }\n\n    .todo-list li.editing .view {\n        display: none;\n    }\n\n    .todo-list li .toggle {\n        text-align: center;\n        width: 40px;\n        /* auto, since non-WebKit browsers doesn't support input styling */\n        height: auto;\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        margin: auto 0;\n        border: none; /* Mobile Safari */\n        -webkit-appearance: none;\n        appearance: none;\n    }\n\n    .todo-list li .toggle {\n        opacity: 0;\n    }\n\n    .todo-list li .toggle + label {\n        /*\n            Firefox requires '#' to be escaped - https://bugzilla.mozilla.org/show_bug.cgi?id=922433\n            IE and Edge requires *everything* to be escaped to render, so we do that instead of just the '#' - https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/7157459/\n        */\n        background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23ededed%22%20stroke-width%3D%223%22/%3E%3C/svg%3E');\n        background-repeat: no-repeat;\n        background-position: center left;\n    }\n\n    .todo-list li .toggle:checked + label {\n        background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23bddad5%22%20stroke-width%3D%223%22/%3E%3Cpath%20fill%3D%22%235dc2af%22%20d%3D%22M72%2025L42%2071%2027%2056l-4%204%2020%2020%2034-52z%22/%3E%3C/svg%3E');\n    }\n\n    .todo-list li label {\n        word-break: break-all;\n        padding: 15px 15px 15px 60px;\n        display: block;\n        line-height: 1.2;\n        transition: color 0.4s;\n    }\n\n    .todo-list li.completed label {\n        color: #d9d9d9;\n        text-decoration: line-through;\n    }\n\n    .todo-list li .destroy {\n        display: none;\n        position: absolute;\n        top: 0;\n        right: 10px;\n        bottom: 0;\n        width: 40px;\n        height: 40px;\n        margin: auto 0;\n        font-size: 30px;\n        color: #cc9a9a;\n        margin-bottom: 11px;\n        transition: color 0.2s ease-out;\n    }\n\n    .todo-list li .destroy:hover {\n        color: #af5b5e;\n    }\n\n    .todo-list li .destroy:after {\n        content: '';\n    }\n\n    .todo-list li:hover .destroy {\n        display: block;\n    }\n\n    .todo-list li .edit {\n        display: none;\n    }\n\n    .todo-list li.editing:last-child {\n        margin-bottom: -1px;\n    }\n\n    .footer {\n        color: #777;\n        padding: 10px 15px;\n        height: 20px;\n        text-align: center;\n        border-top: 1px solid #e6e6e6;\n    }\n\n    .footer:before {\n        content: '';\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        height: 50px;\n        overflow: hidden;\n        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2),\n                    0 8px 0 -3px #f6f6f6,\n                    0 9px 1px -3px rgba(0, 0, 0, 0.2),\n                    0 16px 0 -6px #f6f6f6,\n                    0 17px 2px -6px rgba(0, 0, 0, 0.2);\n    }\n\n    .todo-count {\n        float: left;\n        text-align: left;\n    }\n\n    .todo-count strong {\n        font-weight: 300;\n    }\n\n    .filters {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n        position: absolute;\n        right: 0;\n        left: 0;\n    }\n\n    .filters li {\n        display: inline;\n    }\n\n    .filters li a {\n        color: inherit;\n        margin: 3px;\n        padding: 3px 7px;\n        text-decoration: none;\n        border: 1px solid transparent;\n        border-radius: 3px;\n    }\n\n    .filters li a:hover {\n        border-color: rgba(175, 47, 47, 0.1);\n    }\n\n    .filters li a.selected {\n        border-color: rgba(175, 47, 47, 0.2);\n    }\n\n    .clear-completed,\n    html .clear-completed:active {\n        float: right;\n        position: relative;\n        line-height: 20px;\n        text-decoration: none;\n        cursor: pointer;\n    }\n\n    .clear-completed:hover {\n        text-decoration: underline;\n    }\n\n    .shuffle {\n        margin-right: 5px;\n    }\n\n    .info {\n        margin: 65px auto 0;\n        color: #bfbfbf;\n        font-size: 10px;\n        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);\n        text-align: center;\n    }\n\n    .info p {\n        line-height: 1;\n    }\n\n    .info a {\n        color: inherit;\n        text-decoration: none;\n        font-weight: 400;\n    }\n\n    .info a:hover {\n        text-decoration: underline;\n    }\n\n    /*\n        Hack to remove background from Mobile Safari.\n        Can't use it globally since it destroys checkboxes in Firefox\n    */\n    @media screen and (-webkit-min-device-pixel-ratio:0) {\n        .toggle-all,\n        .todo-list li .toggle {\n            background: none;\n        }\n\n        .todo-list li .toggle {\n            height: 40px;\n        }\n    }\n\n    @media (max-width: 430px) {\n        .footer {\n            height: 50px;\n        }\n\n        .filters {\n            bottom: 10px;\n        }\n    }\n</style>\n`;\n","const defer = window.requestIdleCallback || window.requestAnimationFrame;\nconst isExpired = (entry, expire = 0) => !!expire && entry.timestamp + expire < Date.now();\nconst isSameVersion = (entry, version) => entry.version === version;\nconst setItem = (key, data, { version, storage }) => {\n    const entry = {\n        timestamp: Date.now(),\n        data,\n        version,\n    };\n    defer(() => storage.setItem(key, JSON.stringify(entry)));\n    return entry;\n};\nconst getItem = (key, options, cached) => {\n    const { storage, version, expire } = options;\n    const entry = !cached ? JSON.parse(storage.getItem(key)) : cached;\n    if (!entry || isExpired(entry, expire) || !isSameVersion(entry, version)) {\n        removeItem(key, options);\n        return null;\n    }\n    return entry;\n};\nconst removeItem = (key, { storage }) => {\n    defer(() => storage.removeItem(key));\n};\nexport function getBucket(name, options) {\n    options = Object.assign({ storage: localStorage }, options);\n    let cached = null;\n    return [\n        () => {\n            cached = getItem(name, options, cached);\n            return cached ? cached.data : options.defaultValue;\n        },\n        (value) => {\n            cached = setItem(name, value, options);\n        },\n        () => {\n            removeItem(name, options);\n            cached = null;\n        },\n    ];\n}\n","import { html } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\nimport style from './style.js';\nimport { getBucket } from 'secchiojs';\n\nfunction prevented(f) {\n    return (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        f(e);\n    };\n}\n\nconst [getTodos, setTodos] = getBucket('todoMvc', {\n    version: 1,\n    defaultValue: {\n        todos: [],\n        filter: null\n    }\n});\n\nfunction shuffle(array) {\n    let counter = array.length;\n\n    // While there are elements in the array\n    while (counter > 0) {\n        // Pick a random index\n        let index = Math.floor(Math.random() * counter);\n\n        // Decrease counter by 1\n        counter--;\n\n        // And swap the last element with it\n        let temp = array[counter];\n        array[counter] = array[index];\n        array[index] = temp;\n    }\n\n    return array;\n}\n\nclass TodoMVC extends Element {\n    constructor() {\n        super();\n        this.state = getTodos();\n        this.attachShadow({ mode: 'open' });\n    }\n\n    static get is() {\n        return 'todo-mvc';\n    }\n\n    setState(nextState) {\n        super.setState(nextState);\n        setTodos(this.state);\n    }\n\n    setFilter(completed) {\n        this.setState({ filter: completed });\n    }\n\n    handleAddTodo(e) {\n        this.setState({\n            todos: [\n                ...this.state.todos,\n                {\n                    text: e.target.elements[0].value,\n                    completed: false,\n                    id: Math.random().toString().substr(2)\n                }\n            ]\n        });\n        e.target.reset();\n    }\n\n    handleDeleteTodo(remove) {\n        this.setState({\n            todos: [...this.state.todos.filter((todo) => todo !== remove)]\n        });\n    }\n\n    switchCompleted(index) {\n        return prevented(() => {\n            const todos = this.state.todos;\n\n            todos[index].completed = !todos[index].completed;\n            this.setState({\n                todos: [...todos]\n            });\n        });\n    }\n\n    handleClearCompleted() {\n        this.setState({\n            todos: [...this.state.todos.filter((todo) => !todo.completed)]\n        });\n    }\n\n    connectedCallback() {\n        console.time('render');\n        this.update();\n    }\n\n    firstUpdated() {\n        console.timeEnd('render');\n    }\n\n    render() {\n        const { filter, todos } = this.state;\n\n        return html`\n            ${style}\n            <section class=\"todoapp body\">\n                <header class=\"header\">\n                    <h1>todos</h1>\n                    <form onSubmit=${prevented((e) => this.handleAddTodo(e))}>\n                        <input\n                            class=\"new-todo\"\n                            placeholder=\"What needs to be done?\"\n                            autofocus\n                        />\n                    </form>\n                </header>\n                <!-- This section should be hidden by default and shown when there are todos -->\n                <section class=\"main\">\n                    <input id=\"toggle-all\" class=\"toggle-all\" type=\"checkbox\" />\n                    <label for=\"toggle-all\">Mark all as complete</label>\n                    <ul class=\"todo-list\">\n                        <!-- These are here just to show the structure of the list items -->\n                        <!-- List items should get the class \\`editing\\` when editing and \\`completed\\` when marked as completed -->\n                        ${todos\n                            .map((todo, index) => ((todo.index = index), todo))\n                            .filter(\n                                (todo) =>\n                                    filter === null || todo.completed === filter\n                            )\n                            .map((todo) =>\n                                html`\n                                    <li\n                                        class=${todo.completed\n                                            ? 'completed'\n                                            : ''}\n                                    >\n                                        <div class=\"view\">\n                                            <input\n                                                class=\"toggle\"\n                                                type=\"checkbox\"\n                                                checked=${todo.completed}\n                                                onClick=${this.switchCompleted(\n                                                    todo.index\n                                                )}\n                                            />\n                                            <label\n                                                onClick=${this.switchCompleted(\n                                                    todo.index\n                                                )}\n                                                >${todo.text}</label\n                                            >\n                                            <button\n                                                class=\"destroy\"\n                                                onClick=${prevented(() =>\n                                                    this.handleDeleteTodo(todo)\n                                                )}\n                                            ></button>\n                                        </div>\n                                        <input\n                                            class=\"edit\"\n                                            value=${todo.text}\n                                        />\n                                    </li>\n                                `.withKey(todo.id)\n                            )}\n                    </ul>\n                </section>\n                <!-- This footer should hidden by default and shown when there are todos -->\n                <footer class=\"footer\">\n                    <!-- This should be \\`0 items left\\` by default -->\n                    <span class=\"todo-count\">\n                        <strong\n                            >${todos.filter((todo) => !todo.completed).length}\n                        </strong>\n                        item left\n                    </span>\n\n                    <ul class=\"filters\">\n                        <li>\n                            <a\n                                class=${filter === null && 'selected'}\n                                href=\"#/\"\n                                onClick=${prevented(() => this.setFilter(null))}\n                            >\n                                All\n                            </a>\n                        </li>\n                        <li>\n                            <a\n                                class=${filter === false && 'selected'}\n                                href=\"#/active\"\n                                onClick=${prevented(() =>\n                                    this.setFilter(false)\n                                )}\n                            >\n                                Active\n                            </a>\n                        </li>\n                        <li>\n                            <a\n                                class=${filter && 'selected'}\n                                href=\"#/completed\"\n                                onClick=${prevented(() => this.setFilter(true))}\n                            >\n                                Completed\n                            </a>\n                        </li>\n                    </ul>\n                    <!-- Hidden if no completed items are left  -->\n                    <button\n                        class=\"clear-completed\"\n                        onClick=${prevented(() => this.handleClearCompleted())}\n                    >\n                        Clear completed\n                    </button>\n                    <button\n                        class=\"clear-completed shuffle\"\n                        onClick=${prevented(() =>\n                            this.setState({ todos: shuffle(this.state.todos) })\n                        )}\n                    >\n                        Shuffle\n                    </button>\n                </footer>\n            </section>\n            <footer class=\"info\">\n                <p>Double-click to edit a todo</p>\n                <!-- Change this out with your name and url  -->\n                <p>Created by <a href=\"http://todomvc.com\">you</a></p>\n                <p>Part of <a href=\"http://todomvc.com\">TodoMVC</a></p>\n            </footer>\n        `;\n    }\n}\n\ncustomElements.define(TodoMVC.is, TodoMVC);\n","import { html, Element } from '@tiny-lit/element';\n\nclass SierpinskiDot extends Element {\n    static get is() {\n        return 'sierpinski-dot';\n    }\n\n    static get properties() {\n        return {\n            x: Number,\n            y: Number,\n            size: Number,\n            text: String,\n            hover: Boolean\n        };\n    }\n\n    x = 0;\n    y = 0;\n    size = 0;\n    text = '';\n    hover = false;\n\n    constructor() {\n        super();\n\n        // this.addEventListener('mouseover', () => this.setState({ hover: true }));\n        // this.addEventListener('mouseleave', () => this.setState({ hover: false }));\n        this.addEventListener('mouseover', () => (this.hover = true));\n        this.addEventListener('mouseleave', () => (this.hover = false));\n\n        this.attachShadow({ mode: 'closed' });\n    }\n\n    get style() {\n        const { x, y, size } = this;\n        const s = size * 1.3;\n\n        return `\n            span {\n                position: absolute;\n                font: normal 15px sans-serif;\n                text-align: center;\n                cursor: pointer;\n                color: black;\n                width: ${s}px;\n                height: ${s}px;\n                transform: translate(${x}px, ${y}px);\n                border-radius: ${s / 2}px;\n                line-height: ${s}px;\n            }\n        `;\n    }\n\n    render() {\n        const { hover, text } = this;\n\n        return html`\n            <style>\n                ${this.style}\n            </style>\n\n            <span style=${`background: ${hover ? '#ff0' : '#61dafb'}`}>\n                ${hover ? '**' + text + '**' : text}\n            </span>\n        `;\n    }\n}\n\ncustomElements.define(SierpinskiDot.is, SierpinskiDot);\n","import { html } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\n\nconst targetSize = 25;\n\nclass SierpinskiTriangle extends Element {\n    static get is() {\n        return 'sierpinski-triangle';\n    }\n\n    static get properties() {\n        return {\n            x: Number,\n            y: Number,\n            s: Number,\n            seconds: Number\n        };\n    }\n\n    x = 0;\n    y = 0;\n    s = 0;\n    seconds = 0;\n\n    constructor() {\n        super();\n\n        this.attachShadow({ mode: 'open' });\n    }\n\n    renderTemplate() {\n        let { s, seconds, x, y } = this;\n\n        if (s <= targetSize) {\n            return html`\n                <sierpinski-dot\n                    x=${x - targetSize / 2}\n                    y=${y - targetSize / 2}\n                    size=${targetSize}\n                    text=${seconds}\n                />\n            `;\n        }\n\n        s = s / 2;\n\n        let slowDown = true;\n        if (slowDown) {\n            let e = performance.now() + 0.8;\n            while (performance.now() < e) {\n                // Artificially long execution time.\n            }\n        }\n\n        return html`\n            <sierpinski-triangle\n                x=${x}\n                y=${y - s / 2}\n                s=${s}\n                seconds=${seconds}\n            ></sierpinski-triangle>\n            <sierpinski-triangle\n                x=${x - s}\n                y=${y + s / 2}\n                s=${s}\n                seconds=${seconds}\n            ></sierpinski-triangle>\n            <sierpinski-triangle\n                x=${x + s}\n                y=${y + s / 2}\n                s=${s}\n                seconds=${seconds}\n            ></sierpinski-triangle>\n        `;\n    }\n\n    render() {\n        return html`${this.renderTemplate()}`\n    }\n}\n\ncustomElements.define(SierpinskiTriangle.is, SierpinskiTriangle);\n","import { html } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\nimport './Dot';\nimport './Triangle';\n\nfunction rafInterval(fn) {\n    let running = true;\n\n    function run() {\n        fn();\n        running && requestAnimationFrame(run);\n    }\n\n    requestAnimationFrame(run);\n\n    return () => (running = false);\n}\n\nclass SchedulerDemo extends Element {\n    static get is() {\n        return 'scheduler-demo';\n    }\n\n    constructor() {\n        super();\n\n        this.attachShadow({ mode: 'open' });\n    }\n\n    static get properties() {\n        return {\n            elapsed: Number\n        };\n    }\n\n    connectedCallback() {\n        const rendered = this.rendered;\n\n        console.time('render');\n\n        this.start = Date.now();\n        this.timerInterval = setInterval(this.tick.bind(this), 1000);\n        this.renderInterval = rafInterval(() => {\n            this.elapsed = Date.now() - this.start;\n        });\n        this.setState({\n            seconds: 0\n        });\n    }\n\n    disconnectedCallback() {\n        this.renderInterval();\n        clearInterval(this.timerInterval);\n    }\n\n    tick() {\n        this.setState({\n            seconds: (this.state.seconds % 10) + 1\n        });\n    }\n\n    getTransform() {\n        const elapsed = this.elapsed;\n        const t = (elapsed / 1000) % 10;\n        const scale = 1 + (t > 5 ? 10 - t : t) / 10;\n\n        return `\n            transform: scale(${scale / 2.1}, 0.7) translateX(50%) translateZ(0);\n        `;\n    }\n\n    firstUpdated() {\n        console.timeEnd('render');\n    }\n\n    render() {\n        const { seconds } = this.state;\n\n        return html`\n            <style>\n                :host {\n                    color: black;\n                }\n\n                .container {\n                    position: absolute;\n                    transform-origin: 0 0;\n                    width: 10px;\n                    height: 10px;\n                    left: 50%;\n                    top: 50%;\n                    will-change: transform;\n                }\n            </style>\n            <div class=\"container\" style=${this.getTransform()}>\n                <sierpinski-triangle\n                    x=${0}\n                    y=${0}\n                    s=${1000}\n                    seconds=${seconds}\n                />\n            </div>\n        `;\n    }\n}\n\ncustomElements.define(SchedulerDemo.is, SchedulerDemo);\n","export interface CustomElement {\n    connectedCallback?(): void;\n    disconnectedCallback?(): void;\n    adoptedCallback?(): void;\n    attributeChangedCallback?(\n        name: string,\n        oldValue: string,\n        newValue: string\n    ): void;\n    observedAttributes?: Array<string>;\n}\nexport type Constructor<T = {}> = new (...args: any[]) => T;\nexport interface StoreEvent {\n    type: string;\n    data: any;\n}\n\nexport type Action = StoreEvent;\nexport type Mutation = StoreEvent;\n\nexport type SubcribeCallback = (state: any, mutation?: Mutation) => void;\n\nexport interface UpdateEvent extends CustomEvent {\n    detail: {\n        mutation?: Mutation;\n        state: any;\n    };\n}\n\nexport interface DispatchEvent extends CustomEvent {\n    detail: Action;\n}\n\nexport interface StoreProviderInterface extends HTMLElement{\n    getStore(): StoreInterface;\n    config: StoreConfig;\n}\nexport interface StoreConnectedElement {\n    unsubscribe?: Function;\n    onStateChange?(state: any, mutation?: Mutation);\n    onStoreConnect?(unsubscribe: Function);\n}\n\nexport interface StoreInterface {\n    state: any;\n    mutations: Map<string, MutationHandler>;\n    actions: Map<string, ActionHandler>;\n    dispatch(action: string | Action, payload?: any);\n    subscribe(callback: Function);\n    commit(mutation: string);\n}\n\nexport type MutationHandler = (state?: any, data?: any) => object;\nexport type ActionHandler = (store: StoreInterface, payload: any) => void;\nexport type PluginHandler = (store: StoreInterface) => void;\n\nexport type StoreConfig = {\n    actions?: { [name: string]: ActionHandler };\n    mutations?: { [name: string]: MutationHandler };\n    initialState?: any;\n    plugins?: Array<PluginHandler>;\n};\n\nexport enum StoreEvents {\n    Request = 'store::request',\n    Dispatch = 'store::dispatch',\n    Update = 'store::update',\n}\n\nexport type RequestStoreEvent = CustomEvent<{ store?: StoreProviderInterface }>;","import {\n    StoreEvents,\n    StoreEvent,\n    Mutation,\n    UpdateEvent,\n    DispatchEvent,\n    RequestStoreEvent,\n    StoreProviderInterface,\n} from './types';\n\nexport function normalizeEvent(fn) {\n    return (event: string | StoreEvent, data?: any) => {\n        if (typeof event === 'string') event = { type: event, data };\n\n        return fn(event);\n    };\n}\n\nexport function requestStore(el: HTMLElement): StoreProviderInterface | undefined {\n    const event = new CustomEvent(StoreEvents.Request, { detail: {} }) as RequestStoreEvent;\n    el.dispatchEvent(event);\n\n    return event.detail.store;\n}\n\nexport function createUpdateEvent(\n    state: any,\n    mutation?: Mutation\n): UpdateEvent {\n    return new CustomEvent(StoreEvents.Update, {\n        detail: {\n            state,\n            mutation,\n        },\n    });\n}\n\nexport function createDispatchEvent(type: string, data?: any): DispatchEvent {\n    return new CustomEvent(StoreEvents.Dispatch, {\n        detail: {\n            type,\n            data,\n        },\n    });\n}\n","import {\n    Action,\n    StoreConfig,\n    StoreInterface,\n    Mutation,\n    SubcribeCallback,\n    MutationHandler,\n    ActionHandler\n} from './types';\n\nimport { normalizeEvent } from './events';\n\nconst StateProp = Symbol();\n\nconst objToMap = (obj: any, map: Map<any, any>) => {\n    for (const key in obj) map.set(key, obj[key]);\n};\n\nexport class Store<S> implements StoreInterface {\n    [StateProp]: S = {} as S;\n    readonly mutations: Map<string, MutationHandler> = new Map();\n    readonly actions: Map<string, ActionHandler> = new Map();\n    private listeners: Set<Function> = new Set();\n\n    constructor(config: StoreConfig = {}) {\n        objToMap(config.mutations, this.mutations);\n        objToMap(config.actions, this.actions);\n\n        this[StateProp] = { ...config.initialState };\n\n        if (config.plugins)\n            config.plugins!.forEach(plugin => plugin(this));\n    }\n\n    dispatch = normalizeEvent((action: Action) => {\n        const actions = this.actions;\n        if (actions.has(action.type)) actions.get(action.type)!(this, action.data);\n    });\n\n    get state(): S {\n        return this[StateProp];\n    }\n\n    subscribe(callback: SubcribeCallback) {\n        const { listeners } = this;\n\n        const handler = (mutation?: Mutation) => callback(this.state, mutation);\n\n        listeners.add(handler);\n        callback(this.state);\n\n        return () => listeners.delete(handler);\n    }\n\n    commit = normalizeEvent((mutation: Mutation) => {\n        const mutations = this.mutations;\n        if (mutations.has(mutation.type)) {\n            this[StateProp] = <any>mutations.get(mutation.type)!(this.state, mutation.data);\n        }\n\n        this.listeners.forEach(listener => listener(mutation));\n    });\n}\n\nexport const createStore = (store: StoreConfig) => {\n    return new Store(store);\n};\n","import {\n    Constructor,\n    CustomElement,\n    StoreConnectedElement,\n    StoreEvents,\n    UpdateEvent,\n    Mutation\n} from './types';\nimport { requestStore, createDispatchEvent } from './events';\n\nexport function withStore<T extends Constructor<CustomElement & HTMLElement>>(\n    Base: T\n) {\n    return class extends Base implements StoreConnectedElement {\n        unsubscribe?: Function;\n\n        connectedCallback() {\n            if (super.connectedCallback) super.connectedCallback();\n\n            let store;\n            if (store = requestStore(this)) {\n                const handler = e =>\n                    this.onStateChange!(\n                        (<UpdateEvent>e).detail.state,\n                        (<UpdateEvent>e).detail.mutation\n                    );\n                store.addEventListener(StoreEvents.Update, handler, true);\n                this.unsubscribe = store.removeEventListener.bind(\n                    this,\n                    StoreEvents.Update,\n                    handler,\n                    true\n                );\n\n                this.onStateChange(store.getStore().state);\n            }\n        }\n\n        disconnectedCallback() {\n            if (super.disconnectedCallback) super.disconnectedCallback();\n\n            this.unsubscribe!();\n        }\n\n        onStoreConnect() { }\n\n        onStateChange(_: any, __?: Mutation) { }\n\n        dispatch(type: string, data?: any) {\n            this.dispatchEvent(createDispatchEvent(type, data));\n        }\n    };\n}\n","import {\n    StoreEvents,\n    StoreInterface,\n    StoreProviderInterface,\n    Mutation,\n    StoreConfig,\n    RequestStoreEvent,\n} from './types';\nimport { createUpdateEvent } from './events';\nimport { createStore } from './store';\n\nexport abstract class StoreProvider extends HTMLElement\n    implements StoreProviderInterface {\n    store?: StoreInterface = undefined;\n    listeners: WeakMap<object, Function> = new WeakMap();\n\n    constructor() {\n        super();\n\n        this.addEventListener(StoreEvents.Request, <any>this.onStoreRequest, true);\n        this.addEventListener(StoreEvents.Dispatch, this.onStoreDispatch, true);\n\n        this.store = createStore(this.config);\n        this.store.subscribe(this.onStateChange);\n    }\n\n    get config(): StoreConfig {\n        return {};\n    }\n\n    getStore(): StoreInterface {\n        return this.store!;\n    }\n\n    onStateChange = (state: any, mutation?: Mutation) =>\n        this.dispatchEvent(createUpdateEvent(state, mutation))\n\n    onStoreRequest = (event: RequestStoreEvent) => {\n        event.stopPropagation();\n        event.detail.store = this;\n    }\n\n    onStoreDispatch = (event: Event) => {\n        this.getStore().dispatch((<CustomEvent>event).detail);\n    }\n}\n","export * from './store';\nexport * from './withStore';\nexport * from './StoreProvider';\nexport * from './types';","import { StoreProvider, withStore, createStore } from '@tiny-lit/store';\nimport { html, Element } from '@tiny-lit/element';\n\nconst JSONObject = value => {\n    if (typeof value === 'string') {\n        try {\n            value = JSON.parse(value);\n        } catch (e) {}\n    }\n    return value;\n};\n\nconst Items = [\n    {\n        name: 'Men+s+Tech+Shell+Full-Zip',\n        title: \"Men's Tech Shell Full-Zip\",\n        category: 'mens_outerwear',\n        price: 50.2\n    },\n    {\n        name: 'Anvil+L+S+Crew+Neck+-+Grey',\n        title: 'Anvil L/S Crew Neck - Grey',\n        category: 'mens_outerwear',\n        price: 22.15\n    },\n    {\n        name: 'Green+Flex+Fleece+Zip+Hoodie',\n        title: 'Green Flex Fleece Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 45.65\n    },\n    {\n        name: 'Android+Nylon+Packable+Jacket',\n        title: 'Android Nylon Packable Jacket',\n        category: 'mens_outerwear',\n        price: 33.6\n    },\n    {\n        name: 'YouTube+Ultimate+Hooded+Sweatshirt',\n        title: 'YouTube Ultimate Hooded Sweatshirt',\n        category: 'mens_outerwear',\n        price: 32.35\n    },\n    {\n        name: 'Grey+Heather+Fleece+Zip+Hoodie',\n        title: 'Grey Heather Fleece Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 38.85\n    },\n    {\n        name: 'Vastrm+Hoodie',\n        title: 'Vastrm Hoodie',\n        category: 'mens_outerwear',\n        price: 200.0\n    },\n    {\n        name: 'Recycled+Plastic+Bottle+Hoodie+-+Green',\n        title: 'Recycled Plastic Bottle Hoodie - Green',\n        category: 'mens_outerwear',\n        price: 60.95\n    },\n    {\n        name: 'Rowan+Pullover+Hood',\n        title: 'Rowan Pullover Hood',\n        category: 'mens_outerwear',\n        price: 60.85\n    },\n    {\n        name: 'Men+s+Voyage+Fleece+Jacket',\n        title: \"Men's Voyage Fleece Jacket\",\n        category: 'mens_outerwear',\n        price: 48.0\n    },\n    {\n        name: 'Eco-Jersey+Chrome+Zip+Up+Hoodie',\n        title: 'Eco-Jersey Chrome Zip Up Hoodie',\n        category: 'mens_outerwear',\n        price: 37.75\n    },\n    {\n        name: 'Android+Colorblock+Hooded+Pullover',\n        title: 'Android Colorblock Hooded Pullover',\n        category: 'mens_outerwear',\n        price: 50.2\n    },\n    {\n        name: 'Tri-blend+Full-Zip+Hoodie',\n        title: 'Tri-blend Full-Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 52.2\n    },\n    {\n        name: 'Fleece+Full-Zip+Hoodie',\n        title: 'Fleece Full-Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 45.65\n    },\n    {\n        name: 'Jacquard-Knit+Full-Zip+Fleece',\n        title: 'Jacquard-Knit Full-Zip Fleece',\n        category: 'mens_outerwear',\n        price: 74.9\n    },\n    {\n        name: 'YouTube+Unisex+Flex+Fleece+Zip+Hoodie',\n        title: 'YouTube Unisex Flex Fleece Zip Hoodie',\n        category: 'mens_outerwear',\n        price: 45.25\n    }\n];\n\nconst ElementWithStore = withStore(Element);\n\nclass MyStore extends StoreProvider {\n    static get is() {\n        return 'my-store';\n    }\n\n    get config() {\n        return {\n            initialState: {\n                ...JSON.parse(this.getAttribute('initial-state')),\n                cart: [],\n                count: 0\n            },\n            plugins: [store => store.subscribe(console.log)],\n            actions: {\n                addToCart({ commit }, item) {\n                    commit('addItem', item);\n                    commit('updateCount');\n                },\n                removeFromCart({ commit }, item) {\n                    commit('removeItemByIndex', item);\n                    commit('updateCount');\n                },\n                removeAllFromCart({ commit, state }) {\n                    let items = state.cart;\n\n                    items.forEach(item => commit('removeItem', item));\n\n                    commit('updateCount');\n                }\n            },\n            mutations: {\n                addItem(state, data) {\n                    return{\n                        ...state,\n                        cart: [\n                            ...state.cart,\n                            data\n                        ]\n                    };\n                },\n                removeItemByIndex(state, data) {\n                    return{\n                        ...state,\n                        cart: state.cart.filter((a, i) => i !== data)\n                    };\n                },\n                removeItem(state, item) {\n                    return {\n                        ...state,\n                        cart: state.cart.filter(i => i !== item)\n                    };\n                },\n                updateCount(state) {\n                    return {\n                        ...state,\n                        count: state.cart.length\n                    };\n                }\n            }\n        };\n    }\n}\ncustomElements.define(MyStore.is, MyStore);\n\nclass Basket extends ElementWithStore {\n    constructor() {\n        super();\n        this.count = 0;\n        this.items = [];\n        this.state = {\n            open: false\n        };\n    }\n\n    static get properties() {\n        return {\n            count: Number,\n            items: Object\n        };\n    }\n\n    onStateChange(state) {\n        this.count = state.count;\n        this.items = state.cart;\n    }\n\n    static get is() {\n        return 'shop-basket';\n    }\n\n    handleRemove(index) {\n        this.dispatch('removeFromCart', index);\n    }\n\n    handleRemoveAll() {\n        this.dispatch('removeAllFromCart');\n    }\n\n    toggleCart = () => {\n        this.setState({\n            open: !this.state.open\n        })\n    }\n\n    render() {\n        return html`\n            <style>\n                .basket {\n                    position: fixed;\n                    bottom: 0;\n                    right: 10px;\n                    color: white;\n                    z-index: 100;\n                }\n\n                .basket__list {\n                    z-index: 100;\n                    overflow-y: scroll;\n                    max-height: 150px;\n                    margin: 0;\n                }\n\n                .basket__listItem  {\n                    margin-bottom: 5px;\n                }\n\n                .basket__listItemButton {\n                    padding: 3px 5px;\n                }\n\n                .basket__dropdown {\n                    position: absolute;\n                    bottom: calc(100% + 10px);\n                    background-color: rgb(var(--background));\n                    width: 300px;\n                    right: 0;\n                    padding: 10px;\n                    border: 1px solid rgb(var(--primary));\n                }\n\n                .basket__toggle {\n                    position: relative;\n                }\n\n                .basket__badge {\n                    background: rgb(var(--primary));\n                    border-radius: 50%;\n                    padding: 2px;\n                    color: rgb(var(--background));\n                    position: absolute;\n                    top: 0;\n                    right: 0;\n                    width: 15px;\n                    height: 15px;\n                    font-size: 12px;\n                    line-height: 15px;\n                    margin: 5px 10px 0;\n                }\n\n                .basket__clear {\n                    float:right;\n                    margin-top: 20px;\n                }\n            </style>\n            <div class=\"basket\">\n                <button class=\"basket__toggle\" onClick=${this.toggleCart}>\n                    <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        viewBox=\"0 0 576 512\"\n                        width=\"24\"\n                    >\n                        <path\n                            fill=\"currentColor\"\n                            d=\"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z\"\n                        ></path>\n                    </svg>\n                    <span class=\"basket__badge\">${this.count}</span>\n                </button>\n                <div class=\"basket__dropdown\" hidden=${!this.state.open}>\n                    <span>Total: ${this.count}${html`<span>items</span>`}</span>\n\n\n                    <table class=\"basket__list\">\n                        <thead>\n                            <tr>\n                                <th>Item</th>\n                                <th>Qty</th>\n                                <th></th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${this.items.map(\n                                (item, index) => html`\n                                <tr>\n                                    <td>${item.title}</td>\n                                    <td>1</td>\n                                    <td>\n                                        <button\n                                            class=\"basket__listItemButton\"\n                                            onCLick=${() => this.handleRemove(index)}\n                                        >\n                                            X\n                                        </button>\n                                    </td>\n                                </tr>\n                            `)}\n                        </tbody>\n                    </table>\n\n                    ${\n                        this.items.length\n                            ? html`<button class=\"basket__clear\" onClick=${() =>\n                                this.handleRemoveAll()}>remove all</button>`\n                            : null\n                    }\n                </div>\n            </div>\n        `;\n    }\n}\ncustomElements.define(Basket.is, Basket);\n\nclass Item extends ElementWithStore {\n    item = {};\n\n    static get is() {\n        return 'shop-item';\n    }\n\n    static get properties() {\n        return {\n            item: JSONObject\n        };\n    }\n\n    handleClick = () => {\n        this.dispatch('addToCart', this.item);\n    };\n\n    render() {\n        return html`\n            <div class=\"detail\" has-content=\"\">\n                <img\n                    src=\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw\"\n                    width=\"300\"\n                    height=\"300\"\n                    class=\"image\"\n                />\n                <h1>${this.item.title}</h1>\n                <div class=\"price\">${this.item.price}$</div>\n                <button\n                    onClick=${this.handleClick}\n                    class=\"button\"\n                    aria-label=\"Add this item to cart\"\n                >\n                    Add to Cart\n                </button>\n            </div>\n        `;\n    }\n}\ncustomElements.define(Item.is, Item);\n\nclass StoreDemo extends Element {\n    static get is() {\n        return 'store-demo';\n    }\n\n    render() {\n        return html`\n            <style>\n                h1 {\n                    font-size: 13px;\n                    font-weight: 500;\n                    line-height: 28px;\n                    margin: 0;\n                }\n                .detail {\n                    text-align:center;\n                    margin: 0 28px 48px;\n                }\n                .price {\n                    margin: 0px 0 10px;\n                    font-size: 13px;\n                }\n                .image {\n                    max-width: 100%;\n                    background: rgb(117, 117, 117);\n                }\n                my-store {\n                    display: flex;\n                    flex-wrap: wrap;\n                    position: relative;\n                }\n                shop-item {\n                    flex: 1 1;\n                    flex-basis: 33%;\n                    max-width: 33%;\n                }\n                @media (max-width: 767px) {\n                    shop-item {\n                        flex-basis: 100%;\n                        max-width: 100%;\n                    }\n                }\n            </style>\n            <my-store>\n                <shop-basket></shop-basket>\n                ${Items.map(item => html`<shop-item item=${item}></shop-item>`)}\n            </my-store>\n        `;\n    }\n}\n\ncustomElements.define(StoreDemo.is, StoreDemo);\n","import { html, render } from '@tiny-lit/core';\nimport { Element } from '@tiny-lit/element';\n\nconst t = (c) => html` <div>${c}</div> `;\n\nclass Svg extends Element {\n    static get is() {\n        return 'test-svg';\n    }\n\n    static get properties() {\n        return {\n            radius: Number\n        };\n    }\n\n    maxRadius = 50;\n\n    constructor() {\n        super();\n        this.attachShadow({ mode: 'open' });\n    }\n\n    onChange = ({ target }) => {\n        this.maxRadius = Number(target.value);\n        this.update();\n    };\n\n    connectedCallback() {\n        super.connectedCallback();\n\n        this.interval = setInterval(() => {\n            this.radius = Math.abs(\n                Math.sin(Date.now() / 1000) * this.maxRadius\n            );\n        }, 10);\n    }\n\n    disconnectedCallback() {\n        clearInterval(this.interval);\n    }\n\n    get radius() {\n        console.log(\"get\");\n    }\n\n    set radius(value) {\n        console.log(\"set\", value);\n    }\n\n    render() {\n        return html`\n            <style>\n                :host {\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-between;\n                    flex-direction: column;\n                    height: 50vh;\n                }\n            </style>\n            <div>\n                <p>Max size</p>\n                <input\n                    type=\"range\"\n                    min=\"10\"\n                    max=\"100\"\n                    onChange=${this.onChange}\n                />\n            </div>\n            <svg height=${this.maxRadius * 2} width=${this.maxRadius * 2}>\n                <circle\n                    cx=${this.maxRadius}\n                    cy=${this.maxRadius}\n                    r=\"${this.radius}\"\n                    stroke=\"black\"\n                    stroke-width=\"3\"\n                    fill=\"red\"\n                />\n                Sorry, your browser does not support inline SVG.\n            </svg>\n        `;\n    }\n}\ncustomElements.define(Svg.is, Svg);\n","import { HistoryInterface } from '../types';\n\nexport default (): HistoryInterface => ({\n    path() {\n        return location.hash ? location.hash.substring(1) : '/';\n    },\n    go(path: string) {\n        location.hash = `#${path}`;\n    },\n    listen(callback) {\n        addEventListener('hashchange', <any>callback);\n\n        return removeEventListener.bind(window, 'hashchange', callback);\n    }\n});\n","import { HistoryInterface } from '../types';\n\nexport default (): HistoryInterface => ({\n    path() {\n        return location.pathname;\n    },\n    go(path: string) {\n        history.pushState(null, document.title, path);\n        dispatchEvent(new Event('pushstate'));\n    },\n    listen(callback) {\n        addEventListener('popstate', <any>callback);\n        addEventListener('pushstate', <any>callback);\n\n        return removeEventListener.bind(window, 'popstate', callback);\n    }\n});","export { default as createHashHistory } from './hash';\nexport { default as createPathHistory } from './path';","import {\n    RouteCallbacks,\n    Route,\n    Router as RouterInterface,\n    HistoryInterface\n} from './types';\nimport { RouterOptions } from './types';\nimport { createPathHistory, createHashHistory } from './history';\n\n/**\n * Valid paths:\n * Required\n * /:param\n *\n * Optional\n * /:param?\n *\n * Required matching list\n * /:param{test1,test2}\n *\n * Optional matching list\n * /:param{test1,test2}?\n * @param {*} path\n */\nconst ParamsRegex: RegExp = /\\/:([\\w]+)(?:{([\\w,]+)})?(\\?)?/g;\n\nfunction parsePath(path: string) {\n    let m,\n        params: Array<string> = [],\n        pattern = path;\n\n    if (path === '*') {\n        return {\n            regex: /.*/,\n            params: []\n        };\n    }\n\n    while ((m = ParamsRegex.exec(path))) {\n        const paramRegex = m[2] ? `${m[2].split(',').join('|')}` : '[^/]+';\n\n        params.push(m[1]);\n        pattern = pattern.replace(\n            m[0],\n            `(?:\\\\/(${paramRegex}))${m[3] ? '?' : ''}`\n        );\n    }\n\n    return {\n        regex: new RegExp(`^${pattern}\\\\/?$`),\n        params\n    }\n}\n\nexport class Router implements RouterInterface {\n    history: HistoryInterface;\n    routes: Array<Route> = [];\n    current?: Route;\n\n    constructor({ interceptLocals, useHash }: RouterOptions) {\n        if (useHash) this.history = createHashHistory();\n        else this.history = createPathHistory();\n\n        this.history.listen(this.resolve);\n\n        if (interceptLocals)\n            document.addEventListener('click', this.handleLocalClick);\n    }\n\n    handleLocalClick = e => {\n        const target = e.target;\n        if (\n            target.nodeName === 'A' &&\n            target.href.indexOf(location.origin) === 0\n        ) {\n            e.preventDefault();\n\n            this.goTo(target.getAttribute('href'));\n        }\n    }\n\n    on(path: string, callbacks: RouteCallbacks = {}) {\n        const route = {\n            path,\n            callbacks,\n            ...parsePath(path)\n        };\n        this.routes.push(route);\n\n        return () => (this.routes = this.routes.filter(r => r !== route));\n    }\n\n    resolve = () => {\n        const path = this.history.path();\n        const current = this.current;\n\n        this.routes.some((route: Route) => {\n            let match: any = path.match(route.regex);\n            const { onEnter, onUpdate } = route.callbacks;\n\n            if (match) {\n                match = match\n                    .filter(m => m !== undefined)\n                    .reduce((map, m, i) => {\n                        if (i) map[route.params[i - 1]] = m;\n                        return map;\n                    }, {});\n\n                if (current !== route) {\n                    this.current = route;\n\n                    if (current)\n                        current.callbacks.onLeave!(match);\n\n                    onEnter!(match);\n                } else {\n                    onUpdate!(match);\n                }\n            }\n\n            return match;\n        });\n    }\n\n    goTo(path) {\n        this.history.go(path);\n    }\n}\n","export interface RouteCallbacks {\n    onEnter?(matches: any);\n    onLeave?(matches: any);\n    onUpdate?(matches: any);\n}\n\nexport const enum RouteComponentCallbacks {\n    onRouteUpdate = 'onRouteUpdate',\n    onRouteEnter = 'onRouteEnter',\n    onRouteLeave = 'onRouteLeave'\n}\n\nexport interface RouteComponent extends HTMLElement {\n    [RouteComponentCallbacks.onRouteEnter]?(matches: any);\n    [RouteComponentCallbacks.onRouteUpdate]?(matches: any);\n    [RouteComponentCallbacks.onRouteLeave]?();\n}\n\nexport type Route = {\n    regex: RegExp;\n    params: Array<string>;\n    callbacks: RouteCallbacks;\n    path: string\n};\n\nexport enum RouterEvents {\n    Request = 'router::request',\n    Change = 'router::change'\n}\n\nexport interface Router {\n    routes: Array<Route>;\n    current?: Route;\n    on(path: string, callbacks: RouteCallbacks): Function;\n    resolve();\n    goTo(path);\n}\n\nexport type RequestRouterEvent = CustomEvent<{ router?: Router }>;\n\nexport type RouterOptions = {\n    interceptLocals?: boolean;\n    useHash?: Boolean;\n};\n\nexport type HistoryInterface = {\n    path(): string;\n    go(path: string): void;\n    listen(callback: () => void): Function;\n};\n","import { RouterEvents, RequestRouterEvent, Router } from './types';\n\nexport function requestRouter(el: HTMLElement): Router | undefined {\n    const event: RequestRouterEvent = new CustomEvent(RouterEvents.Request, { detail: {} });\n    el.dispatchEvent(event);\n\n    return event.detail.router;\n}","import { Router, RouteComponent } from './types';\nimport { requestRouter } from './events';\n\nconst importedModules = new Set();\nconst importModule = url =>\n    new Promise(resolve => {\n        if (!url || importedModules.has(url)) return resolve();\n        else {\n            const script = document.createElement('script');\n            script.onload = resolve;\n            script.src = url;\n\n            document.head.appendChild(script);\n\n            importedModules.add(url);\n        }\n    });\n\nconst waitComponent = (route: RouteElement, component: HTMLElement) =>\n    importModule(route.getAttribute('module')!)\n        // TODO check element upgrade\n        .then(() => customElements.whenDefined(component.localName));\n\nexport class RouteElement extends HTMLElement {\n    router?: Router;\n    dispose?: Function;\n\n    connectedCallback() {\n        const path = this.getAttribute('path'),\n            componentName = this.getAttribute('component');\n\n        if (!path || !componentName) return;\n\n        if ((this.router = requestRouter(this))) {\n            const component: RouteComponent = document.createElement(\n                componentName\n            );\n\n            this.dispose = this.router.on(path, {\n                onEnter: params => {\n                    waitComponent(this, component)\n                        .then(() => this.appendChild(component))\n                        .then(\n                            () =>\n                                component.onRouteEnter &&\n                                component.onRouteEnter(params)\n                        );\n                },\n                onUpdate: params => {\n                    waitComponent(this, component).then(\n                        () =>\n                            component.onRouteUpdate &&\n                            component.onRouteUpdate(params)\n                    );\n                },\n                onLeave: () => {\n                    waitComponent(this, component)\n                        .then(\n                            () =>\n                                component.onRouteLeave &&\n                                component.onRouteLeave()\n                        )\n                        .then(() => this.removeChild(component));\n                }\n            });\n        }\n    }\n\n    disconnectedCallback() {\n        if (this.dispose) this.dispose();\n    }\n}\n","import { Router } from './router';\nimport { RouterEvents, RequestRouterEvent } from './types';\n\nexport class RouterProvider extends HTMLElement {\n    router?: Router;\n\n    onRouterRequest = (e: RequestRouterEvent) => {\n        e.detail.router = this.router;\n    }\n\n    connectedCallback() {\n        document.body.addEventListener(RouterEvents.Request, <any>this.onRouterRequest, true);\n\n        if (!this.router) {\n            this.router = new Router({\n                interceptLocals: this.hasAttribute('intercept-locals'),\n                useHash: this.hasAttribute('use-hash')\n             });\n        }\n\n        Promise.resolve().then(this.router!.resolve);\n    }\n\n    disconnectedCallback() {\n        document.body.removeEventListener(RouterEvents.Request, <any>this.onRouterRequest, true);\n    }\n}\n","export { Router } from './router';\nexport { RouteElement } from './RouteElement';\nexport { RouterProvider } from './RouterProvider';","import './todo/index.js';\nimport './scheduler/index.js';\nimport './store/index.js';\nimport './svg/index.js';\n\nimport { RouterProvider, RouteElement } from '@tiny-lit/router';\n\ncustomElements.define('demo-router', RouterProvider);\ncustomElements.define('demo-route', RouteElement);\n"]}